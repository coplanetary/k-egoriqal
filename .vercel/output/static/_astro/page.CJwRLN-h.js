import"./_sentry-release-injection-file.V1S_e4ml.js";(function(){try{var ze=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},en=new Error().stack;en&&(ze._sentryDebugIds=ze._sentryDebugIds||{},ze._sentryDebugIds[en]="d750b1bd-bb87-4a2a-9a36-681023e2474e",ze._sentryDebugIdIdentifier="sentry-dbid-d750b1bd-bb87-4a2a-9a36-681023e2474e")}catch{}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},htmx_min={exports:{}};(function(module){(function(ze,en){module.exports?module.exports=en():ze.htmx=ze.htmx||en()})(typeof self<"u"?self:commonjsGlobal,function(){return function(){var Q={onLoad:B,process:zt,on:de,off:ge,trigger:ce,ajax:Nr,find:C,findAll:f,closest:v,values:function(ze,en){var tn=dr(ze,en||"post");return tn.values},remove:_,addClass:z,removeClass:n,toggleClass:$,takeClass:W,defineExtension:Ur,removeExtension:Fr,logAll:V,logNone:j,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,allowScriptTags:!0,inlineScriptNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",useTemplateFragments:!1,scrollBehavior:"smooth",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get"],selfRequestsOnly:!1,ignoreTitle:!1,scrollIntoViewOnBoost:!0,triggerSpecsCache:null},parseInterval:d,_:t,createEventSource:function(ze){return new EventSource(ze,{withCredentials:!0})},createWebSocket:function(ze){var en=new WebSocket(ze,[]);return en.binaryType=Q.config.wsBinaryType,en},version:"1.9.11"},r={addTriggerHandler:Lt,bodyContains:se,canAccessLocalStorage:U,findThisElement:xe,filterValues:yr,hasAttribute:o,getAttributeValue:te,getClosestAttributeValue:ne,getClosestMatch:c,getExpressionVars:Hr,getHeaders:xr,getInputValues:dr,getInternalData:ae,getSwapSpecification:wr,getTriggerSpecs:it,getTarget:ye,makeFragment:l,mergeObjects:le,makeSettleInfo:T,oobSwap:Ee,querySelectorExt:ue,selectAndSwap:je,settleImmediately:nr,shouldCancel:ut,triggerEvent:ce,triggerErrorEvent:fe,withExtensions:R},w=["get","post","put","delete","patch"],i=w.map(function(ze){return"[hx-"+ze+"], [data-hx-"+ze+"]"}).join(", "),S=e("head"),q=e("title"),H=e("svg",!0);function e(ze,en=!1){return new RegExp(`<${ze}(\\s[^>]*>|>)([\\s\\S]*?)<\\/${ze}>`,en?"gim":"im")}function d(ze){if(ze==null)return;let en=NaN;return ze.slice(-2)=="ms"?en=parseFloat(ze.slice(0,-2)):ze.slice(-1)=="s"?en=parseFloat(ze.slice(0,-1))*1e3:ze.slice(-1)=="m"?en=parseFloat(ze.slice(0,-1))*1e3*60:en=parseFloat(ze),isNaN(en)?void 0:en}function ee(ze,en){return ze.getAttribute&&ze.getAttribute(en)}function o(ze,en){return ze.hasAttribute&&(ze.hasAttribute(en)||ze.hasAttribute("data-"+en))}function te(ze,en){return ee(ze,en)||ee(ze,"data-"+en)}function u(ze){return ze.parentElement}function re(){return document}function c(ze,en){for(;ze&&!en(ze);)ze=u(ze);return ze||null}function L(ze,en,tn){var nn=te(en,tn),rn=te(en,"hx-disinherit");return ze!==en&&rn&&(rn==="*"||rn.split(" ").indexOf(tn)>=0)?"unset":nn}function ne(ze,en){var tn=null;if(c(ze,function(nn){return tn=L(ze,nn,en)}),tn!=="unset")return tn}function h(ze,en){var tn=ze.matches||ze.matchesSelector||ze.msMatchesSelector||ze.mozMatchesSelector||ze.webkitMatchesSelector||ze.oMatchesSelector;return tn&&tn.call(ze,en)}function A(ze){var en=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,tn=en.exec(ze);return tn?tn[1].toLowerCase():""}function s(ze,en){for(var tn=new DOMParser,nn=tn.parseFromString(ze,"text/html"),rn=nn.body;en>0;)en--,rn=rn.firstChild;return rn==null&&(rn=re().createDocumentFragment()),rn}function N(ze){return/<body/.test(ze)}function l(ze){var en=!N(ze),tn=A(ze),nn=ze;if(tn==="head"&&(nn=nn.replace(S,"")),Q.config.useTemplateFragments&&en){var rn=s("<body><template>"+nn+"</template></body>",0),sn=rn.querySelector("template").content;return Q.config.allowScriptTags?oe(sn.querySelectorAll("script"),function(an){Q.config.inlineScriptNonce&&(an.nonce=Q.config.inlineScriptNonce),an.htmxExecuted=navigator.userAgent.indexOf("Firefox")===-1}):oe(sn.querySelectorAll("script"),function(an){_(an)}),sn}switch(tn){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return s("<table>"+nn+"</table>",1);case"col":return s("<table><colgroup>"+nn+"</colgroup></table>",2);case"tr":return s("<table><tbody>"+nn+"</tbody></table>",2);case"td":case"th":return s("<table><tbody><tr>"+nn+"</tr></tbody></table>",3);case"script":case"style":return s("<div>"+nn+"</div>",1);default:return s(nn,0)}}function ie(ze){ze&&ze()}function I(ze,en){return Object.prototype.toString.call(ze)==="[object "+en+"]"}function k(ze){return I(ze,"Function")}function P(ze){return I(ze,"Object")}function ae(ze){var en="htmx-internal-data",tn=ze[en];return tn||(tn=ze[en]={}),tn}function M(ze){var en=[];if(ze)for(var tn=0;tn<ze.length;tn++)en.push(ze[tn]);return en}function oe(ze,en){if(ze)for(var tn=0;tn<ze.length;tn++)en(ze[tn])}function X(ze){var en=ze.getBoundingClientRect(),tn=en.top,nn=en.bottom;return tn<window.innerHeight&&nn>=0}function se(ze){return ze.getRootNode&&ze.getRootNode()instanceof window.ShadowRoot?re().body.contains(ze.getRootNode().host):re().body.contains(ze)}function D(ze){return ze.trim().split(/\s+/)}function le(ze,en){for(var tn in en)en.hasOwnProperty(tn)&&(ze[tn]=en[tn]);return ze}function E(ze){try{return JSON.parse(ze)}catch(en){return b(en),null}}function U(){var ze="htmx:localStorageTest";try{return localStorage.setItem(ze,ze),localStorage.removeItem(ze),!0}catch{return!1}}function F(ze){try{var en=new URL(ze);return en&&(ze=en.pathname+en.search),/^\/$/.test(ze)||(ze=ze.replace(/\/+$/,"")),ze}catch{return ze}}function t(e){return Tr(re().body,function(){return eval(e)})}function B(ze){var en=Q.on("htmx:load",function(tn){ze(tn.detail.elt)});return en}function V(){Q.logger=function(ze,en,tn){console&&console.log(en,ze,tn)}}function j(){Q.logger=null}function C(ze,en){return en?ze.querySelector(en):C(re(),ze)}function f(ze,en){return en?ze.querySelectorAll(en):f(re(),ze)}function _(ze,en){ze=p(ze),en?setTimeout(function(){_(ze),ze=null},en):ze.parentElement.removeChild(ze)}function z(ze,en,tn){ze=p(ze),tn?setTimeout(function(){z(ze,en),ze=null},tn):ze.classList&&ze.classList.add(en)}function n(ze,en,tn){ze=p(ze),tn?setTimeout(function(){n(ze,en),ze=null},tn):ze.classList&&(ze.classList.remove(en),ze.classList.length===0&&ze.removeAttribute("class"))}function $(ze,en){ze=p(ze),ze.classList.toggle(en)}function W(ze,en){ze=p(ze),oe(ze.parentElement.children,function(tn){n(tn,en)}),z(ze,en)}function v(ze,en){if(ze=p(ze),ze.closest)return ze.closest(en);do if(ze==null||h(ze,en))return ze;while(ze=ze&&u(ze));return null}function g(ze,en){return ze.substring(0,en.length)===en}function G(ze,en){return ze.substring(ze.length-en.length)===en}function J(ze){var en=ze.trim();return g(en,"<")&&G(en,"/>")?en.substring(1,en.length-2):en}function Z(ze,en){return en.indexOf("closest ")===0?[v(ze,J(en.substr(8)))]:en.indexOf("find ")===0?[C(ze,J(en.substr(5)))]:en==="next"?[ze.nextElementSibling]:en.indexOf("next ")===0?[K(ze,J(en.substr(5)))]:en==="previous"?[ze.previousElementSibling]:en.indexOf("previous ")===0?[Y(ze,J(en.substr(9)))]:en==="document"?[document]:en==="window"?[window]:en==="body"?[document.body]:re().querySelectorAll(J(en))}var K=function(ze,en){for(var tn=re().querySelectorAll(en),nn=0;nn<tn.length;nn++){var rn=tn[nn];if(rn.compareDocumentPosition(ze)===Node.DOCUMENT_POSITION_PRECEDING)return rn}},Y=function(ze,en){for(var tn=re().querySelectorAll(en),nn=tn.length-1;nn>=0;nn--){var rn=tn[nn];if(rn.compareDocumentPosition(ze)===Node.DOCUMENT_POSITION_FOLLOWING)return rn}};function ue(ze,en){return en?Z(ze,en)[0]:Z(re().body,ze)[0]}function p(ze){return I(ze,"String")?C(ze):ze}function ve(ze,en,tn){return k(en)?{target:re().body,event:ze,listener:en}:{target:p(ze),event:en,listener:tn}}function de(ze,en,tn){jr(function(){var rn=ve(ze,en,tn);rn.target.addEventListener(rn.event,rn.listener)});var nn=k(en);return nn?en:tn}function ge(ze,en,tn){return jr(function(){var nn=ve(ze,en,tn);nn.target.removeEventListener(nn.event,nn.listener)}),k(en)?en:tn}var pe=re().createElement("output");function me(ze,en){var tn=ne(ze,en);if(tn){if(tn==="this")return[xe(ze,en)];var nn=Z(ze,tn);return nn.length===0?(b('The selector "'+tn+'" on '+en+" returned no matches!"),[pe]):nn}}function xe(ze,en){return c(ze,function(tn){return te(tn,en)!=null})}function ye(ze){var en=ne(ze,"hx-target");if(en)return en==="this"?xe(ze,"hx-target"):ue(ze,en);var tn=ae(ze);return tn.boosted?re().body:ze}function be(ze){for(var en=Q.config.attributesToSettle,tn=0;tn<en.length;tn++)if(ze===en[tn])return!0;return!1}function we(ze,en){oe(ze.attributes,function(tn){!en.hasAttribute(tn.name)&&be(tn.name)&&ze.removeAttribute(tn.name)}),oe(en.attributes,function(tn){be(tn.name)&&ze.setAttribute(tn.name,tn.value)})}function Se(ze,en){for(var tn=Br(en),nn=0;nn<tn.length;nn++){var rn=tn[nn];try{if(rn.isInlineSwap(ze))return!0}catch(sn){b(sn)}}return ze==="outerHTML"}function Ee(ze,en,tn){var nn="#"+ee(en,"id"),rn="outerHTML";ze==="true"||(ze.indexOf(":")>0?(rn=ze.substr(0,ze.indexOf(":")),nn=ze.substr(ze.indexOf(":")+1,ze.length)):rn=ze);var sn=re().querySelectorAll(nn);return sn?(oe(sn,function(an){var cn,un=en.cloneNode(!0);cn=re().createDocumentFragment(),cn.appendChild(un),Se(rn,an)||(cn=un);var ln={shouldSwap:!0,target:an,fragment:cn};ce(an,"htmx:oobBeforeSwap",ln)&&(an=ln.target,ln.shouldSwap&&Be(rn,an,an,cn,tn),oe(tn.elts,function(dn){ce(dn,"htmx:oobAfterSwap",ln)}))}),en.parentNode.removeChild(en)):(en.parentNode.removeChild(en),fe(re().body,"htmx:oobErrorNoTarget",{content:en})),ze}function Ce(ze,en,tn){var nn=ne(ze,"hx-select-oob");if(nn)for(var rn=nn.split(","),sn=0;sn<rn.length;sn++){var an=rn[sn].split(":",2),cn=an[0].trim();cn.indexOf("#")===0&&(cn=cn.substring(1));var un=an[1]||"true",ln=en.querySelector("#"+cn);ln&&Ee(un,ln,tn)}oe(f(en,"[hx-swap-oob], [data-hx-swap-oob]"),function(dn){var fn=te(dn,"hx-swap-oob");fn!=null&&Ee(fn,dn,tn)})}function Re(ze){oe(f(ze,"[hx-preserve], [data-hx-preserve]"),function(en){var tn=te(en,"id"),nn=re().getElementById(tn);nn!=null&&en.parentNode.replaceChild(nn,en)})}function Te(ze,en,tn){oe(en.querySelectorAll("[id]"),function(nn){var rn=ee(nn,"id");if(rn&&rn.length>0){var sn=rn.replace("'","\\'"),an=nn.tagName.replace(":","\\:"),cn=ze.querySelector(an+"[id='"+sn+"']");if(cn&&cn!==ze){var un=nn.cloneNode();we(nn,cn),tn.tasks.push(function(){we(nn,un)})}}})}function Oe(ze){return function(){n(ze,Q.config.addedClass),zt(ze),Nt(ze),qe(ze),ce(ze,"htmx:load")}}function qe(ze){var en="[autofocus]",tn=h(ze,en)?ze:ze.querySelector(en);tn?.focus()}function a(ze,en,tn,nn){for(Te(ze,tn,nn);tn.childNodes.length>0;){var rn=tn.firstChild;z(rn,Q.config.addedClass),ze.insertBefore(rn,en),rn.nodeType!==Node.TEXT_NODE&&rn.nodeType!==Node.COMMENT_NODE&&nn.tasks.push(Oe(rn))}}function He(ze,en){for(var tn=0;tn<ze.length;)en=(en<<5)-en+ze.charCodeAt(tn++)|0;return en}function Le(ze){var en=0;if(ze.attributes)for(var tn=0;tn<ze.attributes.length;tn++){var nn=ze.attributes[tn];nn.value&&(en=He(nn.name,en),en=He(nn.value,en))}return en}function Ae(ze){var en=ae(ze);if(en.onHandlers){for(var tn=0;tn<en.onHandlers.length;tn++){const nn=en.onHandlers[tn];ze.removeEventListener(nn.event,nn.listener)}delete en.onHandlers}}function Ne(ze){var en=ae(ze);en.timeout&&clearTimeout(en.timeout),en.webSocket&&en.webSocket.close(),en.sseEventSource&&en.sseEventSource.close(),en.listenerInfos&&oe(en.listenerInfos,function(tn){tn.on&&tn.on.removeEventListener(tn.trigger,tn.listener)}),Ae(ze),oe(Object.keys(en),function(tn){delete en[tn]})}function m(ze){ce(ze,"htmx:beforeCleanupElement"),Ne(ze),ze.children&&oe(ze.children,function(en){m(en)})}function Ie(ze,en,tn){if(ze.tagName==="BODY")return Ue(ze,en,tn);var nn,rn=ze.previousSibling;for(a(u(ze),ze,en,tn),rn==null?nn=u(ze).firstChild:nn=rn.nextSibling,tn.elts=tn.elts.filter(function(sn){return sn!=ze});nn&&nn!==ze;)nn.nodeType===Node.ELEMENT_NODE&&tn.elts.push(nn),nn=nn.nextElementSibling;m(ze),u(ze).removeChild(ze)}function ke(ze,en,tn){return a(ze,ze.firstChild,en,tn)}function Pe(ze,en,tn){return a(u(ze),ze,en,tn)}function Me(ze,en,tn){return a(ze,null,en,tn)}function Xe(ze,en,tn){return a(u(ze),ze.nextSibling,en,tn)}function De(ze,en,tn){return m(ze),u(ze).removeChild(ze)}function Ue(ze,en,tn){var nn=ze.firstChild;if(a(ze,nn,en,tn),nn){for(;nn.nextSibling;)m(nn.nextSibling),ze.removeChild(nn.nextSibling);m(nn),ze.removeChild(nn)}}function Fe(ze,en,tn){var nn=tn||ne(ze,"hx-select");if(nn){var rn=re().createDocumentFragment();oe(en.querySelectorAll(nn),function(sn){rn.appendChild(sn)}),en=rn}return en}function Be(ze,en,tn,nn,rn){switch(ze){case"none":return;case"outerHTML":Ie(tn,nn,rn);return;case"afterbegin":ke(tn,nn,rn);return;case"beforebegin":Pe(tn,nn,rn);return;case"beforeend":Me(tn,nn,rn);return;case"afterend":Xe(tn,nn,rn);return;case"delete":De(tn);return;default:for(var sn=Br(en),an=0;an<sn.length;an++){var cn=sn[an];try{var un=cn.handleSwap(ze,tn,nn,rn);if(un){if(typeof un.length<"u")for(var ln=0;ln<un.length;ln++){var dn=un[ln];dn.nodeType!==Node.TEXT_NODE&&dn.nodeType!==Node.COMMENT_NODE&&rn.tasks.push(Oe(dn))}return}}catch(fn){b(fn)}}ze==="innerHTML"?Ue(tn,nn,rn):Be(Q.config.defaultSwapStyle,en,tn,nn,rn)}}function Ve(ze){if(ze.indexOf("<title")>-1){var en=ze.replace(H,""),tn=en.match(q);if(tn)return tn[2]}}function je(ze,en,tn,nn,rn,sn){rn.title=Ve(nn);var an=l(nn);if(an)return Ce(tn,an,rn),an=Fe(tn,an,sn),Re(an),Be(ze,tn,en,an,rn)}function _e(ze,en,tn){var nn=ze.getResponseHeader(en);if(nn.indexOf("{")===0){var rn=E(nn);for(var sn in rn)if(rn.hasOwnProperty(sn)){var an=rn[sn];P(an)||(an={value:an}),ce(tn,sn,an)}}else for(var cn=nn.split(","),un=0;un<cn.length;un++)ce(tn,cn[un].trim(),[])}var x=/[\s,]/,$e=/[_$a-zA-Z]/,We=/[_$a-zA-Z0-9]/,Ge=['"',"'","/"],Je=/[^\s]/,Ze=/[{(]/,Ke=/[})]/;function Ye(ze){for(var en=[],tn=0;tn<ze.length;){if($e.exec(ze.charAt(tn))){for(var nn=tn;We.exec(ze.charAt(tn+1));)tn++;en.push(ze.substr(nn,tn-nn+1))}else if(Ge.indexOf(ze.charAt(tn))!==-1){var rn=ze.charAt(tn),nn=tn;for(tn++;tn<ze.length&&ze.charAt(tn)!==rn;)ze.charAt(tn)==="\\"&&tn++,tn++;en.push(ze.substr(nn,tn-nn+1))}else{var sn=ze.charAt(tn);en.push(sn)}tn++}return en}function Qe(ze,en,tn){return $e.exec(ze.charAt(0))&&ze!=="true"&&ze!=="false"&&ze!=="this"&&ze!==tn&&en!=="."}function et(ze,en,tn){if(en[0]==="["){en.shift();for(var nn=1,rn=" return (function("+tn+"){ return (",sn=null;en.length>0;){var an=en[0];if(an==="]"){if(nn--,nn===0){sn===null&&(rn=rn+"true"),en.shift(),rn+=")})";try{var cn=Tr(ze,function(){return Function(rn)()},function(){return!0});return cn.source=rn,cn}catch(un){return fe(re().body,"htmx:syntax:error",{error:un,source:rn}),null}}}else an==="["&&nn++;Qe(an,sn,tn)?rn+="(("+tn+"."+an+") ? ("+tn+"."+an+") : (window."+an+"))":rn=rn+an,sn=en.shift()}}}function y(ze,en){for(var tn="";ze.length>0&&!en.test(ze[0]);)tn+=ze.shift();return tn}function tt(ze){var en;return ze.length>0&&Ze.test(ze[0])?(ze.shift(),en=y(ze,Ke).trim(),ze.shift()):en=y(ze,x),en}var rt="input, textarea, select";function nt(ze,en,tn){var nn=[],rn=Ye(en);do{y(rn,Je);var sn=rn.length,an=y(rn,/[,\[\s]/);if(an!=="")if(an==="every"){var cn={trigger:"every"};y(rn,Je),cn.pollInterval=d(y(rn,/[,\[\s]/)),y(rn,Je);var un=et(ze,rn,"event");un&&(cn.eventFilter=un),nn.push(cn)}else if(an.indexOf("sse:")===0)nn.push({trigger:"sse",sseEvent:an.substr(4)});else{var ln={trigger:an},un=et(ze,rn,"event");for(un&&(ln.eventFilter=un);rn.length>0&&rn[0]!==",";){y(rn,Je);var dn=rn.shift();if(dn==="changed")ln.changed=!0;else if(dn==="once")ln.once=!0;else if(dn==="consume")ln.consume=!0;else if(dn==="delay"&&rn[0]===":")rn.shift(),ln.delay=d(y(rn,x));else if(dn==="from"&&rn[0]===":"){if(rn.shift(),Ze.test(rn[0]))var fn=tt(rn);else{var fn=y(rn,x);if(fn==="closest"||fn==="find"||fn==="next"||fn==="previous"){rn.shift();var pn=tt(rn);pn.length>0&&(fn+=" "+pn)}}ln.from=fn}else dn==="target"&&rn[0]===":"?(rn.shift(),ln.target=tt(rn)):dn==="throttle"&&rn[0]===":"?(rn.shift(),ln.throttle=d(y(rn,x))):dn==="queue"&&rn[0]===":"?(rn.shift(),ln.queue=y(rn,x)):dn==="root"&&rn[0]===":"?(rn.shift(),ln[dn]=tt(rn)):dn==="threshold"&&rn[0]===":"?(rn.shift(),ln[dn]=y(rn,x)):fe(ze,"htmx:syntax:error",{token:rn.shift()})}nn.push(ln)}rn.length===sn&&fe(ze,"htmx:syntax:error",{token:rn.shift()}),y(rn,Je)}while(rn[0]===","&&rn.shift());return tn&&(tn[en]=nn),nn}function it(ze){var en=te(ze,"hx-trigger"),tn=[];if(en){var nn=Q.config.triggerSpecsCache;tn=nn&&nn[en]||nt(ze,en,nn)}return tn.length>0?tn:h(ze,"form")?[{trigger:"submit"}]:h(ze,'input[type="button"], input[type="submit"]')?[{trigger:"click"}]:h(ze,rt)?[{trigger:"change"}]:[{trigger:"click"}]}function at(ze){ae(ze).cancelled=!0}function ot(ze,en,tn){var nn=ae(ze);nn.timeout=setTimeout(function(){se(ze)&&nn.cancelled!==!0&&(ct(tn,ze,Wt("hx:poll:trigger",{triggerSpec:tn,target:ze}))||en(ze),ot(ze,en,tn))},tn.pollInterval)}function st(ze){return location.hostname===ze.hostname&&ee(ze,"href")&&ee(ze,"href").indexOf("#")!==0}function lt(ze,en,tn){if(ze.tagName==="A"&&st(ze)&&(ze.target===""||ze.target==="_self")||ze.tagName==="FORM"){en.boosted=!0;var nn,rn;if(ze.tagName==="A")nn="get",rn=ee(ze,"href");else{var sn=ee(ze,"method");nn=sn?sn.toLowerCase():"get",rn=ee(ze,"action")}tn.forEach(function(an){ht(ze,function(cn,un){if(v(cn,Q.config.disableSelector)){m(cn);return}he(nn,rn,cn,un)},en,an,!0)})}}function ut(ze,en){return!!((ze.type==="submit"||ze.type==="click")&&(en.tagName==="FORM"||h(en,'input[type="submit"], button')&&v(en,"form")!==null||en.tagName==="A"&&en.href&&(en.getAttribute("href")==="#"||en.getAttribute("href").indexOf("#")!==0)))}function ft(ze,en){return ae(ze).boosted&&ze.tagName==="A"&&en.type==="click"&&(en.ctrlKey||en.metaKey)}function ct(ze,en,tn){var nn=ze.eventFilter;if(nn)try{return nn.call(en,tn)!==!0}catch(rn){return fe(re().body,"htmx:eventFilter:error",{error:rn,source:nn.source}),!0}return!1}function ht(ze,en,tn,nn,rn){var sn=ae(ze),an;nn.from?an=Z(ze,nn.from):an=[ze],nn.changed&&an.forEach(function(cn){var un=ae(cn);un.lastValue=cn.value}),oe(an,function(cn){var un=function(ln){if(!se(ze)){cn.removeEventListener(nn.trigger,un);return}if(!ft(ze,ln)&&((rn||ut(ln,ze))&&ln.preventDefault(),!ct(nn,ze,ln))){var dn=ae(ln);if(dn.triggerSpec=nn,dn.handledFor==null&&(dn.handledFor=[]),dn.handledFor.indexOf(ze)<0){if(dn.handledFor.push(ze),nn.consume&&ln.stopPropagation(),nn.target&&ln.target&&!h(ln.target,nn.target))return;if(nn.once){if(sn.triggeredOnce)return;sn.triggeredOnce=!0}if(nn.changed){var fn=ae(cn);if(fn.lastValue===cn.value)return;fn.lastValue=cn.value}if(sn.delayed&&clearTimeout(sn.delayed),sn.throttle)return;nn.throttle>0?sn.throttle||(en(ze,ln),sn.throttle=setTimeout(function(){sn.throttle=null},nn.throttle)):nn.delay>0?sn.delayed=setTimeout(function(){en(ze,ln)},nn.delay):(ce(ze,"htmx:trigger"),en(ze,ln))}}};tn.listenerInfos==null&&(tn.listenerInfos=[]),tn.listenerInfos.push({trigger:nn.trigger,listener:un,on:cn}),cn.addEventListener(nn.trigger,un)})}var vt=!1,dt=null;function gt(){dt||(dt=function(){vt=!0},window.addEventListener("scroll",dt),setInterval(function(){vt&&(vt=!1,oe(re().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(ze){pt(ze)}))},200))}function pt(ze){if(!o(ze,"data-hx-revealed")&&X(ze)){ze.setAttribute("data-hx-revealed","true");var en=ae(ze);en.initHash?ce(ze,"revealed"):ze.addEventListener("htmx:afterProcessNode",function(tn){ce(ze,"revealed")},{once:!0})}}function mt(ze,en,tn){for(var nn=D(tn),rn=0;rn<nn.length;rn++){var sn=nn[rn].split(/:(.+)/);sn[0]==="connect"&&xt(ze,sn[1],0),sn[0]==="send"&&bt(ze)}}function xt(ze,en,tn){if(se(ze)){if(en.indexOf("/")==0){var nn=location.hostname+(location.port?":"+location.port:"");location.protocol=="https:"?en="wss://"+nn+en:location.protocol=="http:"&&(en="ws://"+nn+en)}var rn=Q.createWebSocket(en);rn.onerror=function(sn){fe(ze,"htmx:wsError",{error:sn,socket:rn}),yt(ze)},rn.onclose=function(sn){if([1006,1012,1013].indexOf(sn.code)>=0){var an=wt(tn);setTimeout(function(){xt(ze,en,tn+1)},an)}},rn.onopen=function(sn){tn=0},ae(ze).webSocket=rn,rn.addEventListener("message",function(sn){if(!yt(ze)){var an=sn.data;R(ze,function(pn){an=pn.transformResponse(an,null,ze)});for(var cn=T(ze),un=l(an),ln=M(un.children),dn=0;dn<ln.length;dn++){var fn=ln[dn];Ee(te(fn,"hx-swap-oob")||"true",fn,cn)}nr(cn.tasks)}})}}function yt(ze){if(!se(ze))return ae(ze).webSocket.close(),!0}function bt(ze){var en=c(ze,function(tn){return ae(tn).webSocket!=null});en?ze.addEventListener(it(ze)[0].trigger,function(tn){var nn=ae(en).webSocket,rn=xr(ze,en),sn=dr(ze,"post"),an=sn.errors,cn=sn.values,un=Hr(ze),ln=le(cn,un),dn=yr(ln,ze);if(dn.HEADERS=rn,an&&an.length>0){ce(ze,"htmx:validation:halted",an);return}nn.send(JSON.stringify(dn)),ut(tn,ze)&&tn.preventDefault()}):fe(ze,"htmx:noWebSocketSourceError")}function wt(ze){var en=Q.config.wsReconnectDelay;if(typeof en=="function")return en(ze);if(en==="full-jitter"){var tn=Math.min(ze,6),nn=1e3*Math.pow(2,tn);return nn*Math.random()}b('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function St(ze,en,tn){for(var nn=D(tn),rn=0;rn<nn.length;rn++){var sn=nn[rn].split(/:(.+)/);sn[0]==="connect"&&Et(ze,sn[1]),sn[0]==="swap"&&Ct(ze,sn[1])}}function Et(ze,en){var tn=Q.createEventSource(en);tn.onerror=function(nn){fe(ze,"htmx:sseError",{error:nn,source:tn}),Tt(ze)},ae(ze).sseEventSource=tn}function Ct(ze,en){var tn=c(ze,Ot);if(tn){var nn=ae(tn).sseEventSource,rn=function(sn){if(!Tt(tn)){if(!se(ze)){nn.removeEventListener(en,rn);return}var an=sn.data;R(ze,function(dn){an=dn.transformResponse(an,null,ze)});var cn=wr(ze),un=ye(ze),ln=T(ze);je(cn.swapStyle,un,ze,an,ln),nr(ln.tasks),ce(ze,"htmx:sseMessage",sn)}};ae(ze).sseListener=rn,nn.addEventListener(en,rn)}else fe(ze,"htmx:noSSESourceError")}function Rt(ze,en,tn){var nn=c(ze,Ot);if(nn){var rn=ae(nn).sseEventSource,sn=function(){Tt(nn)||(se(ze)?en(ze):rn.removeEventListener(tn,sn))};ae(ze).sseListener=sn,rn.addEventListener(tn,sn)}else fe(ze,"htmx:noSSESourceError")}function Tt(ze){if(!se(ze))return ae(ze).sseEventSource.close(),!0}function Ot(ze){return ae(ze).sseEventSource!=null}function qt(ze,en,tn,nn){var rn=function(){tn.loaded||(tn.loaded=!0,en(ze))};nn>0?setTimeout(rn,nn):rn()}function Ht(ze,en,tn){var nn=!1;return oe(w,function(rn){if(o(ze,"hx-"+rn)){var sn=te(ze,"hx-"+rn);nn=!0,en.path=sn,en.verb=rn,tn.forEach(function(an){Lt(ze,an,en,function(cn,un){if(v(cn,Q.config.disableSelector)){m(cn);return}he(rn,sn,cn,un)})})}}),nn}function Lt(ze,en,tn,nn){if(en.sseEvent)Rt(ze,nn,en.sseEvent);else if(en.trigger==="revealed")gt(),ht(ze,nn,tn,en),pt(ze);else if(en.trigger==="intersect"){var rn={};en.root&&(rn.root=ue(ze,en.root)),en.threshold&&(rn.threshold=parseFloat(en.threshold));var sn=new IntersectionObserver(function(an){for(var cn=0;cn<an.length;cn++){var un=an[cn];if(un.isIntersecting){ce(ze,"intersect");break}}},rn);sn.observe(ze),ht(ze,nn,tn,en)}else en.trigger==="load"?ct(en,ze,Wt("load",{elt:ze}))||qt(ze,nn,tn,en.delay):en.pollInterval>0?(tn.polling=!0,ot(ze,nn,en)):ht(ze,nn,tn,en)}function At(ze){if(!ze.htmxExecuted&&Q.config.allowScriptTags&&(ze.type==="text/javascript"||ze.type==="module"||ze.type==="")){var en=re().createElement("script");oe(ze.attributes,function(nn){en.setAttribute(nn.name,nn.value)}),en.textContent=ze.textContent,en.async=!1,Q.config.inlineScriptNonce&&(en.nonce=Q.config.inlineScriptNonce);var tn=ze.parentElement;try{tn.insertBefore(en,ze)}catch(nn){b(nn)}finally{ze.parentElement&&ze.parentElement.removeChild(ze)}}}function Nt(ze){h(ze,"script")&&At(ze),oe(f(ze,"script"),function(en){At(en)})}function It(ze){for(var en=ze.attributes,tn=0;tn<en.length;tn++){var nn=en[tn].name;if(g(nn,"hx-on:")||g(nn,"data-hx-on:")||g(nn,"hx-on-")||g(nn,"data-hx-on-"))return!0}return!1}function kt(ze){var en=null,tn=[];if(It(ze)&&tn.push(ze),document.evaluate)for(var nn=document.evaluate('.//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") or starts-with(name(), "hx-on-") or starts-with(name(), "data-hx-on-") ]]',ze);en=nn.iterateNext();)tn.push(en);else for(var rn=ze.getElementsByTagName("*"),sn=0;sn<rn.length;sn++)It(rn[sn])&&tn.push(rn[sn]);return tn}function Pt(ze){if(ze.querySelectorAll){var en=", [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost]",tn=ze.querySelectorAll(i+en+", form, [type='submit'], [hx-sse], [data-hx-sse], [hx-ws], [data-hx-ws], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger], [hx-on], [data-hx-on]");return tn}else return[]}function Mt(ze){var en=v(ze.target,"button, input[type='submit']"),tn=Dt(ze);tn&&(tn.lastButtonClicked=en)}function Xt(ze){var en=Dt(ze);en&&(en.lastButtonClicked=null)}function Dt(ze){var en=v(ze.target,"button, input[type='submit']");if(en){var tn=p("#"+ee(en,"form"))||v(en,"form");if(tn)return ae(tn)}}function Ut(ze){ze.addEventListener("click",Mt),ze.addEventListener("focusin",Mt),ze.addEventListener("focusout",Xt)}function Ft(ze){for(var en=Ye(ze),tn=0,nn=0;nn<en.length;nn++){const rn=en[nn];rn==="{"?tn++:rn==="}"&&tn--}return tn}function Bt(ze,en,tn){var nn=ae(ze);Array.isArray(nn.onHandlers)||(nn.onHandlers=[]);var rn,sn=function(an){return Tr(ze,function(){rn||(rn=new Function("event",tn)),rn.call(ze,an)})};ze.addEventListener(en,sn),nn.onHandlers.push({event:en,listener:sn})}function Vt(ze){var en=te(ze,"hx-on");if(en){for(var tn={},nn=en.split(`
`),rn=null,sn=0;nn.length>0;){var an=nn.shift(),cn=an.match(/^\s*([a-zA-Z:\-\.]+:)(.*)/);sn===0&&cn?(an.split(":"),rn=cn[1].slice(0,-1),tn[rn]=cn[2]):tn[rn]+=an,sn+=Ft(an)}for(var un in tn)Bt(ze,un,tn[un])}}function jt(ze){Ae(ze);for(var en=0;en<ze.attributes.length;en++){var tn=ze.attributes[en].name,nn=ze.attributes[en].value;if(g(tn,"hx-on")||g(tn,"data-hx-on")){var rn=tn.indexOf("-on")+3,sn=tn.slice(rn,rn+1);if(sn==="-"||sn===":"){var an=tn.slice(rn+1);g(an,":")?an="htmx"+an:g(an,"-")?an="htmx:"+an.slice(1):g(an,"htmx-")&&(an="htmx:"+an.slice(5)),Bt(ze,an,nn)}}}}function _t(ze){if(v(ze,Q.config.disableSelector)){m(ze);return}var en=ae(ze);if(en.initHash!==Le(ze)){Ne(ze),en.initHash=Le(ze),Vt(ze),ce(ze,"htmx:beforeProcessNode"),ze.value&&(en.lastValue=ze.value);var tn=it(ze),nn=Ht(ze,en,tn);nn||(ne(ze,"hx-boost")==="true"?lt(ze,en,tn):o(ze,"hx-trigger")&&tn.forEach(function(an){Lt(ze,an,en,function(){})})),(ze.tagName==="FORM"||ee(ze,"type")==="submit"&&o(ze,"form"))&&Ut(ze);var rn=te(ze,"hx-sse");rn&&St(ze,en,rn);var sn=te(ze,"hx-ws");sn&&mt(ze,en,sn),ce(ze,"htmx:afterProcessNode")}}function zt(ze){if(ze=p(ze),v(ze,Q.config.disableSelector)){m(ze);return}_t(ze),oe(Pt(ze),function(en){_t(en)}),oe(kt(ze),jt)}function $t(ze){return ze.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function Wt(ze,en){var tn;return window.CustomEvent&&typeof window.CustomEvent=="function"?tn=new CustomEvent(ze,{bubbles:!0,cancelable:!0,detail:en}):(tn=re().createEvent("CustomEvent"),tn.initCustomEvent(ze,!0,!0,en)),tn}function fe(ze,en,tn){ce(ze,en,le({error:en},tn))}function Gt(ze){return ze==="htmx:afterProcessNode"}function R(ze,en){oe(Br(ze),function(tn){try{en(tn)}catch(nn){b(nn)}})}function b(ze){console.error?console.error(ze):console.log&&console.log("ERROR: ",ze)}function ce(ze,en,tn){ze=p(ze),tn==null&&(tn={}),tn.elt=ze;var nn=Wt(en,tn);Q.logger&&!Gt(en)&&Q.logger(ze,en,tn),tn.error&&(b(tn.error),ce(ze,"htmx:error",{errorInfo:tn}));var rn=ze.dispatchEvent(nn),sn=$t(en);if(rn&&sn!==en){var an=Wt(sn,nn.detail);rn=rn&&ze.dispatchEvent(an)}return R(ze,function(cn){rn=rn&&cn.onEvent(en,nn)!==!1&&!nn.defaultPrevented}),rn}var Jt=location.pathname+location.search;function Zt(){var ze=re().querySelector("[hx-history-elt],[data-hx-history-elt]");return ze||re().body}function Kt(ze,en,tn,nn){if(U()){if(Q.config.historyCacheSize<=0){localStorage.removeItem("htmx-history-cache");return}ze=F(ze);for(var rn=E(localStorage.getItem("htmx-history-cache"))||[],sn=0;sn<rn.length;sn++)if(rn[sn].url===ze){rn.splice(sn,1);break}var an={url:ze,content:en,title:tn,scroll:nn};for(ce(re().body,"htmx:historyItemCreated",{item:an,cache:rn}),rn.push(an);rn.length>Q.config.historyCacheSize;)rn.shift();for(;rn.length>0;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(rn));break}catch(cn){fe(re().body,"htmx:historyCacheError",{cause:cn,cache:rn}),rn.shift()}}}function Yt(ze){if(!U())return null;ze=F(ze);for(var en=E(localStorage.getItem("htmx-history-cache"))||[],tn=0;tn<en.length;tn++)if(en[tn].url===ze)return en[tn];return null}function Qt(ze){var en=Q.config.requestClass,tn=ze.cloneNode(!0);return oe(f(tn,"."+en),function(nn){n(nn,en)}),tn.innerHTML}function er(){var ze=Zt(),en=Jt||location.pathname+location.search,tn;try{tn=re().querySelector('[hx-history="false" i],[data-hx-history="false" i]')}catch{tn=re().querySelector('[hx-history="false"],[data-hx-history="false"]')}tn||(ce(re().body,"htmx:beforeHistorySave",{path:en,historyElt:ze}),Kt(en,Qt(ze),re().title,window.scrollY)),Q.config.historyEnabled&&history.replaceState({htmx:!0},re().title,window.location.href)}function tr(ze){Q.config.getCacheBusterParam&&(ze=ze.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),(G(ze,"&")||G(ze,"?"))&&(ze=ze.slice(0,-1))),Q.config.historyEnabled&&history.pushState({htmx:!0},"",ze),Jt=ze}function rr(ze){Q.config.historyEnabled&&history.replaceState({htmx:!0},"",ze),Jt=ze}function nr(ze){oe(ze,function(en){en.call()})}function ir(ze){var en=new XMLHttpRequest,tn={path:ze,xhr:en};ce(re().body,"htmx:historyCacheMiss",tn),en.open("GET",ze,!0),en.setRequestHeader("HX-Request","true"),en.setRequestHeader("HX-History-Restore-Request","true"),en.setRequestHeader("HX-Current-URL",re().location.href),en.onload=function(){if(this.status>=200&&this.status<400){ce(re().body,"htmx:historyCacheMissLoad",tn);var nn=l(this.response);nn=nn.querySelector("[hx-history-elt],[data-hx-history-elt]")||nn;var rn=Zt(),sn=T(rn),an=Ve(this.response);if(an){var cn=C("title");cn?cn.innerHTML=an:window.document.title=an}Ue(rn,nn,sn),nr(sn.tasks),Jt=ze,ce(re().body,"htmx:historyRestore",{path:ze,cacheMiss:!0,serverResponse:this.response})}else fe(re().body,"htmx:historyCacheMissLoadError",tn)},en.send()}function ar(ze){er(),ze=ze||location.pathname+location.search;var en=Yt(ze);if(en){var tn=l(en.content),nn=Zt(),rn=T(nn);Ue(nn,tn,rn),nr(rn.tasks),document.title=en.title,setTimeout(function(){window.scrollTo(0,en.scroll)},0),Jt=ze,ce(re().body,"htmx:historyRestore",{path:ze,item:en})}else Q.config.refreshOnHistoryMiss?window.location.reload(!0):ir(ze)}function or(ze){var en=me(ze,"hx-indicator");return en==null&&(en=[ze]),oe(en,function(tn){var nn=ae(tn);nn.requestCount=(nn.requestCount||0)+1,tn.classList.add.call(tn.classList,Q.config.requestClass)}),en}function sr(ze){var en=me(ze,"hx-disabled-elt");return en==null&&(en=[]),oe(en,function(tn){var nn=ae(tn);nn.requestCount=(nn.requestCount||0)+1,tn.setAttribute("disabled","")}),en}function lr(ze,en){oe(ze,function(tn){var nn=ae(tn);nn.requestCount=(nn.requestCount||0)-1,nn.requestCount===0&&tn.classList.remove.call(tn.classList,Q.config.requestClass)}),oe(en,function(tn){var nn=ae(tn);nn.requestCount=(nn.requestCount||0)-1,nn.requestCount===0&&tn.removeAttribute("disabled")})}function ur(ze,en){for(var tn=0;tn<ze.length;tn++){var nn=ze[tn];if(nn.isSameNode(en))return!0}return!1}function fr(ze){return ze.name===""||ze.name==null||ze.disabled||v(ze,"fieldset[disabled]")||ze.type==="button"||ze.type==="submit"||ze.tagName==="image"||ze.tagName==="reset"||ze.tagName==="file"?!1:ze.type==="checkbox"||ze.type==="radio"?ze.checked:!0}function cr(ze,en,tn){if(ze!=null&&en!=null){var nn=tn[ze];nn===void 0?tn[ze]=en:Array.isArray(nn)?Array.isArray(en)?tn[ze]=nn.concat(en):nn.push(en):Array.isArray(en)?tn[ze]=[nn].concat(en):tn[ze]=[nn,en]}}function hr(ze,en,tn,nn,rn){if(!(nn==null||ur(ze,nn))){if(ze.push(nn),fr(nn)){var sn=ee(nn,"name"),an=nn.value;nn.multiple&&nn.tagName==="SELECT"&&(an=M(nn.querySelectorAll("option:checked")).map(function(un){return un.value})),nn.files&&(an=M(nn.files)),cr(sn,an,en),rn&&vr(nn,tn)}if(h(nn,"form")){var cn=nn.elements;oe(cn,function(un){hr(ze,en,tn,un,rn)})}}}function vr(ze,en){ze.willValidate&&(ce(ze,"htmx:validation:validate"),ze.checkValidity()||(en.push({elt:ze,message:ze.validationMessage,validity:ze.validity}),ce(ze,"htmx:validation:failed",{message:ze.validationMessage,validity:ze.validity})))}function dr(ze,en){var tn=[],nn={},rn={},sn=[],an=ae(ze);an.lastButtonClicked&&!se(an.lastButtonClicked)&&(an.lastButtonClicked=null);var cn=h(ze,"form")&&ze.noValidate!==!0||te(ze,"hx-validate")==="true";if(an.lastButtonClicked&&(cn=cn&&an.lastButtonClicked.formNoValidate!==!0),en!=="get"&&hr(tn,rn,sn,v(ze,"form"),cn),hr(tn,nn,sn,ze,cn),an.lastButtonClicked||ze.tagName==="BUTTON"||ze.tagName==="INPUT"&&ee(ze,"type")==="submit"){var un=an.lastButtonClicked||ze,ln=ee(un,"name");cr(ln,un.value,rn)}var dn=me(ze,"hx-include");return oe(dn,function(fn){hr(tn,nn,sn,fn,cn),h(fn,"form")||oe(fn.querySelectorAll(rt),function(pn){hr(tn,nn,sn,pn,cn)})}),nn=le(nn,rn),{errors:sn,values:nn}}function gr(ze,en,tn){ze!==""&&(ze+="&"),String(tn)==="[object Object]"&&(tn=JSON.stringify(tn));var nn=encodeURIComponent(tn);return ze+=encodeURIComponent(en)+"="+nn,ze}function pr(ze){var en="";for(var tn in ze)if(ze.hasOwnProperty(tn)){var nn=ze[tn];Array.isArray(nn)?oe(nn,function(rn){en=gr(en,tn,rn)}):en=gr(en,tn,nn)}return en}function mr(ze){var en=new FormData;for(var tn in ze)if(ze.hasOwnProperty(tn)){var nn=ze[tn];Array.isArray(nn)?oe(nn,function(rn){en.append(tn,rn)}):en.append(tn,nn)}return en}function xr(ze,en,tn){var nn={"HX-Request":"true","HX-Trigger":ee(ze,"id"),"HX-Trigger-Name":ee(ze,"name"),"HX-Target":te(en,"id"),"HX-Current-URL":re().location.href};return Rr(ze,"hx-headers",!1,nn),tn!==void 0&&(nn["HX-Prompt"]=tn),ae(ze).boosted&&(nn["HX-Boosted"]="true"),nn}function yr(ze,en){var tn=ne(en,"hx-params");if(tn){if(tn==="none")return{};if(tn==="*")return ze;if(tn.indexOf("not ")===0)return oe(tn.substr(4).split(","),function(rn){rn=rn.trim(),delete ze[rn]}),ze;var nn={};return oe(tn.split(","),function(rn){rn=rn.trim(),nn[rn]=ze[rn]}),nn}else return ze}function br(ze){return ee(ze,"href")&&ee(ze,"href").indexOf("#")>=0}function wr(ze,en){var tn=en||ne(ze,"hx-swap"),nn={swapStyle:ae(ze).boosted?"innerHTML":Q.config.defaultSwapStyle,swapDelay:Q.config.defaultSwapDelay,settleDelay:Q.config.defaultSettleDelay};if(Q.config.scrollIntoViewOnBoost&&ae(ze).boosted&&!br(ze)&&(nn.show="top"),tn){var rn=D(tn);if(rn.length>0)for(var sn=0;sn<rn.length;sn++){var an=rn[sn];if(an.indexOf("swap:")===0)nn.swapDelay=d(an.substr(5));else if(an.indexOf("settle:")===0)nn.settleDelay=d(an.substr(7));else if(an.indexOf("transition:")===0)nn.transition=an.substr(11)==="true";else if(an.indexOf("ignoreTitle:")===0)nn.ignoreTitle=an.substr(12)==="true";else if(an.indexOf("scroll:")===0){var cn=an.substr(7),un=cn.split(":"),ln=un.pop(),dn=un.length>0?un.join(":"):null;nn.scroll=ln,nn.scrollTarget=dn}else if(an.indexOf("show:")===0){var fn=an.substr(5),un=fn.split(":"),pn=un.pop(),dn=un.length>0?un.join(":"):null;nn.show=pn,nn.showTarget=dn}else if(an.indexOf("focus-scroll:")===0){var hn=an.substr(13);nn.focusScroll=hn=="true"}else sn==0?nn.swapStyle=an:b("Unknown modifier in hx-swap: "+an)}}return nn}function Sr(ze){return ne(ze,"hx-encoding")==="multipart/form-data"||h(ze,"form")&&ee(ze,"enctype")==="multipart/form-data"}function Er(ze,en,tn){var nn=null;return R(en,function(rn){nn==null&&(nn=rn.encodeParameters(ze,tn,en))}),nn??(Sr(en)?mr(tn):pr(tn))}function T(ze){return{tasks:[],elts:[ze]}}function Cr(ze,en){var tn=ze[0],nn=ze[ze.length-1];if(en.scroll){var rn=null;en.scrollTarget&&(rn=ue(tn,en.scrollTarget)),en.scroll==="top"&&(tn||rn)&&(rn=rn||tn,rn.scrollTop=0),en.scroll==="bottom"&&(nn||rn)&&(rn=rn||nn,rn.scrollTop=rn.scrollHeight)}if(en.show){var rn=null;if(en.showTarget){var sn=en.showTarget;en.showTarget==="window"&&(sn="body"),rn=ue(tn,sn)}en.show==="top"&&(tn||rn)&&(rn=rn||tn,rn.scrollIntoView({block:"start",behavior:Q.config.scrollBehavior})),en.show==="bottom"&&(nn||rn)&&(rn=rn||nn,rn.scrollIntoView({block:"end",behavior:Q.config.scrollBehavior}))}}function Rr(ze,en,tn,nn){if(nn==null&&(nn={}),ze==null)return nn;var rn=te(ze,en);if(rn){var sn=rn.trim(),an=tn;if(sn==="unset")return null;sn.indexOf("javascript:")===0?(sn=sn.substr(11),an=!0):sn.indexOf("js:")===0&&(sn=sn.substr(3),an=!0),sn.indexOf("{")!==0&&(sn="{"+sn+"}");var cn;an?cn=Tr(ze,function(){return Function("return ("+sn+")")()},{}):cn=E(sn);for(var un in cn)cn.hasOwnProperty(un)&&nn[un]==null&&(nn[un]=cn[un])}return Rr(u(ze),en,tn,nn)}function Tr(ze,en,tn){return Q.config.allowEval?en():(fe(ze,"htmx:evalDisallowedError"),tn)}function Or(ze,en){return Rr(ze,"hx-vars",!0,en)}function qr(ze,en){return Rr(ze,"hx-vals",!1,en)}function Hr(ze){return le(Or(ze),qr(ze))}function Lr(ze,en,tn){if(tn!==null)try{ze.setRequestHeader(en,tn)}catch{ze.setRequestHeader(en,encodeURIComponent(tn)),ze.setRequestHeader(en+"-URI-AutoEncoded","true")}}function Ar(ze){if(ze.responseURL&&typeof URL<"u")try{var en=new URL(ze.responseURL);return en.pathname+en.search}catch{fe(re().body,"htmx:badResponseUrl",{url:ze.responseURL})}}function O(ze,en){return en.test(ze.getAllResponseHeaders())}function Nr(ze,en,tn){return ze=ze.toLowerCase(),tn?tn instanceof Element||I(tn,"String")?he(ze,en,null,null,{targetOverride:p(tn),returnPromise:!0}):he(ze,en,p(tn.source),tn.event,{handler:tn.handler,headers:tn.headers,values:tn.values,targetOverride:p(tn.target),swapOverride:tn.swap,select:tn.select,returnPromise:!0}):he(ze,en,null,null,{returnPromise:!0})}function Ir(ze){for(var en=[];ze;)en.push(ze),ze=ze.parentElement;return en}function kr(ze,en,tn){var nn,rn;if(typeof URL=="function"){rn=new URL(en,document.location.href);var sn=document.location.origin;nn=sn===rn.origin}else rn=en,nn=g(en,document.location.origin);return Q.config.selfRequestsOnly&&!nn?!1:ce(ze,"htmx:validateUrl",le({url:rn,sameHost:nn},tn))}function he(ze,en,tn,nn,rn,sn){var an=null,cn=null;if(rn=rn??{},rn.returnPromise&&typeof Promise<"u")var un=new Promise(function(Gn,Yn){an=Gn,cn=Yn});tn==null&&(tn=re().body);var ln=rn.handler||Mr,dn=rn.select||null;if(!se(tn))return ie(an),un;var fn=rn.targetOverride||ye(tn);if(fn==null||fn==pe)return fe(tn,"htmx:targetError",{target:te(tn,"hx-target")}),ie(cn),un;var pn=ae(tn),hn=pn.lastButtonClicked;if(hn){var mn=ee(hn,"formaction");mn!=null&&(en=mn);var gn=ee(hn,"formmethod");gn!=null&&gn.toLowerCase()!=="dialog"&&(ze=gn)}var Sn=ne(tn,"hx-confirm");if(sn===void 0){var _n=function(Gn){return he(ze,en,tn,nn,rn,!!Gn)},En={target:fn,elt:tn,path:en,verb:ze,triggeringEvent:nn,etc:rn,issueRequest:_n,question:Sn};if(ce(tn,"htmx:confirm",En)===!1)return ie(an),un}var vn=tn,bn=ne(tn,"hx-sync"),Nn=null,Rn=!1;if(bn){var yn=bn.split(":"),wn=yn[0].trim();if(wn==="this"?vn=xe(tn,"hx-sync"):vn=ue(tn,wn),bn=(yn[1]||"drop").trim(),pn=ae(vn),bn==="drop"&&pn.xhr&&pn.abortable!==!0)return ie(an),un;if(bn==="abort"){if(pn.xhr)return ie(an),un;Rn=!0}else if(bn==="replace")ce(vn,"htmx:abort");else if(bn.indexOf("queue")===0){var Mn=bn.split(" ");Nn=(Mn[1]||"last").trim()}}if(pn.xhr)if(pn.abortable)ce(vn,"htmx:abort");else{if(Nn==null){if(nn){var Tn=ae(nn);Tn&&Tn.triggerSpec&&Tn.triggerSpec.queue&&(Nn=Tn.triggerSpec.queue)}Nn==null&&(Nn="last")}return pn.queuedRequests==null&&(pn.queuedRequests=[]),Nn==="first"&&pn.queuedRequests.length===0?pn.queuedRequests.push(function(){he(ze,en,tn,nn,rn)}):Nn==="all"?pn.queuedRequests.push(function(){he(ze,en,tn,nn,rn)}):Nn==="last"&&(pn.queuedRequests=[],pn.queuedRequests.push(function(){he(ze,en,tn,nn,rn)})),ie(an),un}var In=new XMLHttpRequest;pn.xhr=In,pn.abortable=Rn;var Cn=function(){if(pn.xhr=null,pn.abortable=!1,pn.queuedRequests!=null&&pn.queuedRequests.length>0){var Gn=pn.queuedRequests.shift();Gn()}},Pn=ne(tn,"hx-prompt");if(Pn){var Bn=prompt(Pn);if(Bn===null||!ce(tn,"htmx:prompt",{prompt:Bn,target:fn}))return ie(an),Cn(),un}if(Sn&&!sn&&!confirm(Sn))return ie(an),Cn(),un;var An=xr(tn,fn,Bn);ze!=="get"&&!Sr(tn)&&(An["Content-Type"]="application/x-www-form-urlencoded"),rn.headers&&(An=le(An,rn.headers));var Dn=dr(tn,ze),Hn=Dn.errors,xn=Dn.values;rn.values&&(xn=le(xn,rn.values));var Wn=Hr(tn),zn=le(xn,Wn),Xn=yr(zn,tn);Q.config.getCacheBusterParam&&ze==="get"&&(Xn["org.htmx.cache-buster"]=ee(fn,"id")||"true"),(en==null||en==="")&&(en=re().location.href);var Kn=Rr(tn,"hx-request"),Zn=ae(tn).boosted,Jn=Q.config.methodsThatUseUrlParams.indexOf(ze)>=0,Fn={boosted:Zn,useUrlParams:Jn,parameters:Xn,unfilteredParameters:zn,headers:An,target:fn,verb:ze,errors:Hn,withCredentials:rn.credentials||Kn.credentials||Q.config.withCredentials,timeout:rn.timeout||Kn.timeout||Q.config.timeout,path:en,triggeringEvent:nn};if(!ce(tn,"htmx:configRequest",Fn))return ie(an),Cn(),un;if(en=Fn.path,ze=Fn.verb,An=Fn.headers,Xn=Fn.parameters,Hn=Fn.errors,Jn=Fn.useUrlParams,Hn&&Hn.length>0)return ce(tn,"htmx:validation:halted",Fn),ie(an),Cn(),un;var Yr=en.split("#"),Jr=Yr[0],Un=Yr[1],qn=en;if(Jn){qn=Jr;var Qr=Object.keys(Xn).length!==0;Qr&&(qn.indexOf("?")<0?qn+="?":qn+="&",qn+=pr(Xn),Un&&(qn+="#"+Un))}if(!kr(tn,qn,Fn))return fe(tn,"htmx:invalidPath",Fn),ie(cn),un;if(In.open(ze.toUpperCase(),qn,!0),In.overrideMimeType("text/html"),In.withCredentials=Fn.withCredentials,In.timeout=Fn.timeout,!Kn.noHeaders){for(var Kr in An)if(An.hasOwnProperty(Kr)){var ei=An[Kr];Lr(In,Kr,ei)}}var $n={xhr:In,target:fn,requestConfig:Fn,etc:rn,boosted:Zn,select:dn,pathInfo:{requestPath:en,finalRequestPath:qn,anchor:Un}};if(In.onload=function(){try{var Gn=Ir(tn);if($n.pathInfo.responsePath=Ar(In),ln(tn,$n),lr(Vn,Wr),ce(tn,"htmx:afterRequest",$n),ce(tn,"htmx:afterOnLoad",$n),!se(tn)){for(var Yn=null;Gn.length>0&&Yn==null;){var On=Gn.shift();se(On)&&(Yn=On)}Yn&&(ce(Yn,"htmx:afterRequest",$n),ce(Yn,"htmx:afterOnLoad",$n))}ie(an),Cn()}catch(jn){throw fe(tn,"htmx:onLoadError",le({error:jn},$n)),jn}},In.onerror=function(){lr(Vn,Wr),fe(tn,"htmx:afterRequest",$n),fe(tn,"htmx:sendError",$n),ie(cn),Cn()},In.onabort=function(){lr(Vn,Wr),fe(tn,"htmx:afterRequest",$n),fe(tn,"htmx:sendAbort",$n),ie(cn),Cn()},In.ontimeout=function(){lr(Vn,Wr),fe(tn,"htmx:afterRequest",$n),fe(tn,"htmx:timeout",$n),ie(cn),Cn()},!ce(tn,"htmx:beforeRequest",$n))return ie(an),Cn(),un;var Vn=or(tn),Wr=sr(tn);oe(["loadstart","loadend","progress","abort"],function(Gn){oe([In,In.upload],function(Yn){Yn.addEventListener(Gn,function(On){ce(tn,"htmx:xhr:"+Gn,{lengthComputable:On.lengthComputable,loaded:On.loaded,total:On.total})})})}),ce(tn,"htmx:beforeSend",$n);var Zr=Jn?null:Er(In,tn,Xn);return In.send(Zr),un}function Pr(ze,en){var tn=en.xhr,nn=null,rn=null;if(O(tn,/HX-Push:/i)?(nn=tn.getResponseHeader("HX-Push"),rn="push"):O(tn,/HX-Push-Url:/i)?(nn=tn.getResponseHeader("HX-Push-Url"),rn="push"):O(tn,/HX-Replace-Url:/i)&&(nn=tn.getResponseHeader("HX-Replace-Url"),rn="replace"),nn)return nn==="false"?{}:{type:rn,path:nn};var sn=en.pathInfo.finalRequestPath,an=en.pathInfo.responsePath,cn=ne(ze,"hx-push-url"),un=ne(ze,"hx-replace-url"),ln=ae(ze).boosted,dn=null,fn=null;return cn?(dn="push",fn=cn):un?(dn="replace",fn=un):ln&&(dn="push",fn=an||sn),fn?fn==="false"?{}:(fn==="true"&&(fn=an||sn),en.pathInfo.anchor&&fn.indexOf("#")===-1&&(fn=fn+"#"+en.pathInfo.anchor),{type:dn,path:fn}):{}}function Mr(ze,en){var tn=en.xhr,nn=en.target,rn=en.etc;en.requestConfig;var sn=en.select;if(ce(ze,"htmx:beforeOnLoad",en)){if(O(tn,/HX-Trigger:/i)&&_e(tn,"HX-Trigger",ze),O(tn,/HX-Location:/i)){er();var an=tn.getResponseHeader("HX-Location"),cn;an.indexOf("{")===0&&(cn=E(an),an=cn.path,delete cn.path),Nr("GET",an,cn).then(function(){tr(an)});return}var un=O(tn,/HX-Refresh:/i)&&tn.getResponseHeader("HX-Refresh")==="true";if(O(tn,/HX-Redirect:/i)){location.href=tn.getResponseHeader("HX-Redirect"),un&&location.reload();return}if(un){location.reload();return}O(tn,/HX-Retarget:/i)&&(tn.getResponseHeader("HX-Retarget")==="this"?en.target=ze:en.target=ue(ze,tn.getResponseHeader("HX-Retarget")));var ln=Pr(ze,en),dn=tn.status>=200&&tn.status<400&&tn.status!==204,fn=tn.response,pn=tn.status>=400,hn=Q.config.ignoreTitle,mn=le({shouldSwap:dn,serverResponse:fn,isError:pn,ignoreTitle:hn},en);if(ce(nn,"htmx:beforeSwap",mn)){if(nn=mn.target,fn=mn.serverResponse,pn=mn.isError,hn=mn.ignoreTitle,en.target=nn,en.failed=pn,en.successful=!pn,mn.shouldSwap){tn.status===286&&at(ze),R(ze,function(yn){fn=yn.transformResponse(fn,tn,ze)}),ln.type&&er();var gn=rn.swapOverride;O(tn,/HX-Reswap:/i)&&(gn=tn.getResponseHeader("HX-Reswap"));var cn=wr(ze,gn);cn.hasOwnProperty("ignoreTitle")&&(hn=cn.ignoreTitle),nn.classList.add(Q.config.swappingClass);var Sn=null,_n=null,En=function(){try{var yn=document.activeElement,wn={};try{wn={elt:yn,start:yn?yn.selectionStart:null,end:yn?yn.selectionEnd:null}}catch{}var Mn;sn&&(Mn=sn),O(tn,/HX-Reselect:/i)&&(Mn=tn.getResponseHeader("HX-Reselect")),ln.type&&(ce(re().body,"htmx:beforeHistoryUpdate",le({history:ln},en)),ln.type==="push"?(tr(ln.path),ce(re().body,"htmx:pushedIntoHistory",{path:ln.path})):(rr(ln.path),ce(re().body,"htmx:replacedInHistory",{path:ln.path})));var Tn=T(nn);if(je(cn.swapStyle,nn,ze,fn,Tn,Mn),wn.elt&&!se(wn.elt)&&ee(wn.elt,"id")){var In=document.getElementById(ee(wn.elt,"id")),Cn={preventScroll:cn.focusScroll!==void 0?!cn.focusScroll:!Q.config.defaultFocusScroll};if(In){if(wn.start&&In.setSelectionRange)try{In.setSelectionRange(wn.start,wn.end)}catch{}In.focus(Cn)}}if(nn.classList.remove(Q.config.swappingClass),oe(Tn.elts,function(An){An.classList&&An.classList.add(Q.config.settlingClass),ce(An,"htmx:afterSwap",en)}),O(tn,/HX-Trigger-After-Swap:/i)){var Pn=ze;se(ze)||(Pn=re().body),_e(tn,"HX-Trigger-After-Swap",Pn)}var Bn=function(){if(oe(Tn.tasks,function(xn){xn.call()}),oe(Tn.elts,function(xn){xn.classList&&xn.classList.remove(Q.config.settlingClass),ce(xn,"htmx:afterSettle",en)}),en.pathInfo.anchor){var An=re().getElementById(en.pathInfo.anchor);An&&An.scrollIntoView({block:"start",behavior:"auto"})}if(Tn.title&&!hn){var Dn=C("title");Dn?Dn.innerHTML=Tn.title:window.document.title=Tn.title}if(Cr(Tn.elts,cn),O(tn,/HX-Trigger-After-Settle:/i)){var Hn=ze;se(ze)||(Hn=re().body),_e(tn,"HX-Trigger-After-Settle",Hn)}ie(Sn)};cn.settleDelay>0?setTimeout(Bn,cn.settleDelay):Bn()}catch(An){throw fe(ze,"htmx:swapError",en),ie(_n),An}},vn=Q.config.globalViewTransitions;if(cn.hasOwnProperty("transition")&&(vn=cn.transition),vn&&ce(ze,"htmx:beforeTransition",en)&&typeof Promise<"u"&&document.startViewTransition){var bn=new Promise(function(yn,wn){Sn=yn,_n=wn}),Nn=En;En=function(){document.startViewTransition(function(){return Nn(),bn})}}cn.swapDelay>0?setTimeout(En,cn.swapDelay):En()}pn&&fe(ze,"htmx:responseError",le({error:"Response Status Error Code "+tn.status+" from "+en.pathInfo.requestPath},en))}}}var Xr={};function Dr(){return{init:function(ze){return null},onEvent:function(ze,en){return!0},transformResponse:function(ze,en,tn){return ze},isInlineSwap:function(ze){return!1},handleSwap:function(ze,en,tn,nn){return!1},encodeParameters:function(ze,en,tn){return null}}}function Ur(ze,en){en.init&&en.init(r),Xr[ze]=le(Dr(),en)}function Fr(ze){delete Xr[ze]}function Br(ze,en,tn){if(ze==null)return en;en==null&&(en=[]),tn==null&&(tn=[]);var nn=te(ze,"hx-ext");return nn&&oe(nn.split(","),function(rn){if(rn=rn.replace(/ /g,""),rn.slice(0,7)=="ignore:"){tn.push(rn.slice(7));return}if(tn.indexOf(rn)<0){var sn=Xr[rn];sn&&en.indexOf(sn)<0&&en.push(sn)}}),Br(u(ze),en,tn)}var Vr=!1;re().addEventListener("DOMContentLoaded",function(){Vr=!0});function jr(ze){Vr||re().readyState==="complete"?ze():re().addEventListener("DOMContentLoaded",ze)}function _r(){Q.config.includeIndicatorStyles!==!1&&re().head.insertAdjacentHTML("beforeend","<style>                      ."+Q.config.indicatorClass+"{opacity:0}                      ."+Q.config.requestClass+" ."+Q.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}                      ."+Q.config.requestClass+"."+Q.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}                    </style>")}function zr(){var ze=re().querySelector('meta[name="htmx-config"]');return ze?E(ze.content):null}function $r(){var ze=zr();ze&&(Q.config=le(Q.config,ze))}return jr(function(){$r(),_r();var ze=re().body;zt(ze);var en=re().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']");ze.addEventListener("htmx:abort",function(nn){var rn=nn.target,sn=ae(rn);sn&&sn.xhr&&sn.xhr.abort()});const tn=window.onpopstate?window.onpopstate.bind(window):null;window.onpopstate=function(nn){nn.state&&nn.state.htmx?(ar(),oe(en,function(rn){ce(rn,"htmx:restored",{document:re(),triggerEvent:ce})})):tn&&tn(nn)},setTimeout(function(){ce(ze,"htmx:load",{}),ze=null},0)}),Q}()})})(htmx_min);var htmx_minExports=htmx_min.exports;const objectToString=Object.prototype.toString;function isError(ze){switch(objectToString.call(ze)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(ze,Error)}}function isBuiltin(ze,en){return objectToString.call(ze)===`[object ${en}]`}function isErrorEvent$2(ze){return isBuiltin(ze,"ErrorEvent")}function isDOMError(ze){return isBuiltin(ze,"DOMError")}function isDOMException(ze){return isBuiltin(ze,"DOMException")}function isString(ze){return isBuiltin(ze,"String")}function isParameterizedString(ze){return typeof ze=="object"&&ze!==null&&"__sentry_template_string__"in ze&&"__sentry_template_values__"in ze}function isPrimitive(ze){return ze===null||isParameterizedString(ze)||typeof ze!="object"&&typeof ze!="function"}function isPlainObject(ze){return isBuiltin(ze,"Object")}function isEvent(ze){return typeof Event<"u"&&isInstanceOf(ze,Event)}function isElement$2(ze){return typeof Element<"u"&&isInstanceOf(ze,Element)}function isRegExp(ze){return isBuiltin(ze,"RegExp")}function isThenable(ze){return!!(ze&&ze.then&&typeof ze.then=="function")}function isSyntheticEvent(ze){return isPlainObject(ze)&&"nativeEvent"in ze&&"preventDefault"in ze&&"stopPropagation"in ze}function isNaN$1(ze){return typeof ze=="number"&&ze!==ze}function isInstanceOf(ze,en){try{return ze instanceof en}catch{return!1}}function isVueViewModel(ze){return!!(typeof ze=="object"&&ze!==null&&(ze.__isVue||ze._isVue))}function truncate(ze,en=0){return typeof ze!="string"||en===0||ze.length<=en?ze:`${ze.slice(0,en)}...`}function safeJoin(ze,en){if(!Array.isArray(ze))return"";const tn=[];for(let nn=0;nn<ze.length;nn++){const rn=ze[nn];try{isVueViewModel(rn)?tn.push("[VueViewModel]"):tn.push(String(rn))}catch{tn.push("[value cannot be serialized]")}}return tn.join(en)}function isMatchingPattern(ze,en,tn=!1){return isString(ze)?isRegExp(en)?en.test(ze):isString(en)?tn?ze===en:ze.includes(en):!1:!1}function stringMatchesSomePattern(ze,en=[],tn=!1){return en.some(nn=>isMatchingPattern(ze,nn,tn))}function applyAggregateErrorsToEvent(ze,en,tn=250,nn,rn,sn,an){if(!sn.exception||!sn.exception.values||!an||!isInstanceOf(an.originalException,Error))return;const cn=sn.exception.values.length>0?sn.exception.values[sn.exception.values.length-1]:void 0;cn&&(sn.exception.values=truncateAggregateExceptions(aggregateExceptionsFromError(ze,en,rn,an.originalException,nn,sn.exception.values,cn,0),tn))}function aggregateExceptionsFromError(ze,en,tn,nn,rn,sn,an,cn){if(sn.length>=tn+1)return sn;let un=[...sn];if(isInstanceOf(nn[rn],Error)){applyExceptionGroupFieldsForParentException(an,cn);const ln=ze(en,nn[rn]),dn=un.length;applyExceptionGroupFieldsForChildException(ln,rn,dn,cn),un=aggregateExceptionsFromError(ze,en,tn,nn[rn],rn,[ln,...un],ln,dn)}return Array.isArray(nn.errors)&&nn.errors.forEach((ln,dn)=>{if(isInstanceOf(ln,Error)){applyExceptionGroupFieldsForParentException(an,cn);const fn=ze(en,ln),pn=un.length;applyExceptionGroupFieldsForChildException(fn,`errors[${dn}]`,pn,cn),un=aggregateExceptionsFromError(ze,en,tn,ln,rn,[fn,...un],fn,pn)}}),un}function applyExceptionGroupFieldsForParentException(ze,en){ze.mechanism=ze.mechanism||{type:"generic",handled:!0},ze.mechanism={...ze.mechanism,...ze.type==="AggregateError"&&{is_exception_group:!0},exception_id:en}}function applyExceptionGroupFieldsForChildException(ze,en,tn,nn){ze.mechanism=ze.mechanism||{type:"generic",handled:!0},ze.mechanism={...ze.mechanism,type:"chained",source:en,exception_id:tn,parent_id:nn}}function truncateAggregateExceptions(ze,en){return ze.map(tn=>(tn.value&&(tn.value=truncate(tn.value,en)),tn))}function isGlobalObj(ze){return ze&&ze.Math==Math?ze:void 0}const GLOBAL_OBJ=typeof globalThis=="object"&&isGlobalObj(globalThis)||typeof window=="object"&&isGlobalObj(window)||typeof self=="object"&&isGlobalObj(self)||typeof global=="object"&&isGlobalObj(global)||function(){return this}()||{};function getGlobalObject(){return GLOBAL_OBJ}function getGlobalSingleton(ze,en,tn){const nn=tn||GLOBAL_OBJ,rn=nn.__SENTRY__=nn.__SENTRY__||{};return rn[ze]||(rn[ze]=en())}const WINDOW$8=getGlobalObject(),DEFAULT_MAX_STRING_LENGTH=80;function htmlTreeAsString(ze,en={}){if(!ze)return"<unknown>";try{let tn=ze;const nn=5,rn=[];let sn=0,an=0;const cn=" > ",un=cn.length;let ln;const dn=Array.isArray(en)?en:en.keyAttrs,fn=!Array.isArray(en)&&en.maxStringLength||DEFAULT_MAX_STRING_LENGTH;for(;tn&&sn++<nn&&(ln=_htmlElementAsString(tn,dn),!(ln==="html"||sn>1&&an+rn.length*un+ln.length>=fn));)rn.push(ln),an+=ln.length,tn=tn.parentNode;return rn.reverse().join(cn)}catch{return"<unknown>"}}function _htmlElementAsString(ze,en){const tn=ze,nn=[];let rn,sn,an,cn,un;if(!tn||!tn.tagName)return"";if(WINDOW$8.HTMLElement&&tn instanceof HTMLElement&&tn.dataset&&tn.dataset.sentryComponent)return tn.dataset.sentryComponent;nn.push(tn.tagName.toLowerCase());const ln=en&&en.length?en.filter(fn=>tn.getAttribute(fn)).map(fn=>[fn,tn.getAttribute(fn)]):null;if(ln&&ln.length)ln.forEach(fn=>{nn.push(`[${fn[0]}="${fn[1]}"]`)});else if(tn.id&&nn.push(`#${tn.id}`),rn=tn.className,rn&&isString(rn))for(sn=rn.split(/\s+/),un=0;un<sn.length;un++)nn.push(`.${sn[un]}`);const dn=["aria-label","type","name","title","alt"];for(un=0;un<dn.length;un++)an=dn[un],cn=tn.getAttribute(an),cn&&nn.push(`[${an}="${cn}"]`);return nn.join("")}function getLocationHref(){try{return WINDOW$8.document.location.href}catch{return""}}function getDomElement(ze){return WINDOW$8.document&&WINDOW$8.document.querySelector?WINDOW$8.document.querySelector(ze):null}function getComponentName(ze){if(!WINDOW$8.HTMLElement)return null;let en=ze;const tn=5;for(let nn=0;nn<tn;nn++){if(!en)return null;if(en instanceof HTMLElement&&en.dataset.sentryComponent)return en.dataset.sentryComponent;en=en.parentNode}return null}const DEBUG_BUILD$4=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,PREFIX="Sentry Logger ",CONSOLE_LEVELS=["debug","info","warn","error","log","assert","trace"],originalConsoleMethods={};function consoleSandbox(ze){if(!("console"in GLOBAL_OBJ))return ze();const en=GLOBAL_OBJ.console,tn={},nn=Object.keys(originalConsoleMethods);nn.forEach(rn=>{const sn=originalConsoleMethods[rn];tn[rn]=en[rn],en[rn]=sn});try{return ze()}finally{nn.forEach(rn=>{en[rn]=tn[rn]})}}function makeLogger(){let ze=!1;const en={enable:()=>{ze=!0},disable:()=>{ze=!1},isEnabled:()=>ze};return DEBUG_BUILD$4?CONSOLE_LEVELS.forEach(tn=>{en[tn]=(...nn)=>{ze&&consoleSandbox(()=>{GLOBAL_OBJ.console[tn](`${PREFIX}[${tn}]:`,...nn)})}}):CONSOLE_LEVELS.forEach(tn=>{en[tn]=()=>{}}),en}const logger=makeLogger(),DSN_REGEX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function isValidProtocol(ze){return ze==="http"||ze==="https"}function dsnToString(ze,en=!1){const{host:tn,path:nn,pass:rn,port:sn,projectId:an,protocol:cn,publicKey:un}=ze;return`${cn}://${un}${en&&rn?`:${rn}`:""}@${tn}${sn?`:${sn}`:""}/${nn&&`${nn}/`}${an}`}function dsnFromString(ze){const en=DSN_REGEX.exec(ze);if(!en){consoleSandbox(()=>{console.error(`Invalid Sentry Dsn: ${ze}`)});return}const[tn,nn,rn="",sn,an="",cn]=en.slice(1);let un="",ln=cn;const dn=ln.split("/");if(dn.length>1&&(un=dn.slice(0,-1).join("/"),ln=dn.pop()),ln){const fn=ln.match(/^\d+/);fn&&(ln=fn[0])}return dsnFromComponents({host:sn,pass:rn,path:un,projectId:ln,port:an,protocol:tn,publicKey:nn})}function dsnFromComponents(ze){return{protocol:ze.protocol,publicKey:ze.publicKey||"",pass:ze.pass||"",host:ze.host,port:ze.port||"",path:ze.path||"",projectId:ze.projectId}}function validateDsn(ze){if(!DEBUG_BUILD$4)return!0;const{port:en,projectId:tn,protocol:nn}=ze;return["protocol","publicKey","host","projectId"].find(an=>ze[an]?!1:(logger.error(`Invalid Sentry Dsn: ${an} missing`),!0))?!1:tn.match(/^\d+$/)?isValidProtocol(nn)?en&&isNaN(parseInt(en,10))?(logger.error(`Invalid Sentry Dsn: Invalid port ${en}`),!1):!0:(logger.error(`Invalid Sentry Dsn: Invalid protocol ${nn}`),!1):(logger.error(`Invalid Sentry Dsn: Invalid projectId ${tn}`),!1)}function makeDsn(ze){const en=typeof ze=="string"?dsnFromString(ze):dsnFromComponents(ze);if(!(!en||!validateDsn(en)))return en}class SentryError extends Error{constructor(en,tn="warn"){super(en),this.message=en,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=tn}}function fill(ze,en,tn){if(!(en in ze))return;const nn=ze[en],rn=tn(nn);typeof rn=="function"&&markFunctionWrapped(rn,nn),ze[en]=rn}function addNonEnumerableProperty(ze,en,tn){try{Object.defineProperty(ze,en,{value:tn,writable:!0,configurable:!0})}catch{DEBUG_BUILD$4&&logger.log(`Failed to add non-enumerable property "${en}" to object`,ze)}}function markFunctionWrapped(ze,en){try{const tn=en.prototype||{};ze.prototype=en.prototype=tn,addNonEnumerableProperty(ze,"__sentry_original__",en)}catch{}}function getOriginalFunction(ze){return ze.__sentry_original__}function urlEncode(ze){return Object.keys(ze).map(en=>`${encodeURIComponent(en)}=${encodeURIComponent(ze[en])}`).join("&")}function convertToPlainObject(ze){if(isError(ze))return{message:ze.message,name:ze.name,stack:ze.stack,...getOwnProperties(ze)};if(isEvent(ze)){const en={type:ze.type,target:serializeEventTarget(ze.target),currentTarget:serializeEventTarget(ze.currentTarget),...getOwnProperties(ze)};return typeof CustomEvent<"u"&&isInstanceOf(ze,CustomEvent)&&(en.detail=ze.detail),en}else return ze}function serializeEventTarget(ze){try{return isElement$2(ze)?htmlTreeAsString(ze):Object.prototype.toString.call(ze)}catch{return"<unknown>"}}function getOwnProperties(ze){if(typeof ze=="object"&&ze!==null){const en={};for(const tn in ze)Object.prototype.hasOwnProperty.call(ze,tn)&&(en[tn]=ze[tn]);return en}else return{}}function extractExceptionKeysForMessage(ze,en=40){const tn=Object.keys(convertToPlainObject(ze));if(tn.sort(),!tn.length)return"[object has no keys]";if(tn[0].length>=en)return truncate(tn[0],en);for(let nn=tn.length;nn>0;nn--){const rn=tn.slice(0,nn).join(", ");if(!(rn.length>en))return nn===tn.length?rn:truncate(rn,en)}return""}function dropUndefinedKeys(ze){return _dropUndefinedKeys(ze,new Map)}function _dropUndefinedKeys(ze,en){if(isPojo(ze)){const tn=en.get(ze);if(tn!==void 0)return tn;const nn={};en.set(ze,nn);for(const rn of Object.keys(ze))typeof ze[rn]<"u"&&(nn[rn]=_dropUndefinedKeys(ze[rn],en));return nn}if(Array.isArray(ze)){const tn=en.get(ze);if(tn!==void 0)return tn;const nn=[];return en.set(ze,nn),ze.forEach(rn=>{nn.push(_dropUndefinedKeys(rn,en))}),nn}return ze}function isPojo(ze){if(!isPlainObject(ze))return!1;try{const en=Object.getPrototypeOf(ze).constructor.name;return!en||en==="Object"}catch{return!0}}const STACKTRACE_FRAME_LIMIT=50,WEBPACK_ERROR_REGEXP=/\(error: (.*)\)/,STRIP_FRAME_REGEXP=/captureMessage|captureException/;function createStackParser(...ze){const en=ze.sort((tn,nn)=>tn[0]-nn[0]).map(tn=>tn[1]);return(tn,nn=0)=>{const rn=[],sn=tn.split(`
`);for(let an=nn;an<sn.length;an++){const cn=sn[an];if(cn.length>1024)continue;const un=WEBPACK_ERROR_REGEXP.test(cn)?cn.replace(WEBPACK_ERROR_REGEXP,"$1"):cn;if(!un.match(/\S*Error: /)){for(const ln of en){const dn=ln(un);if(dn){rn.push(dn);break}}if(rn.length>=STACKTRACE_FRAME_LIMIT)break}}return stripSentryFramesAndReverse(rn)}}function stackParserFromStackParserOptions(ze){return Array.isArray(ze)?createStackParser(...ze):ze}function stripSentryFramesAndReverse(ze){if(!ze.length)return[];const en=Array.from(ze);return/sentryWrapped/.test(en[en.length-1].function||"")&&en.pop(),en.reverse(),STRIP_FRAME_REGEXP.test(en[en.length-1].function||"")&&(en.pop(),STRIP_FRAME_REGEXP.test(en[en.length-1].function||"")&&en.pop()),en.slice(0,STACKTRACE_FRAME_LIMIT).map(tn=>({...tn,filename:tn.filename||en[en.length-1].filename,function:tn.function||"?"}))}const defaultFunctionName="<anonymous>";function getFunctionName(ze){try{return!ze||typeof ze!="function"?defaultFunctionName:ze.name||defaultFunctionName}catch{return defaultFunctionName}}const handlers$2={},instrumented$1={};function addHandler$1(ze,en){handlers$2[ze]=handlers$2[ze]||[],handlers$2[ze].push(en)}function maybeInstrument(ze,en){instrumented$1[ze]||(en(),instrumented$1[ze]=!0)}function triggerHandlers$1(ze,en){const tn=ze&&handlers$2[ze];if(tn)for(const nn of tn)try{nn(en)}catch(rn){DEBUG_BUILD$4&&logger.error(`Error while triggering instrumentation handler.
Type: ${ze}
Name: ${getFunctionName(nn)}
Error:`,rn)}}function addConsoleInstrumentationHandler(ze){const en="console";addHandler$1(en,ze),maybeInstrument(en,instrumentConsole)}function instrumentConsole(){"console"in GLOBAL_OBJ&&CONSOLE_LEVELS.forEach(function(ze){ze in GLOBAL_OBJ.console&&fill(GLOBAL_OBJ.console,ze,function(en){return originalConsoleMethods[ze]=en,function(...tn){triggerHandlers$1("console",{args:tn,level:ze});const rn=originalConsoleMethods[ze];rn&&rn.apply(GLOBAL_OBJ.console,tn)}})})}function uuid4(){const ze=GLOBAL_OBJ,en=ze.crypto||ze.msCrypto;let tn=()=>Math.random()*16;try{if(en&&en.randomUUID)return en.randomUUID().replace(/-/g,"");en&&en.getRandomValues&&(tn=()=>{const nn=new Uint8Array(1);return en.getRandomValues(nn),nn[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,nn=>(nn^(tn()&15)>>nn/4).toString(16))}function getFirstException(ze){return ze.exception&&ze.exception.values?ze.exception.values[0]:void 0}function getEventDescription(ze){const{message:en,event_id:tn}=ze;if(en)return en;const nn=getFirstException(ze);return nn?nn.type&&nn.value?`${nn.type}: ${nn.value}`:nn.type||nn.value||tn||"<unknown>":tn||"<unknown>"}function addExceptionTypeValue(ze,en,tn){const nn=ze.exception=ze.exception||{},rn=nn.values=nn.values||[],sn=rn[0]=rn[0]||{};sn.value||(sn.value=en||""),sn.type||(sn.type=tn||"Error")}function addExceptionMechanism(ze,en){const tn=getFirstException(ze);if(!tn)return;const nn={type:"generic",handled:!0},rn=tn.mechanism;if(tn.mechanism={...nn,...rn,...en},en&&"data"in en){const sn={...rn&&rn.data,...en.data};tn.mechanism.data=sn}}function checkOrSetAlreadyCaught(ze){if(ze&&ze.__sentry_captured__)return!0;try{addNonEnumerableProperty(ze,"__sentry_captured__",!0)}catch{}return!1}function arrayify(ze){return Array.isArray(ze)?ze:[ze]}const WINDOW$7=GLOBAL_OBJ,DEBOUNCE_DURATION=1e3;let debounceTimerID,lastCapturedEventType,lastCapturedEventTargetId;function addClickKeypressInstrumentationHandler(ze){const en="dom";addHandler$1(en,ze),maybeInstrument(en,instrumentDOM)}function instrumentDOM(){if(!WINDOW$7.document)return;const ze=triggerHandlers$1.bind(null,"dom"),en=makeDOMEventHandler(ze,!0);WINDOW$7.document.addEventListener("click",en,!1),WINDOW$7.document.addEventListener("keypress",en,!1),["EventTarget","Node"].forEach(tn=>{const nn=WINDOW$7[tn]&&WINDOW$7[tn].prototype;!nn||!nn.hasOwnProperty||!nn.hasOwnProperty("addEventListener")||(fill(nn,"addEventListener",function(rn){return function(sn,an,cn){if(sn==="click"||sn=="keypress")try{const un=this,ln=un.__sentry_instrumentation_handlers__=un.__sentry_instrumentation_handlers__||{},dn=ln[sn]=ln[sn]||{refCount:0};if(!dn.handler){const fn=makeDOMEventHandler(ze);dn.handler=fn,rn.call(this,sn,fn,cn)}dn.refCount++}catch{}return rn.call(this,sn,an,cn)}}),fill(nn,"removeEventListener",function(rn){return function(sn,an,cn){if(sn==="click"||sn=="keypress")try{const un=this,ln=un.__sentry_instrumentation_handlers__||{},dn=ln[sn];dn&&(dn.refCount--,dn.refCount<=0&&(rn.call(this,sn,dn.handler,cn),dn.handler=void 0,delete ln[sn]),Object.keys(ln).length===0&&delete un.__sentry_instrumentation_handlers__)}catch{}return rn.call(this,sn,an,cn)}}))})}function isSimilarToLastCapturedEvent(ze){if(ze.type!==lastCapturedEventType)return!1;try{if(!ze.target||ze.target._sentryId!==lastCapturedEventTargetId)return!1}catch{}return!0}function shouldSkipDOMEvent(ze,en){return ze!=="keypress"?!1:!en||!en.tagName?!0:!(en.tagName==="INPUT"||en.tagName==="TEXTAREA"||en.isContentEditable)}function makeDOMEventHandler(ze,en=!1){return tn=>{if(!tn||tn._sentryCaptured)return;const nn=getEventTarget$1(tn);if(shouldSkipDOMEvent(tn.type,nn))return;addNonEnumerableProperty(tn,"_sentryCaptured",!0),nn&&!nn._sentryId&&addNonEnumerableProperty(nn,"_sentryId",uuid4());const rn=tn.type==="keypress"?"input":tn.type;isSimilarToLastCapturedEvent(tn)||(ze({event:tn,name:rn,global:en}),lastCapturedEventType=tn.type,lastCapturedEventTargetId=nn?nn._sentryId:void 0),clearTimeout(debounceTimerID),debounceTimerID=WINDOW$7.setTimeout(()=>{lastCapturedEventTargetId=void 0,lastCapturedEventType=void 0},DEBOUNCE_DURATION)}}function getEventTarget$1(ze){try{return ze.target}catch{return null}}const WINDOW$6=getGlobalObject();function supportsFetch(){if(!("fetch"in WINDOW$6))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function isNativeFetch(ze){return ze&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(ze.toString())}function supportsNativeFetch(){if(typeof EdgeRuntime=="string")return!0;if(!supportsFetch())return!1;if(isNativeFetch(WINDOW$6.fetch))return!0;let ze=!1;const en=WINDOW$6.document;if(en&&typeof en.createElement=="function")try{const tn=en.createElement("iframe");tn.hidden=!0,en.head.appendChild(tn),tn.contentWindow&&tn.contentWindow.fetch&&(ze=isNativeFetch(tn.contentWindow.fetch)),en.head.removeChild(tn)}catch(tn){DEBUG_BUILD$4&&logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",tn)}return ze}function addFetchInstrumentationHandler(ze){const en="fetch";addHandler$1(en,ze),maybeInstrument(en,instrumentFetch)}function instrumentFetch(){supportsNativeFetch()&&fill(GLOBAL_OBJ,"fetch",function(ze){return function(...en){const{method:tn,url:nn}=parseFetchArgs(en),rn={args:en,fetchData:{method:tn,url:nn},startTimestamp:Date.now()};return triggerHandlers$1("fetch",{...rn}),ze.apply(GLOBAL_OBJ,en).then(sn=>{const an={...rn,endTimestamp:Date.now(),response:sn};return triggerHandlers$1("fetch",an),sn},sn=>{const an={...rn,endTimestamp:Date.now(),error:sn};throw triggerHandlers$1("fetch",an),sn})}})}function hasProp(ze,en){return!!ze&&typeof ze=="object"&&!!ze[en]}function getUrlFromResource(ze){return typeof ze=="string"?ze:ze?hasProp(ze,"url")?ze.url:ze.toString?ze.toString():"":""}function parseFetchArgs(ze){if(ze.length===0)return{method:"GET",url:""};if(ze.length===2){const[tn,nn]=ze;return{url:getUrlFromResource(tn),method:hasProp(nn,"method")?String(nn.method).toUpperCase():"GET"}}const en=ze[0];return{url:getUrlFromResource(en),method:hasProp(en,"method")?String(en.method).toUpperCase():"GET"}}let _oldOnErrorHandler=null;function addGlobalErrorInstrumentationHandler(ze){const en="error";addHandler$1(en,ze),maybeInstrument(en,instrumentError)}function instrumentError(){_oldOnErrorHandler=GLOBAL_OBJ.onerror,GLOBAL_OBJ.onerror=function(ze,en,tn,nn,rn){return triggerHandlers$1("error",{column:nn,error:rn,line:tn,msg:ze,url:en}),_oldOnErrorHandler&&!_oldOnErrorHandler.__SENTRY_LOADER__?_oldOnErrorHandler.apply(this,arguments):!1},GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}let _oldOnUnhandledRejectionHandler=null;function addGlobalUnhandledRejectionInstrumentationHandler(ze){const en="unhandledrejection";addHandler$1(en,ze),maybeInstrument(en,instrumentUnhandledRejection)}function instrumentUnhandledRejection(){_oldOnUnhandledRejectionHandler=GLOBAL_OBJ.onunhandledrejection,GLOBAL_OBJ.onunhandledrejection=function(ze){return triggerHandlers$1("unhandledrejection",ze),_oldOnUnhandledRejectionHandler&&!_oldOnUnhandledRejectionHandler.__SENTRY_LOADER__?_oldOnUnhandledRejectionHandler.apply(this,arguments):!0},GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const WINDOW$5=getGlobalObject();function supportsHistory(){const ze=WINDOW$5.chrome,en=ze&&ze.app&&ze.app.runtime,tn="history"in WINDOW$5&&!!WINDOW$5.history.pushState&&!!WINDOW$5.history.replaceState;return!en&&tn}const WINDOW$4=GLOBAL_OBJ;let lastHref;function addHistoryInstrumentationHandler(ze){const en="history";addHandler$1(en,ze),maybeInstrument(en,instrumentHistory)}function instrumentHistory(){if(!supportsHistory())return;const ze=WINDOW$4.onpopstate;WINDOW$4.onpopstate=function(...tn){const nn=WINDOW$4.location.href,rn=lastHref;if(lastHref=nn,triggerHandlers$1("history",{from:rn,to:nn}),ze)try{return ze.apply(this,tn)}catch{}};function en(tn){return function(...nn){const rn=nn.length>2?nn[2]:void 0;if(rn){const sn=lastHref,an=String(rn);lastHref=an,triggerHandlers$1("history",{from:sn,to:an})}return tn.apply(this,nn)}}fill(WINDOW$4.history,"pushState",en),fill(WINDOW$4.history,"replaceState",en)}const WINDOW$3=GLOBAL_OBJ,SENTRY_XHR_DATA_KEY="__sentry_xhr_v3__";function addXhrInstrumentationHandler(ze){const en="xhr";addHandler$1(en,ze),maybeInstrument(en,instrumentXHR)}function instrumentXHR(){if(!WINDOW$3.XMLHttpRequest)return;const ze=XMLHttpRequest.prototype;fill(ze,"open",function(en){return function(...tn){const nn=Date.now(),rn=isString(tn[0])?tn[0].toUpperCase():void 0,sn=parseUrl$1(tn[1]);if(!rn||!sn)return en.apply(this,tn);this[SENTRY_XHR_DATA_KEY]={method:rn,url:sn,request_headers:{}},rn==="POST"&&sn.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const an=()=>{const cn=this[SENTRY_XHR_DATA_KEY];if(cn&&this.readyState===4){try{cn.status_code=this.status}catch{}const un={args:[rn,sn],endTimestamp:Date.now(),startTimestamp:nn,xhr:this};triggerHandlers$1("xhr",un)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?fill(this,"onreadystatechange",function(cn){return function(...un){return an(),cn.apply(this,un)}}):this.addEventListener("readystatechange",an),fill(this,"setRequestHeader",function(cn){return function(...un){const[ln,dn]=un,fn=this[SENTRY_XHR_DATA_KEY];return fn&&isString(ln)&&isString(dn)&&(fn.request_headers[ln.toLowerCase()]=dn),cn.apply(this,un)}}),en.apply(this,tn)}}),fill(ze,"send",function(en){return function(...tn){const nn=this[SENTRY_XHR_DATA_KEY];if(!nn)return en.apply(this,tn);tn[0]!==void 0&&(nn.body=tn[0]);const rn={args:[nn.method,nn.url],startTimestamp:Date.now(),xhr:this};return triggerHandlers$1("xhr",rn),en.apply(this,tn)}})}function parseUrl$1(ze){if(isString(ze))return ze;try{return ze.toString()}catch{}}function isBrowserBundle(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function getSDKSource(){return"npm"}function isNodeEnv(){return!isBrowserBundle()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function isBrowser(){return typeof window<"u"&&(!isNodeEnv()||isElectronNodeRenderer())}function isElectronNodeRenderer(){return GLOBAL_OBJ.process!==void 0&&GLOBAL_OBJ.process.type==="renderer"}function memoBuilder(){const ze=typeof WeakSet=="function",en=ze?new WeakSet:[];function tn(rn){if(ze)return en.has(rn)?!0:(en.add(rn),!1);for(let sn=0;sn<en.length;sn++)if(en[sn]===rn)return!0;return en.push(rn),!1}function nn(rn){if(ze)en.delete(rn);else for(let sn=0;sn<en.length;sn++)if(en[sn]===rn){en.splice(sn,1);break}}return[tn,nn]}function normalize(ze,en=100,tn=1/0){try{return visit("",ze,en,tn)}catch(nn){return{ERROR:`**non-serializable** (${nn})`}}}function normalizeToSize(ze,en=3,tn=100*1024){const nn=normalize(ze,en);return jsonSize(nn)>tn?normalizeToSize(ze,en-1,tn):nn}function visit(ze,en,tn=1/0,nn=1/0,rn=memoBuilder()){const[sn,an]=rn;if(en==null||["number","boolean","string"].includes(typeof en)&&!isNaN$1(en))return en;const cn=stringifyValue(ze,en);if(!cn.startsWith("[object "))return cn;if(en.__sentry_skip_normalization__)return en;const un=typeof en.__sentry_override_normalization_depth__=="number"?en.__sentry_override_normalization_depth__:tn;if(un===0)return cn.replace("object ","");if(sn(en))return"[Circular ~]";const ln=en;if(ln&&typeof ln.toJSON=="function")try{const hn=ln.toJSON();return visit("",hn,un-1,nn,rn)}catch{}const dn=Array.isArray(en)?[]:{};let fn=0;const pn=convertToPlainObject(en);for(const hn in pn){if(!Object.prototype.hasOwnProperty.call(pn,hn))continue;if(fn>=nn){dn[hn]="[MaxProperties ~]";break}const mn=pn[hn];dn[hn]=visit(hn,mn,un-1,nn,rn),fn++}return an(en),dn}function stringifyValue(ze,en){try{if(ze==="domain"&&en&&typeof en=="object"&&en._events)return"[Domain]";if(ze==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&en===global)return"[Global]";if(typeof window<"u"&&en===window)return"[Window]";if(typeof document<"u"&&en===document)return"[Document]";if(isVueViewModel(en))return"[VueViewModel]";if(isSyntheticEvent(en))return"[SyntheticEvent]";if(typeof en=="number"&&en!==en)return"[NaN]";if(typeof en=="function")return`[Function: ${getFunctionName(en)}]`;if(typeof en=="symbol")return`[${String(en)}]`;if(typeof en=="bigint")return`[BigInt: ${String(en)}]`;const tn=getConstructorName(en);return/^HTML(\w*)Element$/.test(tn)?`[HTMLElement: ${tn}]`:`[object ${tn}]`}catch(tn){return`**non-serializable** (${tn})`}}function getConstructorName(ze){const en=Object.getPrototypeOf(ze);return en?en.constructor.name:"null prototype"}function utf8Length(ze){return~-encodeURI(ze).split(/%..|./).length}function jsonSize(ze){return utf8Length(JSON.stringify(ze))}var States;(function(ze){ze[ze.PENDING=0]="PENDING";const tn=1;ze[ze.RESOLVED=tn]="RESOLVED";const nn=2;ze[ze.REJECTED=nn]="REJECTED"})(States||(States={}));function resolvedSyncPromise(ze){return new SyncPromise(en=>{en(ze)})}function rejectedSyncPromise(ze){return new SyncPromise((en,tn)=>{tn(ze)})}class SyncPromise{constructor(en){SyncPromise.prototype.__init.call(this),SyncPromise.prototype.__init2.call(this),SyncPromise.prototype.__init3.call(this),SyncPromise.prototype.__init4.call(this),this._state=States.PENDING,this._handlers=[];try{en(this._resolve,this._reject)}catch(tn){this._reject(tn)}}then(en,tn){return new SyncPromise((nn,rn)=>{this._handlers.push([!1,sn=>{if(!en)nn(sn);else try{nn(en(sn))}catch(an){rn(an)}},sn=>{if(!tn)rn(sn);else try{nn(tn(sn))}catch(an){rn(an)}}]),this._executeHandlers()})}catch(en){return this.then(tn=>tn,en)}finally(en){return new SyncPromise((tn,nn)=>{let rn,sn;return this.then(an=>{sn=!1,rn=an,en&&en()},an=>{sn=!0,rn=an,en&&en()}).then(()=>{if(sn){nn(rn);return}tn(rn)})})}__init(){this._resolve=en=>{this._setResult(States.RESOLVED,en)}}__init2(){this._reject=en=>{this._setResult(States.REJECTED,en)}}__init3(){this._setResult=(en,tn)=>{if(this._state===States.PENDING){if(isThenable(tn)){tn.then(this._resolve,this._reject);return}this._state=en,this._value=tn,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===States.PENDING)return;const en=this._handlers.slice();this._handlers=[],en.forEach(tn=>{tn[0]||(this._state===States.RESOLVED&&tn[1](this._value),this._state===States.REJECTED&&tn[2](this._value),tn[0]=!0)})}}}function makePromiseBuffer(ze){const en=[];function tn(){return ze===void 0||en.length<ze}function nn(an){return en.splice(en.indexOf(an),1)[0]}function rn(an){if(!tn())return rejectedSyncPromise(new SentryError("Not adding Promise because buffer limit was reached."));const cn=an();return en.indexOf(cn)===-1&&en.push(cn),cn.then(()=>nn(cn)).then(null,()=>nn(cn).then(null,()=>{})),cn}function sn(an){return new SyncPromise((cn,un)=>{let ln=en.length;if(!ln)return cn(!0);const dn=setTimeout(()=>{an&&an>0&&cn(!1)},an);en.forEach(fn=>{resolvedSyncPromise(fn).then(()=>{--ln||(clearTimeout(dn),cn(!0))},un)})})}return{$:en,add:rn,drain:sn}}function parseUrl(ze){if(!ze)return{};const en=ze.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!en)return{};const tn=en[6]||"",nn=en[8]||"";return{host:en[4],path:en[5],protocol:en[2],search:tn,hash:nn,relative:en[5]+tn+nn}}const validSeverityLevels=["fatal","error","warning","log","info","debug"];function severityLevelFromString(ze){return ze==="warn"?"warning":validSeverityLevels.includes(ze)?ze:"log"}const ONE_SECOND_IN_MS=1e3;function dateTimestampInSeconds(){return Date.now()/ONE_SECOND_IN_MS}function createUnixTimestampInSecondsFunc(){const{performance:ze}=GLOBAL_OBJ;if(!ze||!ze.now)return dateTimestampInSeconds;const en=Date.now()-ze.now(),tn=ze.timeOrigin==null?en:ze.timeOrigin;return()=>(tn+ze.now())/ONE_SECOND_IN_MS}const timestampInSeconds=createUnixTimestampInSecondsFunc(),browserPerformanceTimeOrigin=(()=>{const{performance:ze}=GLOBAL_OBJ;if(!ze||!ze.now)return;const en=3600*1e3,tn=ze.now(),nn=Date.now(),rn=ze.timeOrigin?Math.abs(ze.timeOrigin+tn-nn):en,sn=rn<en,an=ze.timing&&ze.timing.navigationStart,un=typeof an=="number"?Math.abs(an+tn-nn):en,ln=un<en;return sn||ln?rn<=un?ze.timeOrigin:an:nn})(),BAGGAGE_HEADER_NAME="baggage",SENTRY_BAGGAGE_KEY_PREFIX="sentry-",SENTRY_BAGGAGE_KEY_PREFIX_REGEX=/^sentry-/,MAX_BAGGAGE_STRING_LENGTH=8192;function baggageHeaderToDynamicSamplingContext(ze){if(!isString(ze)&&!Array.isArray(ze))return;let en={};if(Array.isArray(ze))en=ze.reduce((nn,rn)=>{const sn=baggageHeaderToObject(rn);for(const an of Object.keys(sn))nn[an]=sn[an];return nn},{});else{if(!ze)return;en=baggageHeaderToObject(ze)}const tn=Object.entries(en).reduce((nn,[rn,sn])=>{if(rn.match(SENTRY_BAGGAGE_KEY_PREFIX_REGEX)){const an=rn.slice(SENTRY_BAGGAGE_KEY_PREFIX.length);nn[an]=sn}return nn},{});if(Object.keys(tn).length>0)return tn}function dynamicSamplingContextToSentryBaggageHeader(ze){if(!ze)return;const en=Object.entries(ze).reduce((tn,[nn,rn])=>(rn&&(tn[`${SENTRY_BAGGAGE_KEY_PREFIX}${nn}`]=rn),tn),{});return objectToBaggageHeader(en)}function baggageHeaderToObject(ze){return ze.split(",").map(en=>en.split("=").map(tn=>decodeURIComponent(tn.trim()))).reduce((en,[tn,nn])=>(en[tn]=nn,en),{})}function objectToBaggageHeader(ze){if(Object.keys(ze).length!==0)return Object.entries(ze).reduce((en,[tn,nn],rn)=>{const sn=`${encodeURIComponent(tn)}=${encodeURIComponent(nn)}`,an=rn===0?sn:`${en},${sn}`;return an.length>MAX_BAGGAGE_STRING_LENGTH?(DEBUG_BUILD$4&&logger.warn(`Not adding key: ${tn} with val: ${nn} to baggage header due to exceeding baggage size limits.`),en):an},"")}const TRACEPARENT_REGEXP=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function extractTraceparentData(ze){if(!ze)return;const en=ze.match(TRACEPARENT_REGEXP);if(!en)return;let tn;return en[3]==="1"?tn=!0:en[3]==="0"&&(tn=!1),{traceId:en[1],parentSampled:tn,parentSpanId:en[2]}}function propagationContextFromHeaders(ze,en){const tn=extractTraceparentData(ze),nn=baggageHeaderToDynamicSamplingContext(en),{traceId:rn,parentSpanId:sn,parentSampled:an}=tn||{};return tn?{traceId:rn||uuid4(),parentSpanId:sn||uuid4().substring(16),spanId:uuid4().substring(16),sampled:an,dsc:nn||{}}:{traceId:rn||uuid4(),spanId:uuid4().substring(16)}}function generateSentryTraceHeader(ze=uuid4(),en=uuid4().substring(16),tn){let nn="";return tn!==void 0&&(nn=tn?"-1":"-0"),`${ze}-${en}${nn}`}function createEnvelope(ze,en=[]){return[ze,en]}function addItemToEnvelope(ze,en){const[tn,nn]=ze;return[tn,[...nn,en]]}function forEachEnvelopeItem(ze,en){const tn=ze[1];for(const nn of tn){const rn=nn[0].type;if(en(nn,rn))return!0}return!1}function encodeUTF8(ze,en){return(en||new TextEncoder).encode(ze)}function serializeEnvelope(ze,en){const[tn,nn]=ze;let rn=JSON.stringify(tn);function sn(an){typeof rn=="string"?rn=typeof an=="string"?rn+an:[encodeUTF8(rn,en),an]:rn.push(typeof an=="string"?encodeUTF8(an,en):an)}for(const an of nn){const[cn,un]=an;if(sn(`
${JSON.stringify(cn)}
`),typeof un=="string"||un instanceof Uint8Array)sn(un);else{let ln;try{ln=JSON.stringify(un)}catch{ln=JSON.stringify(normalize(un))}sn(ln)}}return typeof rn=="string"?rn:concatBuffers(rn)}function concatBuffers(ze){const en=ze.reduce((rn,sn)=>rn+sn.length,0),tn=new Uint8Array(en);let nn=0;for(const rn of ze)tn.set(rn,nn),nn+=rn.length;return tn}function createAttachmentEnvelopeItem(ze,en){const tn=typeof ze.data=="string"?encodeUTF8(ze.data,en):ze.data;return[dropUndefinedKeys({type:"attachment",length:tn.length,filename:ze.filename,content_type:ze.contentType,attachment_type:ze.attachmentType}),tn]}const ITEM_TYPE_TO_DATA_CATEGORY_MAP={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"statsd"};function envelopeItemTypeToDataCategory(ze){return ITEM_TYPE_TO_DATA_CATEGORY_MAP[ze]}function getSdkMetadataForEnvelopeHeader(ze){if(!ze||!ze.sdk)return;const{name:en,version:tn}=ze.sdk;return{name:en,version:tn}}function createEventEnvelopeHeaders(ze,en,tn,nn){const rn=ze.sdkProcessingMetadata&&ze.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:ze.event_id,sent_at:new Date().toISOString(),...en&&{sdk:en},...!!tn&&nn&&{dsn:dsnToString(nn)},...rn&&{trace:dropUndefinedKeys({...rn})}}}function createClientReportEnvelope(ze,en,tn){const nn=[{type:"client_report"},{timestamp:tn||dateTimestampInSeconds(),discarded_events:ze}];return createEnvelope(en?{dsn:en}:{},[nn])}const DEFAULT_RETRY_AFTER=60*1e3;function parseRetryAfterHeader(ze,en=Date.now()){const tn=parseInt(`${ze}`,10);if(!isNaN(tn))return tn*1e3;const nn=Date.parse(`${ze}`);return isNaN(nn)?DEFAULT_RETRY_AFTER:nn-en}function disabledUntil(ze,en){return ze[en]||ze.all||0}function isRateLimited(ze,en,tn=Date.now()){return disabledUntil(ze,en)>tn}function updateRateLimits(ze,{statusCode:en,headers:tn},nn=Date.now()){const rn={...ze},sn=tn&&tn["x-sentry-rate-limits"],an=tn&&tn["retry-after"];if(sn)for(const cn of sn.trim().split(",")){const[un,ln]=cn.split(":",2),dn=parseInt(un,10),fn=(isNaN(dn)?60:dn)*1e3;if(!ln)rn.all=nn+fn;else for(const pn of ln.split(";"))rn[pn]=nn+fn}else an?rn.all=nn+parseRetryAfterHeader(an,nn):en===429&&(rn.all=nn+60*1e3);return rn}function _nullishCoalesce(ze,en){return ze??en()}function _optionalChain(ze){let en,tn=ze[0],nn=1;for(;nn<ze.length;){const rn=ze[nn],sn=ze[nn+1];if(nn+=2,(rn==="optionalAccess"||rn==="optionalCall")&&tn==null)return;rn==="access"||rn==="optionalAccess"?(en=tn,tn=sn(tn)):(rn==="call"||rn==="optionalCall")&&(tn=sn((...an)=>tn.call(en,...an)),en=void 0)}return tn}const DEBUG_BUILD$3=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,DEFAULT_ENVIRONMENT="production";function getGlobalEventProcessors(){return getGlobalSingleton("globalEventProcessors",()=>[])}function addGlobalEventProcessor(ze){getGlobalEventProcessors().push(ze)}function notifyEventProcessors(ze,en,tn,nn=0){return new SyncPromise((rn,sn)=>{const an=ze[nn];if(en===null||typeof an!="function")rn(en);else{const cn=an({...en},tn);DEBUG_BUILD$3&&an.id&&cn===null&&logger.log(`Event processor "${an.id}" dropped event`),isThenable(cn)?cn.then(un=>notifyEventProcessors(ze,un,tn,nn+1).then(rn)).then(null,sn):notifyEventProcessors(ze,cn,tn,nn+1).then(rn).then(null,sn)}})}function makeSession$1(ze){const en=timestampInSeconds(),tn={sid:uuid4(),init:!0,timestamp:en,started:en,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>sessionToJSON(tn)};return ze&&updateSession(tn,ze),tn}function updateSession(ze,en={}){if(en.user&&(!ze.ipAddress&&en.user.ip_address&&(ze.ipAddress=en.user.ip_address),!ze.did&&!en.did&&(ze.did=en.user.id||en.user.email||en.user.username)),ze.timestamp=en.timestamp||timestampInSeconds(),en.abnormal_mechanism&&(ze.abnormal_mechanism=en.abnormal_mechanism),en.ignoreDuration&&(ze.ignoreDuration=en.ignoreDuration),en.sid&&(ze.sid=en.sid.length===32?en.sid:uuid4()),en.init!==void 0&&(ze.init=en.init),!ze.did&&en.did&&(ze.did=`${en.did}`),typeof en.started=="number"&&(ze.started=en.started),ze.ignoreDuration)ze.duration=void 0;else if(typeof en.duration=="number")ze.duration=en.duration;else{const tn=ze.timestamp-ze.started;ze.duration=tn>=0?tn:0}en.release&&(ze.release=en.release),en.environment&&(ze.environment=en.environment),!ze.ipAddress&&en.ipAddress&&(ze.ipAddress=en.ipAddress),!ze.userAgent&&en.userAgent&&(ze.userAgent=en.userAgent),typeof en.errors=="number"&&(ze.errors=en.errors),en.status&&(ze.status=en.status)}function closeSession(ze,en){let tn={};en?tn={status:en}:ze.status==="ok"&&(tn={status:"exited"}),updateSession(ze,tn)}function sessionToJSON(ze){return dropUndefinedKeys({sid:`${ze.sid}`,init:ze.init,started:new Date(ze.started*1e3).toISOString(),timestamp:new Date(ze.timestamp*1e3).toISOString(),status:ze.status,errors:ze.errors,did:typeof ze.did=="number"||typeof ze.did=="string"?`${ze.did}`:void 0,duration:ze.duration,abnormal_mechanism:ze.abnormal_mechanism,attrs:{release:ze.release,environment:ze.environment,ip_address:ze.ipAddress,user_agent:ze.userAgent}})}const TRACE_FLAG_NONE=0,TRACE_FLAG_SAMPLED=1;function spanToTraceContext(ze){const{spanId:en,traceId:tn}=ze.spanContext(),{data:nn,op:rn,parent_span_id:sn,status:an,tags:cn,origin:un}=spanToJSON(ze);return dropUndefinedKeys({data:nn,op:rn,parent_span_id:sn,span_id:en,status:an,tags:cn,trace_id:tn,origin:un})}function spanToTraceHeader(ze){const{traceId:en,spanId:tn}=ze.spanContext(),nn=spanIsSampled(ze);return generateSentryTraceHeader(en,tn,nn)}function spanTimeInputToSeconds(ze){return typeof ze=="number"?ensureTimestampInSeconds(ze):Array.isArray(ze)?ze[0]+ze[1]/1e9:ze instanceof Date?ensureTimestampInSeconds(ze.getTime()):timestampInSeconds()}function ensureTimestampInSeconds(ze){return ze>9999999999?ze/1e3:ze}function spanToJSON(ze){return spanIsSpanClass(ze)?ze.getSpanJSON():typeof ze.toJSON=="function"?ze.toJSON():{}}function spanIsSpanClass(ze){return typeof ze.getSpanJSON=="function"}function spanIsSampled(ze){const{traceFlags:en}=ze.spanContext();return!!(en&TRACE_FLAG_SAMPLED)}function prepareEvent(ze,en,tn,nn,rn,sn){const{normalizeDepth:an=3,normalizeMaxBreadth:cn=1e3}=ze,un={...en,event_id:en.event_id||tn.event_id||uuid4(),timestamp:en.timestamp||dateTimestampInSeconds()},ln=tn.integrations||ze.integrations.map(Sn=>Sn.name);applyClientOptions(un,ze),applyIntegrationsMetadata(un,ln),en.type===void 0&&applyDebugIds(un,ze.stackParser);const dn=getFinalScope(nn,tn.captureContext);tn.mechanism&&addExceptionMechanism(un,tn.mechanism);const fn=rn&&rn.getEventProcessors?rn.getEventProcessors():[],pn=getGlobalScope().getScopeData();if(sn){const Sn=sn.getScopeData();mergeScopeData(pn,Sn)}if(dn){const Sn=dn.getScopeData();mergeScopeData(pn,Sn)}const hn=[...tn.attachments||[],...pn.attachments];hn.length&&(tn.attachments=hn),applyScopeDataToEvent(un,pn);const mn=[...fn,...getGlobalEventProcessors(),...pn.eventProcessors];return notifyEventProcessors(mn,un,tn).then(Sn=>(Sn&&applyDebugMeta(Sn),typeof an=="number"&&an>0?normalizeEvent(Sn,an,cn):Sn))}function applyClientOptions(ze,en){const{environment:tn,release:nn,dist:rn,maxValueLength:sn=250}=en;"environment"in ze||(ze.environment="environment"in en?tn:DEFAULT_ENVIRONMENT),ze.release===void 0&&nn!==void 0&&(ze.release=nn),ze.dist===void 0&&rn!==void 0&&(ze.dist=rn),ze.message&&(ze.message=truncate(ze.message,sn));const an=ze.exception&&ze.exception.values&&ze.exception.values[0];an&&an.value&&(an.value=truncate(an.value,sn));const cn=ze.request;cn&&cn.url&&(cn.url=truncate(cn.url,sn))}const debugIdStackParserCache=new WeakMap;function applyDebugIds(ze,en){const tn=GLOBAL_OBJ._sentryDebugIds;if(!tn)return;let nn;const rn=debugIdStackParserCache.get(en);rn?nn=rn:(nn=new Map,debugIdStackParserCache.set(en,nn));const sn=Object.keys(tn).reduce((an,cn)=>{let un;const ln=nn.get(cn);ln?un=ln:(un=en(cn),nn.set(cn,un));for(let dn=un.length-1;dn>=0;dn--){const fn=un[dn];if(fn.filename){an[fn.filename]=tn[cn];break}}return an},{});try{ze.exception.values.forEach(an=>{an.stacktrace.frames.forEach(cn=>{cn.filename&&(cn.debug_id=sn[cn.filename])})})}catch{}}function applyDebugMeta(ze){const en={};try{ze.exception.values.forEach(nn=>{nn.stacktrace.frames.forEach(rn=>{rn.debug_id&&(rn.abs_path?en[rn.abs_path]=rn.debug_id:rn.filename&&(en[rn.filename]=rn.debug_id),delete rn.debug_id)})})}catch{}if(Object.keys(en).length===0)return;ze.debug_meta=ze.debug_meta||{},ze.debug_meta.images=ze.debug_meta.images||[];const tn=ze.debug_meta.images;Object.keys(en).forEach(nn=>{tn.push({type:"sourcemap",code_file:nn,debug_id:en[nn]})})}function applyIntegrationsMetadata(ze,en){en.length>0&&(ze.sdk=ze.sdk||{},ze.sdk.integrations=[...ze.sdk.integrations||[],...en])}function normalizeEvent(ze,en,tn){if(!ze)return null;const nn={...ze,...ze.breadcrumbs&&{breadcrumbs:ze.breadcrumbs.map(rn=>({...rn,...rn.data&&{data:normalize(rn.data,en,tn)}}))},...ze.user&&{user:normalize(ze.user,en,tn)},...ze.contexts&&{contexts:normalize(ze.contexts,en,tn)},...ze.extra&&{extra:normalize(ze.extra,en,tn)}};return ze.contexts&&ze.contexts.trace&&nn.contexts&&(nn.contexts.trace=ze.contexts.trace,ze.contexts.trace.data&&(nn.contexts.trace.data=normalize(ze.contexts.trace.data,en,tn))),ze.spans&&(nn.spans=ze.spans.map(rn=>{const sn=spanToJSON(rn).data;return sn&&(rn.data=normalize(sn,en,tn)),rn})),nn}function getFinalScope(ze,en){if(!en)return ze;const tn=ze?ze.clone():new Scope;return tn.update(en),tn}function parseEventHintOrCaptureContext(ze){if(ze)return hintIsScopeOrFunction(ze)?{captureContext:ze}:hintIsScopeContext(ze)?{captureContext:ze}:ze}function hintIsScopeOrFunction(ze){return ze instanceof Scope||typeof ze=="function"}const captureContextKeys=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function hintIsScopeContext(ze){return Object.keys(ze).some(en=>captureContextKeys.includes(en))}function captureException(ze,en){return getCurrentHub().captureException(ze,parseEventHintOrCaptureContext(en))}function captureEvent(ze,en){return getCurrentHub().captureEvent(ze,en)}function addBreadcrumb(ze,en){getCurrentHub().addBreadcrumb(ze,en)}function setContext(ze,en){getCurrentHub().setContext(ze,en)}function setTag(ze,en){getCurrentHub().setTag(ze,en)}function withScope(...ze){const en=getCurrentHub();if(ze.length===2){const[tn,nn]=ze;return tn?en.withScope(()=>(en.getStackTop().scope=tn,nn(tn))):en.withScope(nn)}return en.withScope(ze[0])}function getClient(){return getCurrentHub().getClient()}function getCurrentScope(){return getCurrentHub().getScope()}function startSession(ze){const en=getClient(),tn=getIsolationScope(),nn=getCurrentScope(),{release:rn,environment:sn=DEFAULT_ENVIRONMENT}=en&&en.getOptions()||{},{userAgent:an}=GLOBAL_OBJ.navigator||{},cn=makeSession$1({release:rn,environment:sn,user:nn.getUser()||tn.getUser(),...an&&{userAgent:an},...ze}),un=tn.getSession();return un&&un.status==="ok"&&updateSession(un,{status:"exited"}),endSession(),tn.setSession(cn),nn.setSession(cn),cn}function endSession(){const ze=getIsolationScope(),en=getCurrentScope(),tn=en.getSession()||ze.getSession();tn&&closeSession(tn),_sendSessionUpdate(),ze.setSession(),en.setSession()}function _sendSessionUpdate(){const ze=getIsolationScope(),en=getCurrentScope(),tn=getClient(),nn=en.getSession()||ze.getSession();nn&&tn&&tn.captureSession&&tn.captureSession(nn)}function captureSession(ze=!1){if(ze){endSession();return}_sendSessionUpdate()}function getRootSpan(ze){return ze.transaction}function getDynamicSamplingContextFromClient(ze,en,tn){const nn=en.getOptions(),{publicKey:rn}=en.getDsn()||{},{segment:sn}=tn&&tn.getUser()||{},an=dropUndefinedKeys({environment:nn.environment||DEFAULT_ENVIRONMENT,release:nn.release,user_segment:sn,public_key:rn,trace_id:ze});return en.emit&&en.emit("createDsc",an),an}function getDynamicSamplingContextFromSpan(ze){const en=getClient();if(!en)return{};const tn=getDynamicSamplingContextFromClient(spanToJSON(ze).trace_id||"",en,getCurrentScope()),nn=getRootSpan(ze);if(!nn)return tn;const rn=nn&&nn._frozenDynamicSamplingContext;if(rn)return rn;const{sampleRate:sn,source:an}=nn.metadata;sn!=null&&(tn.sample_rate=`${sn}`);const cn=spanToJSON(nn);return an&&an!=="url"&&(tn.transaction=cn.description),tn.sampled=String(spanIsSampled(nn)),en.emit&&en.emit("createDsc",tn),tn}function applyScopeDataToEvent(ze,en){const{fingerprint:tn,span:nn,breadcrumbs:rn,sdkProcessingMetadata:sn}=en;applyDataToEvent(ze,en),nn&&applySpanToEvent(ze,nn),applyFingerprintToEvent(ze,tn),applyBreadcrumbsToEvent(ze,rn),applySdkMetadataToEvent(ze,sn)}function mergeScopeData(ze,en){const{extra:tn,tags:nn,user:rn,contexts:sn,level:an,sdkProcessingMetadata:cn,breadcrumbs:un,fingerprint:ln,eventProcessors:dn,attachments:fn,propagationContext:pn,transactionName:hn,span:mn}=en;mergeAndOverwriteScopeData(ze,"extra",tn),mergeAndOverwriteScopeData(ze,"tags",nn),mergeAndOverwriteScopeData(ze,"user",rn),mergeAndOverwriteScopeData(ze,"contexts",sn),mergeAndOverwriteScopeData(ze,"sdkProcessingMetadata",cn),an&&(ze.level=an),hn&&(ze.transactionName=hn),mn&&(ze.span=mn),un.length&&(ze.breadcrumbs=[...ze.breadcrumbs,...un]),ln.length&&(ze.fingerprint=[...ze.fingerprint,...ln]),dn.length&&(ze.eventProcessors=[...ze.eventProcessors,...dn]),fn.length&&(ze.attachments=[...ze.attachments,...fn]),ze.propagationContext={...ze.propagationContext,...pn}}function mergeAndOverwriteScopeData(ze,en,tn){if(tn&&Object.keys(tn).length){ze[en]={...ze[en]};for(const nn in tn)Object.prototype.hasOwnProperty.call(tn,nn)&&(ze[en][nn]=tn[nn])}}function applyDataToEvent(ze,en){const{extra:tn,tags:nn,user:rn,contexts:sn,level:an,transactionName:cn}=en,un=dropUndefinedKeys(tn);un&&Object.keys(un).length&&(ze.extra={...un,...ze.extra});const ln=dropUndefinedKeys(nn);ln&&Object.keys(ln).length&&(ze.tags={...ln,...ze.tags});const dn=dropUndefinedKeys(rn);dn&&Object.keys(dn).length&&(ze.user={...dn,...ze.user});const fn=dropUndefinedKeys(sn);fn&&Object.keys(fn).length&&(ze.contexts={...fn,...ze.contexts}),an&&(ze.level=an),cn&&(ze.transaction=cn)}function applyBreadcrumbsToEvent(ze,en){const tn=[...ze.breadcrumbs||[],...en];ze.breadcrumbs=tn.length?tn:void 0}function applySdkMetadataToEvent(ze,en){ze.sdkProcessingMetadata={...ze.sdkProcessingMetadata,...en}}function applySpanToEvent(ze,en){ze.contexts={trace:spanToTraceContext(en),...ze.contexts};const tn=getRootSpan(en);if(tn){ze.sdkProcessingMetadata={dynamicSamplingContext:getDynamicSamplingContextFromSpan(en),...ze.sdkProcessingMetadata};const nn=spanToJSON(tn).description;nn&&(ze.tags={transaction:nn,...ze.tags})}}function applyFingerprintToEvent(ze,en){ze.fingerprint=ze.fingerprint?arrayify(ze.fingerprint):[],en&&(ze.fingerprint=ze.fingerprint.concat(en)),ze.fingerprint&&!ze.fingerprint.length&&delete ze.fingerprint}const DEFAULT_MAX_BREADCRUMBS=100;let globalScope;class Scope{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=generatePropagationContext()}static clone(en){return en?en.clone():new Scope}clone(){const en=new Scope;return en._breadcrumbs=[...this._breadcrumbs],en._tags={...this._tags},en._extra={...this._extra},en._contexts={...this._contexts},en._user=this._user,en._level=this._level,en._span=this._span,en._session=this._session,en._transactionName=this._transactionName,en._fingerprint=this._fingerprint,en._eventProcessors=[...this._eventProcessors],en._requestSession=this._requestSession,en._attachments=[...this._attachments],en._sdkProcessingMetadata={...this._sdkProcessingMetadata},en._propagationContext={...this._propagationContext},en._client=this._client,en}setClient(en){this._client=en}getClient(){return this._client}addScopeListener(en){this._scopeListeners.push(en)}addEventProcessor(en){return this._eventProcessors.push(en),this}setUser(en){return this._user=en||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&updateSession(this._session,{user:en}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(en){return this._requestSession=en,this}setTags(en){return this._tags={...this._tags,...en},this._notifyScopeListeners(),this}setTag(en,tn){return this._tags={...this._tags,[en]:tn},this._notifyScopeListeners(),this}setExtras(en){return this._extra={...this._extra,...en},this._notifyScopeListeners(),this}setExtra(en,tn){return this._extra={...this._extra,[en]:tn},this._notifyScopeListeners(),this}setFingerprint(en){return this._fingerprint=en,this._notifyScopeListeners(),this}setLevel(en){return this._level=en,this._notifyScopeListeners(),this}setTransactionName(en){return this._transactionName=en,this._notifyScopeListeners(),this}setContext(en,tn){return tn===null?delete this._contexts[en]:this._contexts[en]=tn,this._notifyScopeListeners(),this}setSpan(en){return this._span=en,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const en=this._span;return en&&en.transaction}setSession(en){return en?this._session=en:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(en){if(!en)return this;const tn=typeof en=="function"?en(this):en;if(tn instanceof Scope){const nn=tn.getScopeData();this._tags={...this._tags,...nn.tags},this._extra={...this._extra,...nn.extra},this._contexts={...this._contexts,...nn.contexts},nn.user&&Object.keys(nn.user).length&&(this._user=nn.user),nn.level&&(this._level=nn.level),nn.fingerprint.length&&(this._fingerprint=nn.fingerprint),tn.getRequestSession()&&(this._requestSession=tn.getRequestSession()),nn.propagationContext&&(this._propagationContext=nn.propagationContext)}else if(isPlainObject(tn)){const nn=en;this._tags={...this._tags,...nn.tags},this._extra={...this._extra,...nn.extra},this._contexts={...this._contexts,...nn.contexts},nn.user&&(this._user=nn.user),nn.level&&(this._level=nn.level),nn.fingerprint&&(this._fingerprint=nn.fingerprint),nn.requestSession&&(this._requestSession=nn.requestSession),nn.propagationContext&&(this._propagationContext=nn.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=generatePropagationContext(),this}addBreadcrumb(en,tn){const nn=typeof tn=="number"?tn:DEFAULT_MAX_BREADCRUMBS;if(nn<=0)return this;const rn={timestamp:dateTimestampInSeconds(),...en},sn=this._breadcrumbs;return sn.push(rn),this._breadcrumbs=sn.length>nn?sn.slice(-nn):sn,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(en){return this._attachments.push(en),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:en,_attachments:tn,_contexts:nn,_tags:rn,_extra:sn,_user:an,_level:cn,_fingerprint:un,_eventProcessors:ln,_propagationContext:dn,_sdkProcessingMetadata:fn,_transactionName:pn,_span:hn}=this;return{breadcrumbs:en,attachments:tn,contexts:nn,tags:rn,extra:sn,user:an,level:cn,fingerprint:un||[],eventProcessors:ln,propagationContext:dn,sdkProcessingMetadata:fn,transactionName:pn,span:hn}}applyToEvent(en,tn={},nn=[]){applyScopeDataToEvent(en,this.getScopeData());const rn=[...nn,...getGlobalEventProcessors(),...this._eventProcessors];return notifyEventProcessors(rn,en,tn)}setSDKProcessingMetadata(en){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...en},this}setPropagationContext(en){return this._propagationContext=en,this}getPropagationContext(){return this._propagationContext}captureException(en,tn){const nn=tn&&tn.event_id?tn.event_id:uuid4();if(!this._client)return logger.warn("No client configured on scope - will not capture exception!"),nn;const rn=new Error("Sentry syntheticException");return this._client.captureException(en,{originalException:en,syntheticException:rn,...tn,event_id:nn},this),nn}captureMessage(en,tn,nn){const rn=nn&&nn.event_id?nn.event_id:uuid4();if(!this._client)return logger.warn("No client configured on scope - will not capture message!"),rn;const sn=new Error(en);return this._client.captureMessage(en,tn,{originalException:en,syntheticException:sn,...nn,event_id:rn},this),rn}captureEvent(en,tn){const nn=tn&&tn.event_id?tn.event_id:uuid4();return this._client?(this._client.captureEvent(en,{...tn,event_id:nn},this),nn):(logger.warn("No client configured on scope - will not capture event!"),nn)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(en=>{en(this)}),this._notifyingListeners=!1)}}function getGlobalScope(){return globalScope||(globalScope=new Scope),globalScope}function generatePropagationContext(){return{traceId:uuid4(),spanId:uuid4().substring(16)}}const SDK_VERSION="7.109.0",API_VERSION=parseFloat(SDK_VERSION),DEFAULT_BREADCRUMBS=100;class Hub{constructor(en,tn,nn,rn=API_VERSION){this._version=rn;let sn;tn?sn=tn:(sn=new Scope,sn.setClient(en));let an;nn?an=nn:(an=new Scope,an.setClient(en)),this._stack=[{scope:sn}],en&&this.bindClient(en),this._isolationScope=an}isOlderThan(en){return this._version<en}bindClient(en){const tn=this.getStackTop();tn.client=en,tn.scope.setClient(en),en&&en.setupIntegrations&&en.setupIntegrations()}pushScope(){const en=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:en}),en}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(en){const tn=this.pushScope();let nn;try{nn=en(tn)}catch(rn){throw this.popScope(),rn}return isThenable(nn)?nn.then(rn=>(this.popScope(),rn),rn=>{throw this.popScope(),rn}):(this.popScope(),nn)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(en,tn){const nn=this._lastEventId=tn&&tn.event_id?tn.event_id:uuid4(),rn=new Error("Sentry syntheticException");return this.getScope().captureException(en,{originalException:en,syntheticException:rn,...tn,event_id:nn}),nn}captureMessage(en,tn,nn){const rn=this._lastEventId=nn&&nn.event_id?nn.event_id:uuid4(),sn=new Error(en);return this.getScope().captureMessage(en,tn,{originalException:en,syntheticException:sn,...nn,event_id:rn}),rn}captureEvent(en,tn){const nn=tn&&tn.event_id?tn.event_id:uuid4();return en.type||(this._lastEventId=nn),this.getScope().captureEvent(en,{...tn,event_id:nn}),nn}lastEventId(){return this._lastEventId}addBreadcrumb(en,tn){const{scope:nn,client:rn}=this.getStackTop();if(!rn)return;const{beforeBreadcrumb:sn=null,maxBreadcrumbs:an=DEFAULT_BREADCRUMBS}=rn.getOptions&&rn.getOptions()||{};if(an<=0)return;const un={timestamp:dateTimestampInSeconds(),...en},ln=sn?consoleSandbox(()=>sn(un,tn)):un;ln!==null&&(rn.emit&&rn.emit("beforeAddBreadcrumb",ln,tn),nn.addBreadcrumb(ln,an))}setUser(en){this.getScope().setUser(en),this.getIsolationScope().setUser(en)}setTags(en){this.getScope().setTags(en),this.getIsolationScope().setTags(en)}setExtras(en){this.getScope().setExtras(en),this.getIsolationScope().setExtras(en)}setTag(en,tn){this.getScope().setTag(en,tn),this.getIsolationScope().setTag(en,tn)}setExtra(en,tn){this.getScope().setExtra(en,tn),this.getIsolationScope().setExtra(en,tn)}setContext(en,tn){this.getScope().setContext(en,tn),this.getIsolationScope().setContext(en,tn)}configureScope(en){const{scope:tn,client:nn}=this.getStackTop();nn&&en(tn)}run(en){const tn=makeMain(this);try{en(this)}finally{makeMain(tn)}}getIntegration(en){const tn=this.getClient();if(!tn)return null;try{return tn.getIntegration(en)}catch{return DEBUG_BUILD$3&&logger.warn(`Cannot retrieve integration ${en.id} from the current Hub`),null}}startTransaction(en,tn){const nn=this._callExtensionMethod("startTransaction",en,tn);return DEBUG_BUILD$3&&!nn&&(this.getClient()?logger.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):logger.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),nn}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(en=!1){if(en)return this.endSession();this._sendSessionUpdate()}endSession(){const tn=this.getStackTop().scope,nn=tn.getSession();nn&&closeSession(nn),this._sendSessionUpdate(),tn.setSession()}startSession(en){const{scope:tn,client:nn}=this.getStackTop(),{release:rn,environment:sn=DEFAULT_ENVIRONMENT}=nn&&nn.getOptions()||{},{userAgent:an}=GLOBAL_OBJ.navigator||{},cn=makeSession$1({release:rn,environment:sn,user:tn.getUser(),...an&&{userAgent:an},...en}),un=tn.getSession&&tn.getSession();return un&&un.status==="ok"&&updateSession(un,{status:"exited"}),this.endSession(),tn.setSession(cn),cn}shouldSendDefaultPii(){const en=this.getClient(),tn=en&&en.getOptions();return!!(tn&&tn.sendDefaultPii)}_sendSessionUpdate(){const{scope:en,client:tn}=this.getStackTop(),nn=en.getSession();nn&&tn&&tn.captureSession&&tn.captureSession(nn)}_callExtensionMethod(en,...tn){const rn=getMainCarrier().__SENTRY__;if(rn&&rn.extensions&&typeof rn.extensions[en]=="function")return rn.extensions[en].apply(this,tn);DEBUG_BUILD$3&&logger.warn(`Extension method ${en} couldn't be found, doing nothing.`)}}function getMainCarrier(){return GLOBAL_OBJ.__SENTRY__=GLOBAL_OBJ.__SENTRY__||{extensions:{},hub:void 0},GLOBAL_OBJ}function makeMain(ze){const en=getMainCarrier(),tn=getHubFromCarrier(en);return setHubOnCarrier(en,ze),tn}function getCurrentHub(){const ze=getMainCarrier();if(ze.__SENTRY__&&ze.__SENTRY__.acs){const en=ze.__SENTRY__.acs.getCurrentHub();if(en)return en}return getGlobalHub(ze)}function getIsolationScope(){return getCurrentHub().getIsolationScope()}function getGlobalHub(ze=getMainCarrier()){return(!hasHubOnCarrier(ze)||getHubFromCarrier(ze).isOlderThan(API_VERSION))&&setHubOnCarrier(ze,new Hub),getHubFromCarrier(ze)}function hasHubOnCarrier(ze){return!!(ze&&ze.__SENTRY__&&ze.__SENTRY__.hub)}function getHubFromCarrier(ze){return getGlobalSingleton("hub",()=>new Hub,ze)}function setHubOnCarrier(ze,en){if(!ze)return!1;const tn=ze.__SENTRY__=ze.__SENTRY__||{};return tn.hub=en,!0}function getActiveTransaction(ze){return(ze||getCurrentHub()).getScope().getTransaction()}let errorsInstrumented=!1;function registerErrorInstrumentation(){errorsInstrumented||(errorsInstrumented=!0,addGlobalErrorInstrumentationHandler(errorCallback),addGlobalUnhandledRejectionInstrumentationHandler(errorCallback))}function errorCallback(){const ze=getActiveTransaction();if(ze){const en="internal_error";DEBUG_BUILD$3&&logger.log(`[Tracing] Transaction: ${en} -> Global error occured`),ze.setStatus(en)}}errorCallback.tag="sentry_tracingErrorCallback";var SpanStatus;(function(ze){const en="ok";ze.Ok=en;const tn="deadline_exceeded";ze.DeadlineExceeded=tn;const nn="unauthenticated";ze.Unauthenticated=nn;const rn="permission_denied";ze.PermissionDenied=rn;const sn="not_found";ze.NotFound=sn;const an="resource_exhausted";ze.ResourceExhausted=an;const cn="invalid_argument";ze.InvalidArgument=cn;const un="unimplemented";ze.Unimplemented=un;const ln="unavailable";ze.Unavailable=ln;const dn="internal_error";ze.InternalError=dn;const fn="unknown_error";ze.UnknownError=fn;const pn="cancelled";ze.Cancelled=pn;const hn="already_exists";ze.AlreadyExists=hn;const mn="failed_precondition";ze.FailedPrecondition=mn;const gn="aborted";ze.Aborted=gn;const Sn="out_of_range";ze.OutOfRange=Sn;const _n="data_loss";ze.DataLoss=_n})(SpanStatus||(SpanStatus={}));function getSpanStatusFromHttpCode(ze){if(ze<400&&ze>=100)return"ok";if(ze>=400&&ze<500)switch(ze){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(ze>=500&&ze<600)switch(ze){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function setHttpStatus(ze,en){ze.setTag("http.status_code",String(en)),ze.setData("http.response.status_code",en);const tn=getSpanStatusFromHttpCode(en);tn!=="unknown_error"&&ze.setStatus(tn)}function hasTracingEnabled(ze){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const en=getClient(),tn=ze||en&&en.getOptions();return!!tn&&(tn.enableTracing||"tracesSampleRate"in tn||"tracesSampler"in tn)}function startInactiveSpan(ze){if(!hasTracingEnabled())return;const en=normalizeContext(ze),tn=getCurrentHub(),nn=ze.scope?ze.scope.getSpan():getActiveSpan();if(ze.onlyIfParent&&!nn)return;const an=(ze.scope||getCurrentScope()).clone();return createChildSpanOrTransaction(tn,{parentSpan:nn,spanContext:en,forceTransaction:ze.forceTransaction,scope:an})}function getActiveSpan(){return getCurrentScope().getSpan()}function createChildSpanOrTransaction(ze,{parentSpan:en,spanContext:tn,forceTransaction:nn,scope:rn}){if(!hasTracingEnabled())return;const sn=getIsolationScope();let an;if(en&&!nn)an=en.startChild(tn);else if(en){const cn=getDynamicSamplingContextFromSpan(en),{traceId:un,spanId:ln}=en.spanContext(),dn=spanIsSampled(en);an=ze.startTransaction({traceId:un,parentSpanId:ln,parentSampled:dn,...tn,metadata:{dynamicSamplingContext:cn,...tn.metadata}})}else{const{traceId:cn,dsc:un,parentSpanId:ln,sampled:dn}={...sn.getPropagationContext(),...rn.getPropagationContext()};an=ze.startTransaction({traceId:cn,parentSpanId:ln,parentSampled:dn,...tn,metadata:{dynamicSamplingContext:un,...tn.metadata}})}return rn.setSpan(an),setCapturedScopesOnSpan(an,rn,sn),an}function normalizeContext(ze){if(ze.startTime){const en={...ze};return en.startTimestamp=spanTimeInputToSeconds(ze.startTime),delete en.startTime,en}return ze}const SCOPE_ON_START_SPAN_FIELD="_sentryScope",ISOLATION_SCOPE_ON_START_SPAN_FIELD="_sentryIsolationScope";function setCapturedScopesOnSpan(ze,en,tn){ze&&(addNonEnumerableProperty(ze,ISOLATION_SCOPE_ON_START_SPAN_FIELD,tn),addNonEnumerableProperty(ze,SCOPE_ON_START_SPAN_FIELD,en))}function getCapturedScopesOnSpan(ze){return{scope:ze[SCOPE_ON_START_SPAN_FIELD],isolationScope:ze[ISOLATION_SCOPE_ON_START_SPAN_FIELD]}}function getMetricSummaryJsonForSpan(ze){}const SEMANTIC_ATTRIBUTE_SENTRY_SOURCE="sentry.source",SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE="sentry.sample_rate",SEMANTIC_ATTRIBUTE_SENTRY_OP="sentry.op",SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN="sentry.origin",SEMANTIC_ATTRIBUTE_PROFILE_ID="profile_id";class SpanRecorder{constructor(en=1e3){this._maxlen=en,this.spans=[]}add(en){this.spans.length>this._maxlen?en.spanRecorder=void 0:this.spans.push(en)}}class Span{constructor(en={}){this._traceId=en.traceId||uuid4(),this._spanId=en.spanId||uuid4().substring(16),this._startTime=en.startTimestamp||timestampInSeconds(),this.tags=en.tags?{...en.tags}:{},this.data=en.data?{...en.data}:{},this.instrumenter=en.instrumenter||"sentry",this._attributes={},this.setAttributes({[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:en.origin||"manual",[SEMANTIC_ATTRIBUTE_SENTRY_OP]:en.op,...en.attributes}),this._name=en.name||en.description,en.parentSpanId&&(this._parentSpanId=en.parentSpanId),"sampled"in en&&(this._sampled=en.sampled),en.status&&(this._status=en.status),en.endTimestamp&&(this._endTime=en.endTimestamp),en.exclusiveTime&&(this._exclusiveTime=en.exclusiveTime),this._measurements=en.measurements?{...en.measurements}:{}}get name(){return this._name||""}set name(en){this.updateName(en)}get description(){return this._name}set description(en){this._name=en}get traceId(){return this._traceId}set traceId(en){this._traceId=en}get spanId(){return this._spanId}set spanId(en){this._spanId=en}set parentSpanId(en){this._parentSpanId=en}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(en){this._sampled=en}get attributes(){return this._attributes}set attributes(en){this._attributes=en}get startTimestamp(){return this._startTime}set startTimestamp(en){this._startTime=en}get endTimestamp(){return this._endTime}set endTimestamp(en){this._endTime=en}get status(){return this._status}set status(en){this._status=en}get op(){return this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_OP]}set op(en){this.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_OP,en)}get origin(){return this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]}set origin(en){this.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,en)}spanContext(){const{_spanId:en,_traceId:tn,_sampled:nn}=this;return{spanId:en,traceId:tn,traceFlags:nn?TRACE_FLAG_SAMPLED:TRACE_FLAG_NONE}}startChild(en){const tn=new Span({...en,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});tn.spanRecorder=this.spanRecorder,tn.spanRecorder&&tn.spanRecorder.add(tn);const nn=getRootSpan(this);if(tn.transaction=nn,DEBUG_BUILD$3&&nn){const rn=en&&en.op||"< unknown op >",sn=spanToJSON(tn).description||"< unknown name >",an=nn.spanContext().spanId,cn=`[Tracing] Starting '${rn}' span on transaction '${sn}' (${an}).`;logger.log(cn),this._logMessage=cn}return tn}setTag(en,tn){return this.tags={...this.tags,[en]:tn},this}setData(en,tn){return this.data={...this.data,[en]:tn},this}setAttribute(en,tn){tn===void 0?delete this._attributes[en]:this._attributes[en]=tn}setAttributes(en){Object.keys(en).forEach(tn=>this.setAttribute(tn,en[tn]))}setStatus(en){return this._status=en,this}setHttpStatus(en){return setHttpStatus(this,en),this}setName(en){this.updateName(en)}updateName(en){return this._name=en,this}isSuccess(){return this._status==="ok"}finish(en){return this.end(en)}end(en){if(this._endTime)return;const tn=getRootSpan(this);if(DEBUG_BUILD$3&&tn&&tn.spanContext().spanId!==this._spanId){const nn=this._logMessage;nn&&logger.log(nn.replace("Starting","Finishing"))}this._endTime=spanTimeInputToSeconds(en)}toTraceparent(){return spanToTraceHeader(this)}toContext(){return dropUndefinedKeys({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(en){return this.data=en.data||{},this._name=en.name||en.description,this._endTime=en.endTimestamp,this.op=en.op,this._parentSpanId=en.parentSpanId,this._sampled=en.sampled,this._spanId=en.spanId||this._spanId,this._startTime=en.startTimestamp||this._startTime,this._status=en.status,this.tags=en.tags||{},this._traceId=en.traceId||this._traceId,this}getTraceContext(){return spanToTraceContext(this)}getSpanJSON(){return dropUndefinedKeys({data:this._getData(),description:this._name,op:this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:void 0,profile_id:this._attributes[SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:en,_attributes:tn}=this,nn=Object.keys(en).length>0,rn=Object.keys(tn).length>0;if(!(!nn&&!rn))return nn&&rn?{...en,...tn}:nn?en:tn}}class Transaction extends Span{constructor(en,tn){super(en),this._contexts={},this._hub=tn||getCurrentHub(),this._name=en.name||"",this._metadata={...en.metadata},this._trimEnd=en.trimEnd,this.transaction=this;const nn=this._metadata.dynamicSamplingContext;nn&&(this._frozenDynamicSamplingContext={...nn})}get name(){return this._name}set name(en){this.setName(en)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]&&{source:this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]},...this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE]&&{sampleRate:this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE]}}}set metadata(en){this._metadata=en}setName(en,tn="custom"){this._name=en,this.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,tn)}updateName(en){return this._name=en,this}initSpanRecorder(en=1e3){this.spanRecorder||(this.spanRecorder=new SpanRecorder(en)),this.spanRecorder.add(this)}setContext(en,tn){tn===null?delete this._contexts[en]:this._contexts[en]=tn}setMeasurement(en,tn,nn=""){this._measurements[en]={value:tn,unit:nn}}setMetadata(en){this._metadata={...this._metadata,...en}}end(en){const tn=spanTimeInputToSeconds(en),nn=this._finishTransaction(tn);if(nn)return this._hub.captureEvent(nn)}toContext(){const en=super.toContext();return dropUndefinedKeys({...en,name:this._name,trimEnd:this._trimEnd})}updateWithContext(en){return super.updateWithContext(en),this._name=en.name||"",this._trimEnd=en.trimEnd,this}getDynamicSamplingContext(){return getDynamicSamplingContextFromSpan(this)}setHub(en){this._hub=en}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(en){if(this._endTime!==void 0)return;this._name||(DEBUG_BUILD$3&&logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(en);const tn=this._hub.getClient();if(tn&&tn.emit&&tn.emit("finishTransaction",this),this._sampled!==!0){DEBUG_BUILD$3&&logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),tn&&tn.recordDroppedEvent("sample_rate","transaction");return}const nn=this.spanRecorder?this.spanRecorder.spans.filter(dn=>dn!==this&&spanToJSON(dn).timestamp):[];if(this._trimEnd&&nn.length>0){const dn=nn.map(fn=>spanToJSON(fn).timestamp).filter(Boolean);this._endTime=dn.reduce((fn,pn)=>fn>pn?fn:pn)}const{scope:rn,isolationScope:sn}=getCapturedScopesOnSpan(this),{metadata:an}=this,{source:cn}=an,un={contexts:{...this._contexts,trace:spanToTraceContext(this)},spans:nn,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...an,capturedSpanScope:rn,capturedSpanIsolationScope:sn,...dropUndefinedKeys({dynamicSamplingContext:getDynamicSamplingContextFromSpan(this)})},_metrics_summary:void 0,...cn&&{transaction_info:{source:cn}}};return Object.keys(this._measurements).length>0&&(DEBUG_BUILD$3&&logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),un.measurements=this._measurements),DEBUG_BUILD$3&&logger.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),un}}const TRACING_DEFAULTS={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},FINISH_REASON_TAG="finishReason",IDLE_TRANSACTION_FINISH_REASONS=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class IdleTransactionSpanRecorder extends SpanRecorder{constructor(en,tn,nn,rn){super(rn),this._pushActivity=en,this._popActivity=tn,this.transactionSpanId=nn}add(en){if(en.spanContext().spanId!==this.transactionSpanId){const tn=en.end;en.end=(...nn)=>(this._popActivity(en.spanContext().spanId),tn.apply(en,nn)),spanToJSON(en).timestamp===void 0&&this._pushActivity(en.spanContext().spanId)}super.add(en)}}class IdleTransaction extends Transaction{constructor(en,tn,nn=TRACING_DEFAULTS.idleTimeout,rn=TRACING_DEFAULTS.finalTimeout,sn=TRACING_DEFAULTS.heartbeatInterval,an=!1,cn=!1){super(en,tn),this._idleHub=tn,this._idleTimeout=nn,this._finalTimeout=rn,this._heartbeatInterval=sn,this._onScope=an,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[4],this._autoFinishAllowed=!cn,an&&(DEBUG_BUILD$3&&logger.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),tn.getScope().setSpan(this)),cn||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[3],this.end())},this._finalTimeout)}end(en){const tn=spanTimeInputToSeconds(en);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(FINISH_REASON_TAG,this._finishReason),this.spanRecorder){DEBUG_BUILD$3&&logger.log("[Tracing] finishing IdleTransaction",new Date(tn*1e3).toISOString(),this.op);for(const nn of this._beforeFinishCallbacks)nn(this,tn);this.spanRecorder.spans=this.spanRecorder.spans.filter(nn=>{if(nn.spanContext().spanId===this.spanContext().spanId)return!0;spanToJSON(nn).timestamp||(nn.setStatus("cancelled"),nn.end(tn),DEBUG_BUILD$3&&logger.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(nn,void 0,2)));const{start_timestamp:rn,timestamp:sn}=spanToJSON(nn),an=rn&&rn<tn,cn=(this._finalTimeout+this._idleTimeout)/1e3,un=sn&&rn&&sn-rn<cn;if(DEBUG_BUILD$3){const ln=JSON.stringify(nn,void 0,2);an?un||logger.log("[Tracing] discarding Span since it finished after Transaction final timeout",ln):logger.log("[Tracing] discarding Span since it happened after Transaction was finished",ln)}return an&&un}),DEBUG_BUILD$3&&logger.log("[Tracing] flushing IdleTransaction")}else DEBUG_BUILD$3&&logger.log("[Tracing] No active IdleTransaction");if(this._onScope){const nn=this._idleHub.getScope();nn.getTransaction()===this&&nn.setSpan(void 0)}return super.end(en)}registerBeforeFinishCallback(en){this._beforeFinishCallbacks.push(en)}initSpanRecorder(en){if(!this.spanRecorder){const tn=rn=>{this._finished||this._pushActivity(rn)},nn=rn=>{this._finished||this._popActivity(rn)};this.spanRecorder=new IdleTransactionSpanRecorder(tn,nn,this.spanContext().spanId,en),DEBUG_BUILD$3&&logger.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(en,{restartOnChildSpanChange:tn}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=tn===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[5],this.end(en)))}setFinishReason(en){this._finishReason=en}sendAutoFinishSignal(){this._autoFinishAllowed||(DEBUG_BUILD$3&&logger.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(en){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[1],this.end(en))},this._idleTimeout)}_pushActivity(en){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),DEBUG_BUILD$3&&logger.log(`[Tracing] pushActivity: ${en}`),this.activities[en]=!0,DEBUG_BUILD$3&&logger.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(en){if(this.activities[en]&&(DEBUG_BUILD$3&&logger.log(`[Tracing] popActivity ${en}`),delete this.activities[en],DEBUG_BUILD$3&&logger.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const tn=timestampInSeconds();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[5],this.end(tn)):this._restartIdleTimeout(tn+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const en=Object.keys(this.activities).join("");en===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=en,this._heartbeatCounter>=3?this._autoFinishAllowed&&(DEBUG_BUILD$3&&logger.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=IDLE_TRANSACTION_FINISH_REASONS[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){DEBUG_BUILD$3&&logger.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function sampleTransaction(ze,en,tn){if(!hasTracingEnabled(en))return ze.sampled=!1,ze;if(ze.sampled!==void 0)return ze.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Number(ze.sampled)),ze;let nn;return typeof en.tracesSampler=="function"?(nn=en.tracesSampler(tn),ze.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Number(nn))):tn.parentSampled!==void 0?nn=tn.parentSampled:typeof en.tracesSampleRate<"u"?(nn=en.tracesSampleRate,ze.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Number(nn))):(nn=1,ze.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,nn)),isValidSampleRate(nn)?nn?(ze.sampled=Math.random()<nn,ze.sampled?(DEBUG_BUILD$3&&logger.log(`[Tracing] starting ${ze.op} transaction - ${spanToJSON(ze).description}`),ze):(DEBUG_BUILD$3&&logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(nn)})`),ze)):(DEBUG_BUILD$3&&logger.log(`[Tracing] Discarding transaction because ${typeof en.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),ze.sampled=!1,ze):(DEBUG_BUILD$3&&logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),ze.sampled=!1,ze)}function isValidSampleRate(ze){return isNaN$1(ze)||!(typeof ze=="number"||typeof ze=="boolean")?(DEBUG_BUILD$3&&logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(ze)} of type ${JSON.stringify(typeof ze)}.`),!1):ze<0||ze>1?(DEBUG_BUILD$3&&logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${ze}.`),!1):!0}function traceHeaders(){const en=this.getScope().getSpan();return en?{"sentry-trace":spanToTraceHeader(en)}:{}}function _startTransaction(ze,en){const tn=this.getClient(),nn=tn&&tn.getOptions()||{},rn=nn.instrumenter||"sentry",sn=ze.instrumenter||"sentry";rn!==sn&&(DEBUG_BUILD$3&&logger.error(`A transaction was started with instrumenter=\`${sn}\`, but the SDK is configured with the \`${rn}\` instrumenter.
The transaction will not be sampled. Please use the ${rn} instrumentation to start transactions.`),ze.sampled=!1);let an=new Transaction(ze,this);return an=sampleTransaction(an,nn,{name:ze.name,parentSampled:ze.parentSampled,transactionContext:ze,attributes:{...ze.data,...ze.attributes},...en}),an.isRecording()&&an.initSpanRecorder(nn._experiments&&nn._experiments.maxSpans),tn&&tn.emit&&tn.emit("startTransaction",an),an}function startIdleTransaction(ze,en,tn,nn,rn,sn,an,cn=!1){const un=ze.getClient(),ln=un&&un.getOptions()||{};let dn=new IdleTransaction(en,ze,tn,nn,an,rn,cn);return dn=sampleTransaction(dn,ln,{name:en.name,parentSampled:en.parentSampled,transactionContext:en,attributes:{...en.data,...en.attributes},...sn}),dn.isRecording()&&dn.initSpanRecorder(ln._experiments&&ln._experiments.maxSpans),un&&un.emit&&un.emit("startTransaction",dn),dn}function addTracingExtensions(){const ze=getMainCarrier();ze.__SENTRY__&&(ze.__SENTRY__.extensions=ze.__SENTRY__.extensions||{},ze.__SENTRY__.extensions.startTransaction||(ze.__SENTRY__.extensions.startTransaction=_startTransaction),ze.__SENTRY__.extensions.traceHeaders||(ze.__SENTRY__.extensions.traceHeaders=traceHeaders),registerErrorInstrumentation())}function setMeasurement(ze,en,tn){const nn=getActiveTransaction();nn&&nn.setMeasurement(ze,en,tn)}function enhanceEventWithSdkInfo(ze,en){return en&&(ze.sdk=ze.sdk||{},ze.sdk.name=ze.sdk.name||en.name,ze.sdk.version=ze.sdk.version||en.version,ze.sdk.integrations=[...ze.sdk.integrations||[],...en.integrations||[]],ze.sdk.packages=[...ze.sdk.packages||[],...en.packages||[]]),ze}function createSessionEnvelope(ze,en,tn,nn){const rn=getSdkMetadataForEnvelopeHeader(tn),sn={sent_at:new Date().toISOString(),...rn&&{sdk:rn},...!!nn&&en&&{dsn:dsnToString(en)}},an="aggregates"in ze?[{type:"sessions"},ze]:[{type:"session"},ze.toJSON()];return createEnvelope(sn,[an])}function createEventEnvelope(ze,en,tn,nn){const rn=getSdkMetadataForEnvelopeHeader(tn),sn=ze.type&&ze.type!=="replay_event"?ze.type:"event";enhanceEventWithSdkInfo(ze,tn&&tn.sdk);const an=createEventEnvelopeHeaders(ze,rn,nn,en);return delete ze.sdkProcessingMetadata,createEnvelope(an,[[{type:sn},ze]])}const SENTRY_API_VERSION="7";function getBaseApiEndpoint(ze){const en=ze.protocol?`${ze.protocol}:`:"",tn=ze.port?`:${ze.port}`:"";return`${en}//${ze.host}${tn}${ze.path?`/${ze.path}`:""}/api/`}function _getIngestEndpoint(ze){return`${getBaseApiEndpoint(ze)}${ze.projectId}/envelope/`}function _encodedAuth(ze,en){return urlEncode({sentry_key:ze.publicKey,sentry_version:SENTRY_API_VERSION,...en&&{sentry_client:`${en.name}/${en.version}`}})}function getEnvelopeEndpointWithUrlEncodedAuth(ze,en={}){const tn=typeof en=="string"?en:en.tunnel,nn=typeof en=="string"||!en._metadata?void 0:en._metadata.sdk;return tn||`${_getIngestEndpoint(ze)}?${_encodedAuth(ze,nn)}`}const installedIntegrations=[];function filterDuplicates(ze){const en={};return ze.forEach(tn=>{const{name:nn}=tn,rn=en[nn];rn&&!rn.isDefaultInstance&&tn.isDefaultInstance||(en[nn]=tn)}),Object.keys(en).map(tn=>en[tn])}function getIntegrationsToSetup(ze){const en=ze.defaultIntegrations||[],tn=ze.integrations;en.forEach(an=>{an.isDefaultInstance=!0});let nn;Array.isArray(tn)?nn=[...en,...tn]:typeof tn=="function"?nn=arrayify(tn(en)):nn=en;const rn=filterDuplicates(nn),sn=findIndex(rn,an=>an.name==="Debug");if(sn!==-1){const[an]=rn.splice(sn,1);rn.push(an)}return rn}function setupIntegrations(ze,en){const tn={};return en.forEach(nn=>{nn&&setupIntegration(ze,nn,tn)}),tn}function afterSetupIntegrations(ze,en){for(const tn of en)tn&&tn.afterAllSetup&&tn.afterAllSetup(ze)}function setupIntegration(ze,en,tn){if(tn[en.name]){DEBUG_BUILD$3&&logger.log(`Integration skipped because it was already installed: ${en.name}`);return}if(tn[en.name]=en,installedIntegrations.indexOf(en.name)===-1&&(en.setupOnce(addGlobalEventProcessor,getCurrentHub),installedIntegrations.push(en.name)),en.setup&&typeof en.setup=="function"&&en.setup(ze),ze.on&&typeof en.preprocessEvent=="function"){const nn=en.preprocessEvent.bind(en);ze.on("preprocessEvent",(rn,sn)=>nn(rn,sn,ze))}if(ze.addEventProcessor&&typeof en.processEvent=="function"){const nn=en.processEvent.bind(en),rn=Object.assign((sn,an)=>nn(sn,an,ze),{id:en.name});ze.addEventProcessor(rn)}DEBUG_BUILD$3&&logger.log(`Integration installed: ${en.name}`)}function findIndex(ze,en){for(let tn=0;tn<ze.length;tn++)if(en(ze[tn])===!0)return tn;return-1}function convertIntegrationFnToClass(ze,en){return Object.assign(function(...nn){return en(...nn)},{id:ze})}function defineIntegration(ze){return ze}function serializeMetricBuckets(ze){let en="";for(const tn of ze){const nn=Object.entries(tn.tags),rn=nn.length>0?`|#${nn.map(([sn,an])=>`${sn}:${an}`).join(",")}`:"";en+=`${tn.name}@${tn.unit}:${tn.metric}|${tn.metricType}${rn}|T${tn.timestamp}
`}return en}function createMetricEnvelope(ze,en,tn,nn){const rn={sent_at:new Date().toISOString()};tn&&tn.sdk&&(rn.sdk={name:tn.sdk.name,version:tn.sdk.version}),nn&&en&&(rn.dsn=dsnToString(en));const sn=createMetricEnvelopeItem(ze);return createEnvelope(rn,[sn])}function createMetricEnvelopeItem(ze){const en=serializeMetricBuckets(ze);return[{type:"statsd",length:en.length},en]}const ALREADY_SEEN_ERROR="Not capturing exception because it's already been captured.";class BaseClient{constructor(en){if(this._options=en,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],en.dsn?this._dsn=makeDsn(en.dsn):DEBUG_BUILD$3&&logger.warn("No DSN provided, client will not send events."),this._dsn){const tn=getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,en);this._transport=en.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...en.transportOptions,url:tn})}}captureException(en,tn,nn){if(checkOrSetAlreadyCaught(en)){DEBUG_BUILD$3&&logger.log(ALREADY_SEEN_ERROR);return}let rn=tn&&tn.event_id;return this._process(this.eventFromException(en,tn).then(sn=>this._captureEvent(sn,tn,nn)).then(sn=>{rn=sn})),rn}captureMessage(en,tn,nn,rn){let sn=nn&&nn.event_id;const an=isParameterizedString(en)?en:String(en),cn=isPrimitive(en)?this.eventFromMessage(an,tn,nn):this.eventFromException(en,nn);return this._process(cn.then(un=>this._captureEvent(un,nn,rn)).then(un=>{sn=un})),sn}captureEvent(en,tn,nn){if(tn&&tn.originalException&&checkOrSetAlreadyCaught(tn.originalException)){DEBUG_BUILD$3&&logger.log(ALREADY_SEEN_ERROR);return}let rn=tn&&tn.event_id;const an=(en.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(en,tn,an||nn).then(cn=>{rn=cn})),rn}captureSession(en){typeof en.release!="string"?DEBUG_BUILD$3&&logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(en),updateSession(en,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(en){const tn=this._transport;return tn?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(en).then(nn=>tn.flush(en).then(rn=>nn&&rn))):resolvedSyncPromise(!0)}close(en){return this.flush(en).then(tn=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),tn))}getEventProcessors(){return this._eventProcessors}addEventProcessor(en){this._eventProcessors.push(en)}setupIntegrations(en){(en&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(en){return this.getIntegrationByName(en)}getIntegrationByName(en){return this._integrations[en]}getIntegration(en){try{return this._integrations[en.id]||null}catch{return DEBUG_BUILD$3&&logger.warn(`Cannot retrieve integration ${en.id} from the current Client`),null}}addIntegration(en){const tn=this._integrations[en.name];setupIntegration(this,en,this._integrations),tn||afterSetupIntegrations(this,[en])}sendEvent(en,tn={}){this.emit("beforeSendEvent",en,tn);let nn=createEventEnvelope(en,this._dsn,this._options._metadata,this._options.tunnel);for(const sn of tn.attachments||[])nn=addItemToEnvelope(nn,createAttachmentEnvelopeItem(sn,this._options.transportOptions&&this._options.transportOptions.textEncoder));const rn=this._sendEnvelope(nn);rn&&rn.then(sn=>this.emit("afterSendEvent",en,sn),null)}sendSession(en){const tn=createSessionEnvelope(en,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(tn)}recordDroppedEvent(en,tn,nn){if(this._options.sendClientReports){const rn=`${en}:${tn}`;DEBUG_BUILD$3&&logger.log(`Adding outcome: "${rn}"`),this._outcomes[rn]=this._outcomes[rn]+1||1}}captureAggregateMetrics(en){DEBUG_BUILD$3&&logger.log(`Flushing aggregated metrics, number of metrics: ${en.length}`);const tn=createMetricEnvelope(en,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(tn)}on(en,tn){this._hooks[en]||(this._hooks[en]=[]),this._hooks[en].push(tn)}emit(en,...tn){this._hooks[en]&&this._hooks[en].forEach(nn=>nn(...tn))}_setupIntegrations(){const{integrations:en}=this._options;this._integrations=setupIntegrations(this,en),afterSetupIntegrations(this,en),this._integrationsInitialized=!0}_updateSessionFromEvent(en,tn){let nn=!1,rn=!1;const sn=tn.exception&&tn.exception.values;if(sn){rn=!0;for(const un of sn){const ln=un.mechanism;if(ln&&ln.handled===!1){nn=!0;break}}}const an=en.status==="ok";(an&&en.errors===0||an&&nn)&&(updateSession(en,{...nn&&{status:"crashed"},errors:en.errors||Number(rn||nn)}),this.captureSession(en))}_isClientDoneProcessing(en){return new SyncPromise(tn=>{let nn=0;const rn=1,sn=setInterval(()=>{this._numProcessing==0?(clearInterval(sn),tn(!0)):(nn+=rn,en&&nn>=en&&(clearInterval(sn),tn(!1)))},rn)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(en,tn,nn,rn=getIsolationScope()){const sn=this.getOptions(),an=Object.keys(this._integrations);return!tn.integrations&&an.length>0&&(tn.integrations=an),this.emit("preprocessEvent",en,tn),prepareEvent(sn,en,tn,nn,this,rn).then(cn=>{if(cn===null)return cn;const un={...rn.getPropagationContext(),...nn?nn.getPropagationContext():void 0};if(!(cn.contexts&&cn.contexts.trace)&&un){const{traceId:dn,spanId:fn,parentSpanId:pn,dsc:hn}=un;cn.contexts={trace:{trace_id:dn,span_id:fn,parent_span_id:pn},...cn.contexts};const mn=hn||getDynamicSamplingContextFromClient(dn,this,nn);cn.sdkProcessingMetadata={dynamicSamplingContext:mn,...cn.sdkProcessingMetadata}}return cn})}_captureEvent(en,tn={},nn){return this._processEvent(en,tn,nn).then(rn=>rn.event_id,rn=>{if(DEBUG_BUILD$3){const sn=rn;sn.logLevel==="log"?logger.log(sn.message):logger.warn(sn)}})}_processEvent(en,tn,nn){const rn=this.getOptions(),{sampleRate:sn}=rn,an=isTransactionEvent$1(en),cn=isErrorEvent$1(en),un=en.type||"error",ln=`before send for type \`${un}\``;if(cn&&typeof sn=="number"&&Math.random()>sn)return this.recordDroppedEvent("sample_rate","error",en),rejectedSyncPromise(new SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${sn})`,"log"));const dn=un==="replay_event"?"replay":un,pn=(en.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(en,tn,nn,pn).then(hn=>{if(hn===null)throw this.recordDroppedEvent("event_processor",dn,en),new SentryError("An event processor returned `null`, will not send event.","log");if(tn.data&&tn.data.__sentry__===!0)return hn;const gn=processBeforeSend(rn,hn,tn);return _validateBeforeSendResult(gn,ln)}).then(hn=>{if(hn===null)throw this.recordDroppedEvent("before_send",dn,en),new SentryError(`${ln} returned \`null\`, will not send event.`,"log");const mn=nn&&nn.getSession();!an&&mn&&this._updateSessionFromEvent(mn,hn);const gn=hn.transaction_info;if(an&&gn&&hn.transaction!==en.transaction){const Sn="custom";hn.transaction_info={...gn,source:Sn}}return this.sendEvent(hn,tn),hn}).then(null,hn=>{throw hn instanceof SentryError?hn:(this.captureException(hn,{data:{__sentry__:!0},originalException:hn}),new SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${hn}`))})}_process(en){this._numProcessing++,en.then(tn=>(this._numProcessing--,tn),tn=>(this._numProcessing--,tn))}_sendEnvelope(en){if(this.emit("beforeEnvelope",en),this._isEnabled()&&this._transport)return this._transport.send(en).then(null,tn=>{DEBUG_BUILD$3&&logger.error("Error while sending event:",tn)});DEBUG_BUILD$3&&logger.error("Transport disabled")}_clearOutcomes(){const en=this._outcomes;return this._outcomes={},Object.keys(en).map(tn=>{const[nn,rn]=tn.split(":");return{reason:nn,category:rn,quantity:en[tn]}})}}function _validateBeforeSendResult(ze,en){const tn=`${en} must return \`null\` or a valid event.`;if(isThenable(ze))return ze.then(nn=>{if(!isPlainObject(nn)&&nn!==null)throw new SentryError(tn);return nn},nn=>{throw new SentryError(`${en} rejected with ${nn}`)});if(!isPlainObject(ze)&&ze!==null)throw new SentryError(tn);return ze}function processBeforeSend(ze,en,tn){const{beforeSend:nn,beforeSendTransaction:rn}=ze;return isErrorEvent$1(en)&&nn?nn(en,tn):isTransactionEvent$1(en)&&rn?rn(en,tn):en}function isErrorEvent$1(ze){return ze.type===void 0}function isTransactionEvent$1(ze){return ze.type==="transaction"}function addEventProcessor(ze){const en=getClient();!en||!en.addEventProcessor||en.addEventProcessor(ze)}function initAndBind(ze,en){en.debug===!0&&(DEBUG_BUILD$3?logger.enable():consoleSandbox(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),getCurrentScope().update(en.initialScope);const nn=new ze(en);setCurrentClient(nn),initializeClient(nn)}function setCurrentClient(ze){const tn=getCurrentHub().getStackTop();tn.client=ze,tn.scope.setClient(ze)}function initializeClient(ze){ze.init?ze.init():ze.setupIntegrations&&ze.setupIntegrations()}const DEFAULT_TRANSPORT_BUFFER_SIZE=30;function createTransport(ze,en,tn=makePromiseBuffer(ze.bufferSize||DEFAULT_TRANSPORT_BUFFER_SIZE)){let nn={};const rn=an=>tn.drain(an);function sn(an){const cn=[];if(forEachEnvelopeItem(an,(fn,pn)=>{const hn=envelopeItemTypeToDataCategory(pn);if(isRateLimited(nn,hn)){const mn=getEventForEnvelopeItem(fn,pn);ze.recordDroppedEvent("ratelimit_backoff",hn,mn)}else cn.push(fn)}),cn.length===0)return resolvedSyncPromise();const un=createEnvelope(an[0],cn),ln=fn=>{forEachEnvelopeItem(un,(pn,hn)=>{const mn=getEventForEnvelopeItem(pn,hn);ze.recordDroppedEvent(fn,envelopeItemTypeToDataCategory(hn),mn)})},dn=()=>en({body:serializeEnvelope(un,ze.textEncoder)}).then(fn=>(fn.statusCode!==void 0&&(fn.statusCode<200||fn.statusCode>=300)&&DEBUG_BUILD$3&&logger.warn(`Sentry responded with status code ${fn.statusCode} to sent event.`),nn=updateRateLimits(nn,fn),fn),fn=>{throw ln("network_error"),fn});return tn.add(dn).then(fn=>fn,fn=>{if(fn instanceof SentryError)return DEBUG_BUILD$3&&logger.error("Skipped sending event because buffer is full."),ln("queue_overflow"),resolvedSyncPromise();throw fn})}return sn.__sentry__baseTransport__=!0,{send:sn,flush:rn}}function getEventForEnvelopeItem(ze,en){if(!(en!=="event"&&en!=="transaction"))return Array.isArray(ze)?ze[1]:void 0}function createSpanEnvelope(ze,en){const tn={sent_at:new Date().toISOString()};en&&(tn.dsn=dsnToString(en));const nn=ze.map(createSpanItem);return createEnvelope(tn,nn)}function createSpanItem(ze){return[{type:"span"},ze]}function isSentryRequestUrl(ze,en){const tn=en&&isHub(en)?en.getClient():en,nn=tn&&tn.getDsn(),rn=tn&&tn.getOptions().tunnel;return checkDsn(ze,nn)||checkTunnel(ze,rn)}function checkTunnel(ze,en){return en?removeTrailingSlash(ze)===removeTrailingSlash(en):!1}function checkDsn(ze,en){return en?ze.includes(en.host):!1}function removeTrailingSlash(ze){return ze[ze.length-1]==="/"?ze.slice(0,-1):ze}function isHub(ze){return ze.getClient!==void 0}function applySdkMetadata(ze,en,tn=[en],nn="npm"){const rn=ze._metadata||{};rn.sdk||(rn.sdk={name:`sentry.javascript.${en}`,packages:tn.map(sn=>({name:`${nn}:@sentry/${sn}`,version:SDK_VERSION})),version:SDK_VERSION}),ze._metadata=rn}const DEFAULT_IGNORE_ERRORS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],DEFAULT_IGNORE_TRANSACTIONS=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],INTEGRATION_NAME$7="InboundFilters",_inboundFiltersIntegration=(ze={})=>({name:INTEGRATION_NAME$7,setupOnce(){},processEvent(en,tn,nn){const rn=nn.getOptions(),sn=_mergeOptions(ze,rn);return _shouldDropEvent$1(en,sn)?null:en}}),inboundFiltersIntegration=_inboundFiltersIntegration;convertIntegrationFnToClass(INTEGRATION_NAME$7,inboundFiltersIntegration);function _mergeOptions(ze={},en={}){return{allowUrls:[...ze.allowUrls||[],...en.allowUrls||[]],denyUrls:[...ze.denyUrls||[],...en.denyUrls||[]],ignoreErrors:[...ze.ignoreErrors||[],...en.ignoreErrors||[],...ze.disableErrorDefaults?[]:DEFAULT_IGNORE_ERRORS],ignoreTransactions:[...ze.ignoreTransactions||[],...en.ignoreTransactions||[],...ze.disableTransactionDefaults?[]:DEFAULT_IGNORE_TRANSACTIONS],ignoreInternal:ze.ignoreInternal!==void 0?ze.ignoreInternal:!0}}function _shouldDropEvent$1(ze,en){return en.ignoreInternal&&_isSentryError(ze)?(DEBUG_BUILD$3&&logger.warn(`Event dropped due to being internal Sentry Error.
Event: ${getEventDescription(ze)}`),!0):_isIgnoredError(ze,en.ignoreErrors)?(DEBUG_BUILD$3&&logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${getEventDescription(ze)}`),!0):_isIgnoredTransaction(ze,en.ignoreTransactions)?(DEBUG_BUILD$3&&logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${getEventDescription(ze)}`),!0):_isDeniedUrl(ze,en.denyUrls)?(DEBUG_BUILD$3&&logger.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${getEventDescription(ze)}.
Url: ${_getEventFilterUrl(ze)}`),!0):_isAllowedUrl(ze,en.allowUrls)?!1:(DEBUG_BUILD$3&&logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${getEventDescription(ze)}.
Url: ${_getEventFilterUrl(ze)}`),!0)}function _isIgnoredError(ze,en){return ze.type||!en||!en.length?!1:_getPossibleEventMessages(ze).some(tn=>stringMatchesSomePattern(tn,en))}function _isIgnoredTransaction(ze,en){if(ze.type!=="transaction"||!en||!en.length)return!1;const tn=ze.transaction;return tn?stringMatchesSomePattern(tn,en):!1}function _isDeniedUrl(ze,en){if(!en||!en.length)return!1;const tn=_getEventFilterUrl(ze);return tn?stringMatchesSomePattern(tn,en):!1}function _isAllowedUrl(ze,en){if(!en||!en.length)return!0;const tn=_getEventFilterUrl(ze);return tn?stringMatchesSomePattern(tn,en):!0}function _getPossibleEventMessages(ze){const en=[];ze.message&&en.push(ze.message);let tn;try{tn=ze.exception.values[ze.exception.values.length-1]}catch{}return tn&&tn.value&&(en.push(tn.value),tn.type&&en.push(`${tn.type}: ${tn.value}`)),DEBUG_BUILD$3&&en.length===0&&logger.error(`Could not extract message for event ${getEventDescription(ze)}`),en}function _isSentryError(ze){try{return ze.exception.values[0].type==="SentryError"}catch{}return!1}function _getLastValidUrl(ze=[]){for(let en=ze.length-1;en>=0;en--){const tn=ze[en];if(tn&&tn.filename!=="<anonymous>"&&tn.filename!=="[native code]")return tn.filename||null}return null}function _getEventFilterUrl(ze){try{let en;try{en=ze.exception.values[0].stacktrace.frames}catch{}return en?_getLastValidUrl(en):null}catch{return DEBUG_BUILD$3&&logger.error(`Cannot extract url for event ${getEventDescription(ze)}`),null}}let originalFunctionToString;const INTEGRATION_NAME$6="FunctionToString",SETUP_CLIENTS=new WeakMap,_functionToStringIntegration=()=>({name:INTEGRATION_NAME$6,setupOnce(){originalFunctionToString=Function.prototype.toString;try{Function.prototype.toString=function(...ze){const en=getOriginalFunction(this),tn=SETUP_CLIENTS.has(getClient())&&en!==void 0?en:this;return originalFunctionToString.apply(tn,ze)}}catch{}},setup(ze){SETUP_CLIENTS.set(ze,!0)}}),functionToStringIntegration=_functionToStringIntegration;convertIntegrationFnToClass(INTEGRATION_NAME$6,functionToStringIntegration);const DEBUG_BUILD$2=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,WINDOW$2=GLOBAL_OBJ;function registerBackgroundTabDetection(){WINDOW$2&&WINDOW$2.document?WINDOW$2.document.addEventListener("visibilitychange",()=>{const ze=getActiveTransaction();if(WINDOW$2.document.hidden&&ze){const en="cancelled",{op:tn,status:nn}=spanToJSON(ze);DEBUG_BUILD$2&&logger.log(`[Tracing] Transaction: ${en} -> since tab moved to the background, op: ${tn}`),nn||ze.setStatus(en),ze.setTag("visibilitychange","document.hidden"),ze.end()}}):DEBUG_BUILD$2&&logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const bindReporter=(ze,en,tn)=>{let nn,rn;return sn=>{en.value>=0&&(sn||tn)&&(rn=en.value-(nn||0),(rn||nn===void 0)&&(nn=en.value,en.delta=rn,ze(en)))}},generateUniqueID=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,getNavigationEntryFromPerformanceTiming=()=>{const ze=WINDOW$2.performance.timing,en=WINDOW$2.performance.navigation.type,tn={entryType:"navigation",startTime:0,type:en==2?"back_forward":en===1?"reload":"navigate"};for(const nn in ze)nn!=="navigationStart"&&nn!=="toJSON"&&(tn[nn]=Math.max(ze[nn]-ze.navigationStart,0));return tn},getNavigationEntry=()=>WINDOW$2.__WEB_VITALS_POLYFILL__?WINDOW$2.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||getNavigationEntryFromPerformanceTiming()):WINDOW$2.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],getActivationStart=()=>{const ze=getNavigationEntry();return ze&&ze.activationStart||0},initMetric=(ze,en)=>{const tn=getNavigationEntry();let nn="navigate";return tn&&(WINDOW$2.document.prerendering||getActivationStart()>0?nn="prerender":nn=tn.type.replace(/_/g,"-")),{name:ze,value:typeof en>"u"?-1:en,rating:"good",delta:0,entries:[],id:generateUniqueID(),navigationType:nn}},observe=(ze,en,tn)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(ze)){const nn=new PerformanceObserver(rn=>{en(rn.getEntries())});return nn.observe(Object.assign({type:ze,buffered:!0},tn||{})),nn}}catch{}},onHidden=(ze,en)=>{const tn=nn=>{(nn.type==="pagehide"||WINDOW$2.document.visibilityState==="hidden")&&(ze(nn),en&&(removeEventListener("visibilitychange",tn,!0),removeEventListener("pagehide",tn,!0)))};addEventListener("visibilitychange",tn,!0),addEventListener("pagehide",tn,!0)},onCLS=ze=>{const en=initMetric("CLS",0);let tn,nn=0,rn=[];const sn=cn=>{cn.forEach(un=>{if(!un.hadRecentInput){const ln=rn[0],dn=rn[rn.length-1];nn&&rn.length!==0&&un.startTime-dn.startTime<1e3&&un.startTime-ln.startTime<5e3?(nn+=un.value,rn.push(un)):(nn=un.value,rn=[un]),nn>en.value&&(en.value=nn,en.entries=rn,tn&&tn())}})},an=observe("layout-shift",sn);if(an){tn=bindReporter(ze,en);const cn=()=>{sn(an.takeRecords()),tn(!0)};return onHidden(cn),cn}};let firstHiddenTime=-1;const initHiddenTime=()=>WINDOW$2.document.visibilityState==="hidden"&&!WINDOW$2.document.prerendering?0:1/0,trackChanges=()=>{onHidden(({timeStamp:ze})=>{firstHiddenTime=ze},!0)},getVisibilityWatcher=()=>(firstHiddenTime<0&&(firstHiddenTime=initHiddenTime(),trackChanges()),{get firstHiddenTime(){return firstHiddenTime}}),onFID=ze=>{const en=getVisibilityWatcher(),tn=initMetric("FID");let nn;const rn=cn=>{cn.startTime<en.firstHiddenTime&&(tn.value=cn.processingStart-cn.startTime,tn.entries.push(cn),nn(!0))},sn=cn=>{cn.forEach(rn)},an=observe("first-input",sn);nn=bindReporter(ze,tn),an&&onHidden(()=>{sn(an.takeRecords()),an.disconnect()},!0)};let interactionCountEstimate=0,minKnownInteractionId=1/0,maxKnownInteractionId=0;const updateEstimate=ze=>{ze.forEach(en=>{en.interactionId&&(minKnownInteractionId=Math.min(minKnownInteractionId,en.interactionId),maxKnownInteractionId=Math.max(maxKnownInteractionId,en.interactionId),interactionCountEstimate=maxKnownInteractionId?(maxKnownInteractionId-minKnownInteractionId)/7+1:0)})};let po;const getInteractionCount=()=>po?interactionCountEstimate:performance.interactionCount||0,initInteractionCountPolyfill=()=>{"interactionCount"in performance||po||(po=observe("event",updateEstimate,{type:"event",buffered:!0,durationThreshold:0}))},getInteractionCountForNavigation=()=>getInteractionCount(),MAX_INTERACTIONS_TO_CONSIDER=10,longestInteractionList=[],longestInteractionMap={},processEntry=ze=>{const en=longestInteractionList[longestInteractionList.length-1],tn=longestInteractionMap[ze.interactionId];if(tn||longestInteractionList.length<MAX_INTERACTIONS_TO_CONSIDER||ze.duration>en.latency){if(tn)tn.entries.push(ze),tn.latency=Math.max(tn.latency,ze.duration);else{const nn={id:ze.interactionId,latency:ze.duration,entries:[ze]};longestInteractionMap[nn.id]=nn,longestInteractionList.push(nn)}longestInteractionList.sort((nn,rn)=>rn.latency-nn.latency),longestInteractionList.splice(MAX_INTERACTIONS_TO_CONSIDER).forEach(nn=>{delete longestInteractionMap[nn.id]})}},estimateP98LongestInteraction=()=>{const ze=Math.min(longestInteractionList.length-1,Math.floor(getInteractionCountForNavigation()/50));return longestInteractionList[ze]},onINP=(ze,en)=>{en=en||{},initInteractionCountPolyfill();const tn=initMetric("INP");let nn;const rn=an=>{an.forEach(un=>{un.interactionId&&processEntry(un),un.entryType==="first-input"&&!longestInteractionList.some(dn=>dn.entries.some(fn=>un.duration===fn.duration&&un.startTime===fn.startTime))&&processEntry(un)});const cn=estimateP98LongestInteraction();cn&&cn.latency!==tn.value&&(tn.value=cn.latency,tn.entries=cn.entries,nn())},sn=observe("event",rn,{durationThreshold:en.durationThreshold||40});nn=bindReporter(ze,tn,en.reportAllChanges),sn&&(sn.observe({type:"first-input",buffered:!0}),onHidden(()=>{rn(sn.takeRecords()),tn.value<0&&getInteractionCountForNavigation()>0&&(tn.value=0,tn.entries=[]),nn(!0)}))},reportedMetricIDs={},onLCP=ze=>{const en=getVisibilityWatcher(),tn=initMetric("LCP");let nn;const rn=an=>{const cn=an[an.length-1];if(cn){const un=Math.max(cn.startTime-getActivationStart(),0);un<en.firstHiddenTime&&(tn.value=un,tn.entries=[cn],nn())}},sn=observe("largest-contentful-paint",rn);if(sn){nn=bindReporter(ze,tn);const an=()=>{reportedMetricIDs[tn.id]||(rn(sn.takeRecords()),sn.disconnect(),reportedMetricIDs[tn.id]=!0,nn(!0))};return["keydown","click"].forEach(cn=>{addEventListener(cn,an,{once:!0,capture:!0})}),onHidden(an,!0),an}},whenReady=ze=>{WINDOW$2.document&&(WINDOW$2.document.prerendering?addEventListener("prerenderingchange",()=>whenReady(ze),!0):WINDOW$2.document.readyState!=="complete"?addEventListener("load",()=>whenReady(ze),!0):setTimeout(ze,0))},onTTFB=(ze,en)=>{en=en||{};const tn=initMetric("TTFB"),nn=bindReporter(ze,tn,en.reportAllChanges);whenReady(()=>{const rn=getNavigationEntry();if(rn){if(tn.value=Math.max(rn.responseStart-getActivationStart(),0),tn.value<0||tn.value>performance.now())return;tn.entries=[rn],nn(!0)}})},handlers$1={},instrumented={};let _previousCls,_previousFid,_previousLcp,_previousTtfb,_previousInp;function addClsInstrumentationHandler(ze,en=!1){return addMetricObserver("cls",ze,instrumentCls,_previousCls,en)}function addLcpInstrumentationHandler(ze,en=!1){return addMetricObserver("lcp",ze,instrumentLcp,_previousLcp,en)}function addTtfbInstrumentationHandler(ze){return addMetricObserver("ttfb",ze,instrumentTtfb,_previousTtfb)}function addFidInstrumentationHandler(ze){return addMetricObserver("fid",ze,instrumentFid,_previousFid)}function addInpInstrumentationHandler(ze){return addMetricObserver("inp",ze,instrumentInp,_previousInp)}function addPerformanceInstrumentationHandler(ze,en){return addHandler(ze,en),instrumented[ze]||(instrumentPerformanceObserver(ze),instrumented[ze]=!0),getCleanupCallback(ze,en)}function triggerHandlers(ze,en){const tn=handlers$1[ze];if(!(!tn||!tn.length))for(const nn of tn)try{nn(en)}catch(rn){DEBUG_BUILD$2&&logger.error(`Error while triggering instrumentation handler.
Type: ${ze}
Name: ${getFunctionName(nn)}
Error:`,rn)}}function instrumentCls(){return onCLS(ze=>{triggerHandlers("cls",{metric:ze}),_previousCls=ze})}function instrumentFid(){return onFID(ze=>{triggerHandlers("fid",{metric:ze}),_previousFid=ze})}function instrumentLcp(){return onLCP(ze=>{triggerHandlers("lcp",{metric:ze}),_previousLcp=ze})}function instrumentTtfb(){return onTTFB(ze=>{triggerHandlers("ttfb",{metric:ze}),_previousTtfb=ze})}function instrumentInp(){return onINP(ze=>{triggerHandlers("inp",{metric:ze}),_previousInp=ze})}function addMetricObserver(ze,en,tn,nn,rn=!1){addHandler(ze,en);let sn;return instrumented[ze]||(sn=tn(),instrumented[ze]=!0),nn&&en({metric:nn}),getCleanupCallback(ze,en,rn?sn:void 0)}function instrumentPerformanceObserver(ze){const en={};ze==="event"&&(en.durationThreshold=0),observe(ze,tn=>{triggerHandlers(ze,{entries:tn})},en)}function addHandler(ze,en){handlers$1[ze]=handlers$1[ze]||[],handlers$1[ze].push(en)}function getCleanupCallback(ze,en,tn){return()=>{tn&&tn();const nn=handlers$1[ze];if(!nn)return;const rn=nn.indexOf(en);rn!==-1&&nn.splice(rn,1)}}function isMeasurementValue(ze){return typeof ze=="number"&&isFinite(ze)}function _startChild(ze,{startTimestamp:en,...tn}){return en&&ze.startTimestamp>en&&(ze.startTimestamp=en),ze.startChild({startTimestamp:en,...tn})}const MAX_INT_AS_BYTES=2147483647;function msToSec(ze){return ze/1e3}function getBrowserPerformanceAPI(){return WINDOW$2&&WINDOW$2.addEventListener&&WINDOW$2.performance}let _performanceCursor=0,_measurements={},_lcpEntry,_clsEntry;function startTrackingWebVitals(){const ze=getBrowserPerformanceAPI();if(ze&&browserPerformanceTimeOrigin){ze.mark&&WINDOW$2.performance.mark("sentry-tracing-init");const en=_trackFID(),tn=_trackCLS(),nn=_trackLCP(),rn=_trackTtfb();return()=>{en(),tn(),nn(),rn()}}return()=>{}}function startTrackingLongTasks(){addPerformanceInstrumentationHandler("longtask",({entries:ze})=>{for(const en of ze){const tn=getActiveTransaction();if(!tn)return;const nn=msToSec(browserPerformanceTimeOrigin+en.startTime),rn=msToSec(en.duration);tn.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:nn,endTimestamp:nn+rn})}})}function startTrackingInteractions(){addPerformanceInstrumentationHandler("event",({entries:ze})=>{for(const en of ze){const tn=getActiveTransaction();if(!tn)return;if(en.name==="click"){const nn=msToSec(browserPerformanceTimeOrigin+en.startTime),rn=msToSec(en.duration),sn={description:htmlTreeAsString(en.target),op:`ui.interaction.${en.name}`,origin:"auto.ui.browser.metrics",startTimestamp:nn,endTimestamp:nn+rn},an=getComponentName(en.target);an&&(sn.attributes={"ui.component_name":an}),tn.startChild(sn)}}})}function startTrackingINP(ze){if(getBrowserPerformanceAPI()&&browserPerformanceTimeOrigin){const tn=_trackINP(ze);return()=>{tn()}}return()=>{}}function _trackCLS(){return addClsInstrumentationHandler(({metric:ze})=>{const en=ze.entries[ze.entries.length-1];en&&(DEBUG_BUILD$2&&logger.log("[Measurements] Adding CLS"),_measurements.cls={value:ze.value,unit:""},_clsEntry=en)},!0)}function _trackLCP(){return addLcpInstrumentationHandler(({metric:ze})=>{const en=ze.entries[ze.entries.length-1];en&&(DEBUG_BUILD$2&&logger.log("[Measurements] Adding LCP"),_measurements.lcp={value:ze.value,unit:"millisecond"},_lcpEntry=en)},!0)}function _trackFID(){return addFidInstrumentationHandler(({metric:ze})=>{const en=ze.entries[ze.entries.length-1];if(!en)return;const tn=msToSec(browserPerformanceTimeOrigin),nn=msToSec(en.startTime);DEBUG_BUILD$2&&logger.log("[Measurements] Adding FID"),_measurements.fid={value:ze.value,unit:"millisecond"},_measurements["mark.fid"]={value:tn+nn,unit:"second"}})}function _trackTtfb(){return addTtfbInstrumentationHandler(({metric:ze})=>{ze.entries[ze.entries.length-1]&&(DEBUG_BUILD$2&&logger.log("[Measurements] Adding TTFB"),_measurements.ttfb={value:ze.value,unit:"millisecond"})})}const INP_ENTRY_MAP={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function _trackINP(ze){return addInpInstrumentationHandler(({metric:en})=>{if(en.value===void 0)return;const tn=en.entries.find(En=>En.duration===en.value&&INP_ENTRY_MAP[En.name]!==void 0),nn=getClient();if(!tn||!nn)return;const rn=INP_ENTRY_MAP[tn.name],sn=nn.getOptions(),an=msToSec(browserPerformanceTimeOrigin+tn.startTime),cn=msToSec(en.value),un=tn.interactionId!==void 0?ze[tn.interactionId]:void 0;if(un===void 0)return;const{routeName:ln,parentContext:dn,activeTransaction:fn,user:pn,replayId:hn}=un,mn=pn!==void 0?pn.email||pn.id||pn.ip_address:void 0,gn=fn!==void 0?fn.getProfileId():void 0,Sn=new Span({startTimestamp:an,endTimestamp:an+cn,op:`ui.interaction.${rn}`,name:htmlTreeAsString(tn.target),attributes:{release:sn.release,environment:sn.environment,transaction:ln,...mn!==void 0&&mn!==""?{user:mn}:{},...gn!==void 0?{profile_id:gn}:{},...hn!==void 0?{replay_id:hn}:{}},exclusiveTime:en.value,measurements:{inp:{value:en.value,unit:"millisecond"}}}),_n=getSampleRate(dn,sn);if(_n&&Math.random()<_n){const En=Sn?createSpanEnvelope([Sn],nn.getDsn()):void 0,vn=nn&&nn.getTransport();vn&&En&&vn.send(En).then(null,bn=>{DEBUG_BUILD$2&&logger.error("Error while sending interaction:",bn)});return}})}function addPerformanceEntries(ze){const en=getBrowserPerformanceAPI();if(!en||!WINDOW$2.performance.getEntries||!browserPerformanceTimeOrigin)return;DEBUG_BUILD$2&&logger.log("[Tracing] Adding & adjusting spans using Performance API");const tn=msToSec(browserPerformanceTimeOrigin),nn=en.getEntries(),{op:rn,start_timestamp:sn}=spanToJSON(ze);if(nn.slice(_performanceCursor).forEach(an=>{const cn=msToSec(an.startTime),un=msToSec(an.duration);if(!(ze.op==="navigation"&&sn&&tn+cn<sn))switch(an.entryType){case"navigation":{_addNavigationSpans(ze,an,tn);break}case"mark":case"paint":case"measure":{_addMeasureSpans(ze,an,cn,un,tn);const ln=getVisibilityWatcher(),dn=an.startTime<ln.firstHiddenTime;an.name==="first-paint"&&dn&&(DEBUG_BUILD$2&&logger.log("[Measurements] Adding FP"),_measurements.fp={value:an.startTime,unit:"millisecond"}),an.name==="first-contentful-paint"&&dn&&(DEBUG_BUILD$2&&logger.log("[Measurements] Adding FCP"),_measurements.fcp={value:an.startTime,unit:"millisecond"});break}case"resource":{_addResourceSpans(ze,an,an.name,cn,un,tn);break}}}),_performanceCursor=Math.max(nn.length-1,0),_trackNavigator(ze),rn==="pageload"){_addTtfbRequestTimeToMeasurements(_measurements),["fcp","fp","lcp"].forEach(cn=>{if(!_measurements[cn]||!sn||tn>=sn)return;const un=_measurements[cn].value,ln=tn+msToSec(un),dn=Math.abs((ln-sn)*1e3),fn=dn-un;DEBUG_BUILD$2&&logger.log(`[Measurements] Normalized ${cn} from ${un} to ${dn} (${fn})`),_measurements[cn].value=dn});const an=_measurements["mark.fid"];an&&_measurements.fid&&(_startChild(ze,{description:"first input delay",endTimestamp:an.value+msToSec(_measurements.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:an.value}),delete _measurements["mark.fid"]),"fcp"in _measurements||delete _measurements.cls,Object.keys(_measurements).forEach(cn=>{setMeasurement(cn,_measurements[cn].value,_measurements[cn].unit)}),_tagMetricInfo(ze)}_lcpEntry=void 0,_clsEntry=void 0,_measurements={}}function _addMeasureSpans(ze,en,tn,nn,rn){const sn=rn+tn,an=sn+nn;return _startChild(ze,{description:en.name,endTimestamp:an,op:en.entryType,origin:"auto.resource.browser.metrics",startTimestamp:sn}),sn}function _addNavigationSpans(ze,en,tn){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(nn=>{_addPerformanceNavigationTiming(ze,en,nn,tn)}),_addPerformanceNavigationTiming(ze,en,"secureConnection",tn,"TLS/SSL","connectEnd"),_addPerformanceNavigationTiming(ze,en,"fetch",tn,"cache","domainLookupStart"),_addPerformanceNavigationTiming(ze,en,"domainLookup",tn,"DNS"),_addRequest(ze,en,tn)}function _addPerformanceNavigationTiming(ze,en,tn,nn,rn,sn){const an=sn?en[sn]:en[`${tn}End`],cn=en[`${tn}Start`];!cn||!an||_startChild(ze,{op:"browser",origin:"auto.browser.browser.metrics",description:rn||tn,startTimestamp:nn+msToSec(cn),endTimestamp:nn+msToSec(an)})}function _addRequest(ze,en,tn){en.responseEnd&&(_startChild(ze,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:tn+msToSec(en.requestStart),endTimestamp:tn+msToSec(en.responseEnd)}),_startChild(ze,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:tn+msToSec(en.responseStart),endTimestamp:tn+msToSec(en.responseEnd)}))}function _addResourceSpans(ze,en,tn,nn,rn,sn){if(en.initiatorType==="xmlhttprequest"||en.initiatorType==="fetch")return;const an=parseUrl(tn),cn={};setResourceEntrySizeData(cn,en,"transferSize","http.response_transfer_size"),setResourceEntrySizeData(cn,en,"encodedBodySize","http.response_content_length"),setResourceEntrySizeData(cn,en,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in en&&(cn["resource.render_blocking_status"]=en.renderBlockingStatus),an.protocol&&(cn["url.scheme"]=an.protocol.split(":").pop()),an.host&&(cn["server.address"]=an.host),cn["url.same_origin"]=tn.includes(WINDOW$2.location.origin);const un=sn+nn,ln=un+rn;_startChild(ze,{description:tn.replace(WINDOW$2.location.origin,""),endTimestamp:ln,op:en.initiatorType?`resource.${en.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:un,data:cn})}function _trackNavigator(ze){const en=WINDOW$2.navigator;if(!en)return;const tn=en.connection;tn&&(tn.effectiveType&&ze.setTag("effectiveConnectionType",tn.effectiveType),tn.type&&ze.setTag("connectionType",tn.type),isMeasurementValue(tn.rtt)&&(_measurements["connection.rtt"]={value:tn.rtt,unit:"millisecond"})),isMeasurementValue(en.deviceMemory)&&ze.setTag("deviceMemory",`${en.deviceMemory} GB`),isMeasurementValue(en.hardwareConcurrency)&&ze.setTag("hardwareConcurrency",String(en.hardwareConcurrency))}function _tagMetricInfo(ze){_lcpEntry&&(DEBUG_BUILD$2&&logger.log("[Measurements] Adding LCP Data"),_lcpEntry.element&&ze.setTag("lcp.element",htmlTreeAsString(_lcpEntry.element)),_lcpEntry.id&&ze.setTag("lcp.id",_lcpEntry.id),_lcpEntry.url&&ze.setTag("lcp.url",_lcpEntry.url.trim().slice(0,200)),ze.setTag("lcp.size",_lcpEntry.size)),_clsEntry&&_clsEntry.sources&&(DEBUG_BUILD$2&&logger.log("[Measurements] Adding CLS Data"),_clsEntry.sources.forEach((en,tn)=>ze.setTag(`cls.source.${tn+1}`,htmlTreeAsString(en.node))))}function setResourceEntrySizeData(ze,en,tn,nn){const rn=en[tn];rn!=null&&rn<MAX_INT_AS_BYTES&&(ze[nn]=rn)}function _addTtfbRequestTimeToMeasurements(ze){const en=getNavigationEntry();if(!en)return;const{responseStart:tn,requestStart:nn}=en;nn<=tn&&(DEBUG_BUILD$2&&logger.log("[Measurements] Adding TTFB Request Time"),ze["ttfb.requestTime"]={value:tn-nn,unit:"millisecond"})}function getSampleRate(ze,en){if(!hasTracingEnabled(en))return!1;let tn;return ze!==void 0&&typeof en.tracesSampler=="function"?tn=en.tracesSampler({transactionContext:ze,name:ze.name,parentSampled:ze.parentSampled,attributes:{...ze.data,...ze.attributes},location:WINDOW$2.location}):ze!==void 0&&ze.sampled!==void 0?tn=ze.sampled:typeof en.tracesSampleRate<"u"?tn=en.tracesSampleRate:tn=1,isValidSampleRate(tn)?tn:(DEBUG_BUILD$2&&logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),!1)}function instrumentFetchRequest(ze,en,tn,nn,rn="auto.http.browser"){if(!hasTracingEnabled()||!ze.fetchData)return;const sn=en(ze.fetchData.url);if(ze.endTimestamp&&sn){const fn=ze.fetchData.__span;if(!fn)return;const pn=nn[fn];if(pn){if(ze.response){setHttpStatus(pn,ze.response.status);const hn=ze.response&&ze.response.headers&&ze.response.headers.get("content-length");if(hn){const mn=parseInt(hn);mn>0&&pn.setAttribute("http.response_content_length",mn)}}else ze.error&&pn.setStatus("internal_error");pn.end(),delete nn[fn]}return}const an=getCurrentScope(),cn=getClient(),{method:un,url:ln}=ze.fetchData,dn=sn?startInactiveSpan({name:`${un} ${ln}`,onlyIfParent:!0,attributes:{url:ln,type:"fetch","http.method":un,[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:rn},op:"http.client"}):void 0;if(dn&&(ze.fetchData.__span=dn.spanContext().spanId,nn[dn.spanContext().spanId]=dn),tn(ze.fetchData.url)&&cn){const fn=ze.args[0];ze.args[1]=ze.args[1]||{};const pn=ze.args[1];pn.headers=addTracingHeadersToFetchRequest(fn,cn,an,pn,dn)}return dn}function addTracingHeadersToFetchRequest(ze,en,tn,nn,rn){const sn=rn||tn.getSpan(),an=getIsolationScope(),{traceId:cn,spanId:un,sampled:ln,dsc:dn}={...an.getPropagationContext(),...tn.getPropagationContext()},fn=sn?spanToTraceHeader(sn):generateSentryTraceHeader(cn,un,ln),pn=dynamicSamplingContextToSentryBaggageHeader(dn||(sn?getDynamicSamplingContextFromSpan(sn):getDynamicSamplingContextFromClient(cn,en,tn))),hn=nn.headers||(typeof Request<"u"&&isInstanceOf(ze,Request)?ze.headers:void 0);if(hn)if(typeof Headers<"u"&&isInstanceOf(hn,Headers)){const mn=new Headers(hn);return mn.append("sentry-trace",fn),pn&&mn.append(BAGGAGE_HEADER_NAME,pn),mn}else if(Array.isArray(hn)){const mn=[...hn,["sentry-trace",fn]];return pn&&mn.push([BAGGAGE_HEADER_NAME,pn]),mn}else{const mn="baggage"in hn?hn.baggage:void 0,gn=[];return Array.isArray(mn)?gn.push(...mn):mn&&gn.push(mn),pn&&gn.push(pn),{...hn,"sentry-trace":fn,baggage:gn.length>0?gn.join(","):void 0}}else return{"sentry-trace":fn,baggage:pn}}const DEFAULT_TRACE_PROPAGATION_TARGETS=["localhost",/^\/(?!\/)/],defaultRequestInstrumentationOptions={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:DEFAULT_TRACE_PROPAGATION_TARGETS,tracePropagationTargets:DEFAULT_TRACE_PROPAGATION_TARGETS};function instrumentOutgoingRequests(ze){const{traceFetch:en,traceXHR:tn,tracePropagationTargets:nn,tracingOrigins:rn,shouldCreateSpanForRequest:sn,enableHTTPTimings:an}={traceFetch:defaultRequestInstrumentationOptions.traceFetch,traceXHR:defaultRequestInstrumentationOptions.traceXHR,...ze},cn=typeof sn=="function"?sn:dn=>!0,un=dn=>shouldAttachHeaders(dn,nn||rn),ln={};en&&addFetchInstrumentationHandler(dn=>{const fn=instrumentFetchRequest(dn,cn,un,ln);an&&fn&&addHTTPTimings(fn)}),tn&&addXhrInstrumentationHandler(dn=>{const fn=xhrCallback(dn,cn,un,ln);an&&fn&&addHTTPTimings(fn)})}function isPerformanceResourceTiming(ze){return ze.entryType==="resource"&&"initiatorType"in ze&&typeof ze.nextHopProtocol=="string"&&(ze.initiatorType==="fetch"||ze.initiatorType==="xmlhttprequest")}function addHTTPTimings(ze){const{url:en}=spanToJSON(ze).data||{};if(!en||typeof en!="string")return;const tn=addPerformanceInstrumentationHandler("resource",({entries:nn})=>{nn.forEach(rn=>{isPerformanceResourceTiming(rn)&&rn.name.endsWith(en)&&(resourceTimingEntryToSpanData(rn).forEach(an=>ze.setAttribute(...an)),setTimeout(tn))})})}function extractNetworkProtocol(ze){let en="unknown",tn="unknown",nn="";for(const rn of ze){if(rn==="/"){[en,tn]=ze.split("/");break}if(!isNaN(Number(rn))){en=nn==="h"?"http":nn,tn=ze.split(nn)[1];break}nn+=rn}return nn===ze&&(en=nn),{name:en,version:tn}}function getAbsoluteTime$1(ze=0){return((browserPerformanceTimeOrigin||performance.timeOrigin)+ze)/1e3}function resourceTimingEntryToSpanData(ze){const{name:en,version:tn}=extractNetworkProtocol(ze.nextHopProtocol),nn=[];return nn.push(["network.protocol.version",tn],["network.protocol.name",en]),browserPerformanceTimeOrigin?[...nn,["http.request.redirect_start",getAbsoluteTime$1(ze.redirectStart)],["http.request.fetch_start",getAbsoluteTime$1(ze.fetchStart)],["http.request.domain_lookup_start",getAbsoluteTime$1(ze.domainLookupStart)],["http.request.domain_lookup_end",getAbsoluteTime$1(ze.domainLookupEnd)],["http.request.connect_start",getAbsoluteTime$1(ze.connectStart)],["http.request.secure_connection_start",getAbsoluteTime$1(ze.secureConnectionStart)],["http.request.connection_end",getAbsoluteTime$1(ze.connectEnd)],["http.request.request_start",getAbsoluteTime$1(ze.requestStart)],["http.request.response_start",getAbsoluteTime$1(ze.responseStart)],["http.request.response_end",getAbsoluteTime$1(ze.responseEnd)]]:nn}function shouldAttachHeaders(ze,en){return stringMatchesSomePattern(ze,en||DEFAULT_TRACE_PROPAGATION_TARGETS)}function xhrCallback(ze,en,tn,nn){const rn=ze.xhr,sn=rn&&rn[SENTRY_XHR_DATA_KEY];if(!hasTracingEnabled()||!rn||rn.__sentry_own_request__||!sn)return;const an=en(sn.url);if(ze.endTimestamp&&an){const fn=rn.__sentry_xhr_span_id__;if(!fn)return;const pn=nn[fn];pn&&sn.status_code!==void 0&&(setHttpStatus(pn,sn.status_code),pn.end(),delete nn[fn]);return}const cn=getCurrentScope(),un=getIsolationScope(),ln=an?startInactiveSpan({name:`${sn.method} ${sn.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":sn.method,url:sn.url,[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser"},op:"http.client"}):void 0;ln&&(rn.__sentry_xhr_span_id__=ln.spanContext().spanId,nn[rn.__sentry_xhr_span_id__]=ln);const dn=getClient();if(rn.setRequestHeader&&tn(sn.url)&&dn){const{traceId:fn,spanId:pn,sampled:hn,dsc:mn}={...un.getPropagationContext(),...cn.getPropagationContext()},gn=ln?spanToTraceHeader(ln):generateSentryTraceHeader(fn,pn,hn),Sn=dynamicSamplingContextToSentryBaggageHeader(mn||(ln?getDynamicSamplingContextFromSpan(ln):getDynamicSamplingContextFromClient(fn,dn,cn)));setHeaderOnXhr(rn,gn,Sn)}return ln}function setHeaderOnXhr(ze,en,tn){try{ze.setRequestHeader("sentry-trace",en),tn&&ze.setRequestHeader(BAGGAGE_HEADER_NAME,tn)}catch{}}function instrumentRoutingWithDefaults(ze,en=!0,tn=!0){if(!WINDOW$2||!WINDOW$2.location){DEBUG_BUILD$2&&logger.warn("Could not initialize routing instrumentation due to invalid location");return}let nn=WINDOW$2.location.href,rn;en&&(rn=ze({name:WINDOW$2.location.pathname,startTimestamp:browserPerformanceTimeOrigin?browserPerformanceTimeOrigin/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),tn&&addHistoryInstrumentationHandler(({to:sn,from:an})=>{if(an===void 0&&nn&&nn.indexOf(sn)!==-1){nn=void 0;return}an!==sn&&(nn=void 0,rn&&(DEBUG_BUILD$2&&logger.log(`[Tracing] Finishing current transaction with op: ${rn.op}`),rn.end()),rn=ze({name:WINDOW$2.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const BROWSER_TRACING_INTEGRATION_ID$1="BrowserTracing",DEFAULT_BROWSER_TRACING_OPTIONS$1={...TRACING_DEFAULTS,markBackgroundTransactions:!0,routingInstrumentation:instrumentRoutingWithDefaults,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,_experiments:{},...defaultRequestInstrumentationOptions},MAX_INTERACTIONS$1=10;class BrowserTracing{constructor(en){this.name=BROWSER_TRACING_INTEGRATION_ID$1,this._hasSetTracePropagationTargets=!1,addTracingExtensions(),DEBUG_BUILD$2&&(this._hasSetTracePropagationTargets=!!(en&&(en.tracePropagationTargets||en.tracingOrigins))),this.options={...DEFAULT_BROWSER_TRACING_OPTIONS$1,...en},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),en&&!en.tracePropagationTargets&&en.tracingOrigins&&(this.options.tracePropagationTargets=en.tracingOrigins),this._collectWebVitals=startTrackingWebVitals(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&startTrackingINP(this._interactionIdToRouteNameMapping),this.options.enableLongTask&&startTrackingLongTasks(),this.options._experiments.enableInteractions&&startTrackingInteractions(),this._latestRoute={name:void 0,context:void 0}}setupOnce(en,tn){this._getCurrentHub=tn;const rn=tn().getClient(),sn=rn&&rn.getOptions(),{routingInstrumentation:an,startTransactionOnLocationChange:cn,startTransactionOnPageLoad:un,markBackgroundTransactions:ln,traceFetch:dn,traceXHR:fn,shouldCreateSpanForRequest:pn,enableHTTPTimings:hn,_experiments:mn}=this.options,gn=sn&&sn.tracePropagationTargets,Sn=gn||this.options.tracePropagationTargets;DEBUG_BUILD$2&&this._hasSetTracePropagationTargets&&gn&&logger.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),an(_n=>{const En=this._createRouteTransaction(_n);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(En,_n,tn),En},un,cn),ln&&registerBackgroundTabDetection(),mn.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),instrumentOutgoingRequests({traceFetch:dn,traceXHR:fn,tracePropagationTargets:Sn,shouldCreateSpanForRequest:pn,enableHTTPTimings:hn})}_createRouteTransaction(en){if(!this._getCurrentHub){DEBUG_BUILD$2&&logger.warn(`[Tracing] Did not create ${en.op} transaction because _getCurrentHub is invalid.`);return}const tn=this._getCurrentHub(),{beforeNavigate:nn,idleTimeout:rn,finalTimeout:sn,heartbeatInterval:an}=this.options,cn=en.op==="pageload";let un;if(cn){const hn=cn?getMetaContent$1("sentry-trace"):"",mn=cn?getMetaContent$1("baggage"):void 0,{traceId:gn,dsc:Sn,parentSpanId:_n,sampled:En}=propagationContextFromHeaders(hn,mn);un={traceId:gn,parentSpanId:_n,parentSampled:En,...en,metadata:{...en.metadata,dynamicSamplingContext:Sn},trimEnd:!0}}else un={trimEnd:!0,...en};const ln=typeof nn=="function"?nn(un):un,dn=ln===void 0?{...un,sampled:!1}:ln;dn.metadata=dn.name!==un.name?{...dn.metadata,source:"custom"}:dn.metadata,this._latestRoute.name=dn.name,this._latestRoute.context=dn,dn.sampled===!1&&DEBUG_BUILD$2&&logger.log(`[Tracing] Will not send ${dn.op} transaction because of beforeNavigate.`),DEBUG_BUILD$2&&logger.log(`[Tracing] Starting ${dn.op} transaction on scope`);const{location:fn}=WINDOW$2,pn=startIdleTransaction(tn,dn,rn,sn,!0,{location:fn},an,cn);return cn&&(WINDOW$2.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(WINDOW$2.document.readyState)&&pn.sendAutoFinishSignal()}),["interactive","complete"].includes(WINDOW$2.document.readyState)&&pn.sendAutoFinishSignal()),pn.registerBeforeFinishCallback(hn=>{this._collectWebVitals(),addPerformanceEntries(hn)}),pn}_registerInteractionListener(){let en;const tn=()=>{const{idleTimeout:nn,finalTimeout:rn,heartbeatInterval:sn}=this.options,an="ui.action.click",cn=getActiveTransaction();if(cn&&cn.op&&["navigation","pageload"].includes(cn.op)){DEBUG_BUILD$2&&logger.warn(`[Tracing] Did not create ${an} transaction because a pageload or navigation transaction is in progress.`);return}if(en&&(en.setFinishReason("interactionInterrupted"),en.end(),en=void 0),!this._getCurrentHub){DEBUG_BUILD$2&&logger.warn(`[Tracing] Did not create ${an} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRoute.name){DEBUG_BUILD$2&&logger.warn(`[Tracing] Did not create ${an} transaction because _latestRouteName is missing.`);return}const un=this._getCurrentHub(),{location:ln}=WINDOW$2,dn={name:this._latestRoute.name,op:an,trimEnd:!0,data:{[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:this._latestRoute.context?getSource$1(this._latestRoute.context):"url"}};en=startIdleTransaction(un,dn,nn,rn,!0,{location:ln},sn)};["click"].forEach(nn=>{addEventListener(nn,tn,{once:!1,capture:!0})})}_registerInpInteractionListener(){const en=({entries:tn})=>{const nn=getClient(),rn=nn!==void 0&&nn.getIntegrationByName!==void 0?nn.getIntegrationByName("Replay"):void 0,sn=rn!==void 0?rn.getReplayId():void 0,an=getActiveTransaction(),cn=getCurrentScope(),un=cn!==void 0?cn.getUser():void 0;tn.forEach(ln=>{if(isPerformanceEventTiming$1(ln)){const dn=ln.interactionId;if(dn===void 0)return;const fn=this._interactionIdToRouteNameMapping[dn],pn=ln.duration,hn=ln.startTime,mn=Object.keys(this._interactionIdToRouteNameMapping),gn=mn.length>0?mn.reduce((Sn,_n)=>this._interactionIdToRouteNameMapping[Sn].duration<this._interactionIdToRouteNameMapping[_n].duration?Sn:_n):void 0;if(ln.entryType==="first-input"&&mn.map(_n=>this._interactionIdToRouteNameMapping[_n]).some(_n=>_n.duration===pn&&_n.startTime===hn)||!dn)return;if(fn)fn.duration=Math.max(fn.duration,pn);else if(mn.length<MAX_INTERACTIONS$1||gn===void 0||pn>this._interactionIdToRouteNameMapping[gn].duration){const Sn=this._latestRoute.name,_n=this._latestRoute.context;Sn&&_n&&(gn&&Object.keys(this._interactionIdToRouteNameMapping).length>=MAX_INTERACTIONS$1&&delete this._interactionIdToRouteNameMapping[gn],this._interactionIdToRouteNameMapping[dn]={routeName:Sn,duration:pn,parentContext:_n,user:un,activeTransaction:an,replayId:sn,startTime:hn})}}})};addPerformanceInstrumentationHandler("event",en),addPerformanceInstrumentationHandler("first-input",en)}}function getMetaContent$1(ze){const en=getDomElement(`meta[name=${ze}]`);return en?en.getAttribute("content"):void 0}function getSource$1(ze){const en=ze.attributes&&ze.attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],tn=ze.data&&ze.data[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],nn=ze.metadata&&ze.metadata.source;return en||tn||nn}function isPerformanceEventTiming$1(ze){return"duration"in ze}const BROWSER_TRACING_INTEGRATION_ID="BrowserTracing",DEFAULT_BROWSER_TRACING_OPTIONS={...TRACING_DEFAULTS,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,_experiments:{},...defaultRequestInstrumentationOptions},browserTracingIntegration=(ze={})=>{const en=DEBUG_BUILD$2?!!(ze.tracePropagationTargets||ze.tracingOrigins):!1;addTracingExtensions(),!ze.tracePropagationTargets&&ze.tracingOrigins&&(ze.tracePropagationTargets=ze.tracingOrigins);const tn={...DEFAULT_BROWSER_TRACING_OPTIONS,...ze},nn=startTrackingWebVitals(),rn={};tn.enableInp&&startTrackingINP(rn),tn.enableLongTask&&startTrackingLongTasks(),tn._experiments.enableInteractions&&startTrackingInteractions();const sn={name:void 0,context:void 0};function an(cn){const un=getCurrentHub(),{beforeStartSpan:ln,idleTimeout:dn,finalTimeout:fn,heartbeatInterval:pn}=tn,hn=cn.op==="pageload";let mn;if(hn){const En=hn?getMetaContent("sentry-trace"):"",vn=hn?getMetaContent("baggage"):void 0,{traceId:bn,dsc:Nn,parentSpanId:Rn,sampled:yn}=propagationContextFromHeaders(En,vn);mn={traceId:bn,parentSpanId:Rn,parentSampled:yn,...cn,metadata:{...cn.metadata,dynamicSamplingContext:Nn},trimEnd:!0}}else mn={trimEnd:!0,...cn};const gn=ln?ln(mn):mn;gn.metadata=gn.name!==mn.name?{...gn.metadata,source:"custom"}:gn.metadata,sn.name=gn.name,sn.context=gn,gn.sampled===!1&&DEBUG_BUILD$2&&logger.log(`[Tracing] Will not send ${gn.op} transaction because of beforeNavigate.`),DEBUG_BUILD$2&&logger.log(`[Tracing] Starting ${gn.op} transaction on scope`);const{location:Sn}=WINDOW$2,_n=startIdleTransaction(un,gn,dn,fn,!0,{location:Sn},pn,hn);return hn&&WINDOW$2.document&&(WINDOW$2.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(WINDOW$2.document.readyState)&&_n.sendAutoFinishSignal()}),["interactive","complete"].includes(WINDOW$2.document.readyState)&&_n.sendAutoFinishSignal()),_n.registerBeforeFinishCallback(En=>{nn(),addPerformanceEntries(En)}),_n}return{name:BROWSER_TRACING_INTEGRATION_ID,setupOnce:()=>{},afterAllSetup(cn){const un=cn.getOptions(),{markBackgroundSpan:ln,traceFetch:dn,traceXHR:fn,shouldCreateSpanForRequest:pn,enableHTTPTimings:hn,_experiments:mn}=tn,gn=un&&un.tracePropagationTargets,Sn=gn||tn.tracePropagationTargets;DEBUG_BUILD$2&&en&&gn&&logger.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let _n,En=WINDOW$2.location&&WINDOW$2.location.href;if(cn.on&&(cn.on("startNavigationSpan",vn=>{_n&&(DEBUG_BUILD$2&&logger.log(`[Tracing] Finishing current transaction with op: ${spanToJSON(_n).op}`),_n.end()),_n=an({op:"navigation",...vn})}),cn.on("startPageLoadSpan",vn=>{_n&&(DEBUG_BUILD$2&&logger.log(`[Tracing] Finishing current transaction with op: ${spanToJSON(_n).op}`),_n.end()),_n=an({op:"pageload",...vn})})),tn.instrumentPageLoad&&cn.emit&&WINDOW$2.location){const vn={name:WINDOW$2.location.pathname,startTimestamp:browserPerformanceTimeOrigin?browserPerformanceTimeOrigin/1e3:void 0,origin:"auto.pageload.browser",attributes:{[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url"}};startBrowserTracingPageLoadSpan(cn,vn)}tn.instrumentNavigation&&cn.emit&&WINDOW$2.location&&addHistoryInstrumentationHandler(({to:vn,from:bn})=>{if(bn===void 0&&En&&En.indexOf(vn)!==-1){En=void 0;return}if(bn!==vn){En=void 0;const Nn={name:WINDOW$2.location.pathname,origin:"auto.navigation.browser",attributes:{[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url"}};startBrowserTracingNavigationSpan(cn,Nn)}}),ln&&registerBackgroundTabDetection(),mn.enableInteractions&&registerInteractionListener(tn,sn),tn.enableInp&&registerInpInteractionListener(rn,sn),instrumentOutgoingRequests({traceFetch:dn,traceXHR:fn,tracePropagationTargets:Sn,shouldCreateSpanForRequest:pn,enableHTTPTimings:hn})},options:tn}};function startBrowserTracingPageLoadSpan(ze,en){if(!ze.emit)return;ze.emit("startPageLoadSpan",en);const tn=getActiveSpan();return(tn&&spanToJSON(tn).op)==="pageload"?tn:void 0}function startBrowserTracingNavigationSpan(ze,en){if(!ze.emit)return;ze.emit("startNavigationSpan",en);const tn=getActiveSpan();return(tn&&spanToJSON(tn).op)==="navigation"?tn:void 0}function getMetaContent(ze){const en=getDomElement(`meta[name=${ze}]`);return en?en.getAttribute("content"):void 0}function registerInteractionListener(ze,en){let tn;const nn=()=>{const{idleTimeout:rn,finalTimeout:sn,heartbeatInterval:an}=ze,cn="ui.action.click",un=getActiveTransaction();if(un&&un.op&&["navigation","pageload"].includes(un.op)){DEBUG_BUILD$2&&logger.warn(`[Tracing] Did not create ${cn} transaction because a pageload or navigation transaction is in progress.`);return}if(tn&&(tn.setFinishReason("interactionInterrupted"),tn.end(),tn=void 0),!en.name){DEBUG_BUILD$2&&logger.warn(`[Tracing] Did not create ${cn} transaction because _latestRouteName is missing.`);return}const{location:ln}=WINDOW$2,dn={name:en.name,op:cn,trimEnd:!0,data:{[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:en.context?getSource(en.context):"url"}};tn=startIdleTransaction(getCurrentHub(),dn,rn,sn,!0,{location:ln},an)};["click"].forEach(rn=>{addEventListener(rn,nn,{once:!1,capture:!0})})}function isPerformanceEventTiming(ze){return"duration"in ze}const MAX_INTERACTIONS=10;function registerInpInteractionListener(ze,en){const tn=({entries:nn})=>{const rn=getClient(),sn=rn!==void 0&&rn.getIntegrationByName!==void 0?rn.getIntegrationByName("Replay"):void 0,an=sn!==void 0?sn.getReplayId():void 0,cn=getActiveTransaction(),un=getCurrentScope(),ln=un!==void 0?un.getUser():void 0;nn.forEach(dn=>{if(isPerformanceEventTiming(dn)){const fn=dn.interactionId;if(fn===void 0)return;const pn=ze[fn],hn=dn.duration,mn=dn.startTime,gn=Object.keys(ze),Sn=gn.length>0?gn.reduce((_n,En)=>ze[_n].duration<ze[En].duration?_n:En):void 0;if(dn.entryType==="first-input"&&gn.map(En=>ze[En]).some(En=>En.duration===hn&&En.startTime===mn)||!fn)return;if(pn)pn.duration=Math.max(pn.duration,hn);else if(gn.length<MAX_INTERACTIONS||Sn===void 0||hn>ze[Sn].duration){const _n=en.name,En=en.context;_n&&En&&(Sn&&Object.keys(ze).length>=MAX_INTERACTIONS&&delete ze[Sn],ze[fn]={routeName:_n,duration:hn,parentContext:En,user:ln,activeTransaction:cn,replayId:an,startTime:mn})}}})};addPerformanceInstrumentationHandler("event",tn),addPerformanceInstrumentationHandler("first-input",tn)}function getSource(ze){const en=ze.attributes&&ze.attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],tn=ze.data&&ze.data[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],nn=ze.metadata&&ze.metadata.source;return en||tn||nn}const WINDOW$1=GLOBAL_OBJ;let ignoreOnError=0;function shouldIgnoreOnError(){return ignoreOnError>0}function ignoreNextOnError(){ignoreOnError++,setTimeout(()=>{ignoreOnError--})}function wrap(ze,en={},tn){if(typeof ze!="function")return ze;try{const rn=ze.__sentry_wrapped__;if(rn)return rn;if(getOriginalFunction(ze))return ze}catch{return ze}const nn=function(){const rn=Array.prototype.slice.call(arguments);try{tn&&typeof tn=="function"&&tn.apply(this,arguments);const sn=rn.map(an=>wrap(an,en));return ze.apply(this,sn)}catch(sn){throw ignoreNextOnError(),withScope(an=>{an.addEventProcessor(cn=>(en.mechanism&&(addExceptionTypeValue(cn,void 0,void 0),addExceptionMechanism(cn,en.mechanism)),cn.extra={...cn.extra,arguments:rn},cn)),captureException(sn)}),sn}};try{for(const rn in ze)Object.prototype.hasOwnProperty.call(ze,rn)&&(nn[rn]=ze[rn])}catch{}markFunctionWrapped(nn,ze),addNonEnumerableProperty(ze,"__sentry_wrapped__",nn);try{Object.getOwnPropertyDescriptor(nn,"name").configurable&&Object.defineProperty(nn,"name",{get(){return ze.name}})}catch{}return nn}const DEBUG_BUILD$1=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function exceptionFromError(ze,en){const tn=parseStackFrames(ze,en),nn={type:en&&en.name,value:extractMessage(en)};return tn.length&&(nn.stacktrace={frames:tn}),nn.type===void 0&&nn.value===""&&(nn.value="Unrecoverable error caught"),nn}function eventFromPlainObject(ze,en,tn,nn){const rn=getClient(),sn=rn&&rn.getOptions().normalizeDepth,an={exception:{values:[{type:isEvent(en)?en.constructor.name:nn?"UnhandledRejection":"Error",value:getNonErrorObjectExceptionValue(en,{isUnhandledRejection:nn})}]},extra:{__serialized__:normalizeToSize(en,sn)}};if(tn){const cn=parseStackFrames(ze,tn);cn.length&&(an.exception.values[0].stacktrace={frames:cn})}return an}function eventFromError(ze,en){return{exception:{values:[exceptionFromError(ze,en)]}}}function parseStackFrames(ze,en){const tn=en.stacktrace||en.stack||"",nn=getPopSize(en);try{return ze(tn,nn)}catch{}return[]}const reactMinifiedRegexp=/Minified React error #\d+;/i;function getPopSize(ze){if(ze){if(typeof ze.framesToPop=="number")return ze.framesToPop;if(reactMinifiedRegexp.test(ze.message))return 1}return 0}function extractMessage(ze){const en=ze&&ze.message;return en?en.error&&typeof en.error.message=="string"?en.error.message:en:"No error message"}function eventFromException(ze,en,tn,nn){const rn=tn&&tn.syntheticException||void 0,sn=eventFromUnknownInput(ze,en,rn,nn);return addExceptionMechanism(sn),sn.level="error",tn&&tn.event_id&&(sn.event_id=tn.event_id),resolvedSyncPromise(sn)}function eventFromMessage(ze,en,tn="info",nn,rn){const sn=nn&&nn.syntheticException||void 0,an=eventFromString(ze,en,sn,rn);return an.level=tn,nn&&nn.event_id&&(an.event_id=nn.event_id),resolvedSyncPromise(an)}function eventFromUnknownInput(ze,en,tn,nn,rn){let sn;if(isErrorEvent$2(en)&&en.error)return eventFromError(ze,en.error);if(isDOMError(en)||isDOMException(en)){const an=en;if("stack"in en)sn=eventFromError(ze,en);else{const cn=an.name||(isDOMError(an)?"DOMError":"DOMException"),un=an.message?`${cn}: ${an.message}`:cn;sn=eventFromString(ze,un,tn,nn),addExceptionTypeValue(sn,un)}return"code"in an&&(sn.tags={...sn.tags,"DOMException.code":`${an.code}`}),sn}return isError(en)?eventFromError(ze,en):isPlainObject(en)||isEvent(en)?(sn=eventFromPlainObject(ze,en,tn,rn),addExceptionMechanism(sn,{synthetic:!0}),sn):(sn=eventFromString(ze,en,tn,nn),addExceptionTypeValue(sn,`${en}`,void 0),addExceptionMechanism(sn,{synthetic:!0}),sn)}function eventFromString(ze,en,tn,nn){const rn={};if(nn&&tn){const sn=parseStackFrames(ze,tn);sn.length&&(rn.exception={values:[{value:en,stacktrace:{frames:sn}}]})}if(isParameterizedString(en)){const{__sentry_template_string__:sn,__sentry_template_values__:an}=en;return rn.logentry={message:sn,params:an},rn}return rn.message=en,rn}function getNonErrorObjectExceptionValue(ze,{isUnhandledRejection:en}){const tn=extractExceptionKeysForMessage(ze),nn=en?"promise rejection":"exception";return isErrorEvent$2(ze)?`Event \`ErrorEvent\` captured as ${nn} with message \`${ze.message}\``:isEvent(ze)?`Event \`${getObjectClassName(ze)}\` (type=${ze.type}) captured as ${nn}`:`Object captured as ${nn} with keys: ${tn}`}function getObjectClassName(ze){try{const en=Object.getPrototypeOf(ze);return en?en.constructor.name:void 0}catch{}}function createUserFeedbackEnvelope(ze,{metadata:en,tunnel:tn,dsn:nn}){const rn={event_id:ze.event_id,sent_at:new Date().toISOString(),...en&&en.sdk&&{sdk:{name:en.sdk.name,version:en.sdk.version}},...!!tn&&!!nn&&{dsn:dsnToString(nn)}},sn=createUserFeedbackEnvelopeItem(ze);return createEnvelope(rn,[sn])}function createUserFeedbackEnvelopeItem(ze){return[{type:"user_report"},ze]}class BrowserClient extends BaseClient{constructor(en){const tn=WINDOW$1.SENTRY_SDK_SOURCE||getSDKSource();applySdkMetadata(en,"browser",["browser"],tn),super(en),en.sendClientReports&&WINDOW$1.document&&WINDOW$1.document.addEventListener("visibilitychange",()=>{WINDOW$1.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(en,tn){return eventFromException(this._options.stackParser,en,tn,this._options.attachStacktrace)}eventFromMessage(en,tn="info",nn){return eventFromMessage(this._options.stackParser,en,tn,nn,this._options.attachStacktrace)}captureUserFeedback(en){if(!this._isEnabled()){DEBUG_BUILD$1&&logger.warn("SDK not enabled, will not capture user feedback.");return}const tn=createUserFeedbackEnvelope(en,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(tn)}_prepareEvent(en,tn,nn){return en.platform=en.platform||"javascript",super._prepareEvent(en,tn,nn)}_flushOutcomes(){const en=this._clearOutcomes();if(en.length===0){DEBUG_BUILD$1&&logger.log("No outcomes to send");return}if(!this._dsn){DEBUG_BUILD$1&&logger.log("No dsn provided, will not send outcomes");return}DEBUG_BUILD$1&&logger.log("Sending outcomes:",en);const tn=createClientReportEnvelope(en,this._options.tunnel&&dsnToString(this._dsn));this._sendEnvelope(tn)}}let cachedFetchImpl;function getNativeFetchImplementation(){if(cachedFetchImpl)return cachedFetchImpl;if(isNativeFetch(WINDOW$1.fetch))return cachedFetchImpl=WINDOW$1.fetch.bind(WINDOW$1);const ze=WINDOW$1.document;let en=WINDOW$1.fetch;if(ze&&typeof ze.createElement=="function")try{const tn=ze.createElement("iframe");tn.hidden=!0,ze.head.appendChild(tn);const nn=tn.contentWindow;nn&&nn.fetch&&(en=nn.fetch),ze.head.removeChild(tn)}catch(tn){DEBUG_BUILD$1&&logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",tn)}return cachedFetchImpl=en.bind(WINDOW$1)}function clearCachedFetchImplementation(){cachedFetchImpl=void 0}function makeFetchTransport(ze,en=getNativeFetchImplementation()){let tn=0,nn=0;function rn(sn){const an=sn.body.length;tn+=an,nn++;const cn={body:sn.body,method:"POST",referrerPolicy:"origin",headers:ze.headers,keepalive:tn<=6e4&&nn<15,...ze.fetchOptions};try{return en(ze.url,cn).then(un=>(tn-=an,nn--,{statusCode:un.status,headers:{"x-sentry-rate-limits":un.headers.get("X-Sentry-Rate-Limits"),"retry-after":un.headers.get("Retry-After")}}))}catch(un){return clearCachedFetchImplementation(),tn-=an,nn--,rejectedSyncPromise(un)}}return createTransport(ze,rn)}const XHR_READYSTATE_DONE=4;function makeXHRTransport(ze){function en(tn){return new SyncPromise((nn,rn)=>{const sn=new XMLHttpRequest;sn.onerror=rn,sn.onreadystatechange=()=>{sn.readyState===XHR_READYSTATE_DONE&&nn({statusCode:sn.status,headers:{"x-sentry-rate-limits":sn.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":sn.getResponseHeader("Retry-After")}})},sn.open("POST",ze.url);for(const an in ze.headers)Object.prototype.hasOwnProperty.call(ze.headers,an)&&sn.setRequestHeader(an,ze.headers[an]);sn.send(tn.body)})}return createTransport(ze,en)}const UNKNOWN_FUNCTION="?",CHROME_PRIORITY=30,WINJS_PRIORITY=40,GECKO_PRIORITY=50;function createFrame(ze,en,tn,nn){const rn={filename:ze,function:en,in_app:!0};return tn!==void 0&&(rn.lineno=tn),nn!==void 0&&(rn.colno=nn),rn}const chromeRegex=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,chromeEvalRegex=/\((\S*)(?::(\d+))(?::(\d+))\)/,chromeStackParserFn=ze=>{const en=chromeRegex.exec(ze);if(en){if(en[2]&&en[2].indexOf("eval")===0){const sn=chromeEvalRegex.exec(en[2]);sn&&(en[2]=sn[1],en[3]=sn[2],en[4]=sn[3])}const[nn,rn]=extractSafariExtensionDetails(en[1]||UNKNOWN_FUNCTION,en[2]);return createFrame(rn,nn,en[3]?+en[3]:void 0,en[4]?+en[4]:void 0)}},chromeStackLineParser=[CHROME_PRIORITY,chromeStackParserFn],geckoREgex=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,geckoEvalRegex=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,gecko=ze=>{const en=geckoREgex.exec(ze);if(en){if(en[3]&&en[3].indexOf(" > eval")>-1){const sn=geckoEvalRegex.exec(en[3]);sn&&(en[1]=en[1]||"eval",en[3]=sn[1],en[4]=sn[2],en[5]="")}let nn=en[3],rn=en[1]||UNKNOWN_FUNCTION;return[rn,nn]=extractSafariExtensionDetails(rn,nn),createFrame(nn,rn,en[4]?+en[4]:void 0,en[5]?+en[5]:void 0)}},geckoStackLineParser=[GECKO_PRIORITY,gecko],winjsRegex=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,winjs=ze=>{const en=winjsRegex.exec(ze);return en?createFrame(en[2],en[1]||UNKNOWN_FUNCTION,+en[3],en[4]?+en[4]:void 0):void 0},winjsStackLineParser=[WINJS_PRIORITY,winjs],defaultStackLineParsers=[chromeStackLineParser,geckoStackLineParser,winjsStackLineParser],defaultStackParser=createStackParser(...defaultStackLineParsers),extractSafariExtensionDetails=(ze,en)=>{const tn=ze.indexOf("safari-extension")!==-1,nn=ze.indexOf("safari-web-extension")!==-1;return tn||nn?[ze.indexOf("@")!==-1?ze.split("@")[0]:UNKNOWN_FUNCTION,tn?`safari-extension:${en}`:`safari-web-extension:${en}`]:[ze,en]},MAX_ALLOWED_STRING_LENGTH=1024,INTEGRATION_NAME$5="Breadcrumbs",_breadcrumbsIntegration=(ze={})=>{const en={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...ze};return{name:INTEGRATION_NAME$5,setupOnce(){},setup(tn){en.console&&addConsoleInstrumentationHandler(_getConsoleBreadcrumbHandler(tn)),en.dom&&addClickKeypressInstrumentationHandler(_getDomBreadcrumbHandler(tn,en.dom)),en.xhr&&addXhrInstrumentationHandler(_getXhrBreadcrumbHandler(tn)),en.fetch&&addFetchInstrumentationHandler(_getFetchBreadcrumbHandler(tn)),en.history&&addHistoryInstrumentationHandler(_getHistoryBreadcrumbHandler(tn)),en.sentry&&tn.on&&tn.on("beforeSendEvent",_getSentryBreadcrumbHandler(tn))}}},breadcrumbsIntegration=_breadcrumbsIntegration;convertIntegrationFnToClass(INTEGRATION_NAME$5,breadcrumbsIntegration);function _getSentryBreadcrumbHandler(ze){return function(tn){getClient()===ze&&addBreadcrumb({category:`sentry.${tn.type==="transaction"?"transaction":"event"}`,event_id:tn.event_id,level:tn.level,message:getEventDescription(tn)},{event:tn})}}function _getDomBreadcrumbHandler(ze,en){return function(nn){if(getClient()!==ze)return;let rn,sn,an=typeof en=="object"?en.serializeAttribute:void 0,cn=typeof en=="object"&&typeof en.maxStringLength=="number"?en.maxStringLength:void 0;cn&&cn>MAX_ALLOWED_STRING_LENGTH&&(DEBUG_BUILD$1&&logger.warn(`\`dom.maxStringLength\` cannot exceed ${MAX_ALLOWED_STRING_LENGTH}, but a value of ${cn} was configured. Sentry will use ${MAX_ALLOWED_STRING_LENGTH} instead.`),cn=MAX_ALLOWED_STRING_LENGTH),typeof an=="string"&&(an=[an]);try{const ln=nn.event,dn=_isEvent(ln)?ln.target:ln;rn=htmlTreeAsString(dn,{keyAttrs:an,maxStringLength:cn}),sn=getComponentName(dn)}catch{rn="<unknown>"}if(rn.length===0)return;const un={category:`ui.${nn.name}`,message:rn};sn&&(un.data={"ui.component_name":sn}),addBreadcrumb(un,{event:nn.event,name:nn.name,global:nn.global})}}function _getConsoleBreadcrumbHandler(ze){return function(tn){if(getClient()!==ze)return;const nn={category:"console",data:{arguments:tn.args,logger:"console"},level:severityLevelFromString(tn.level),message:safeJoin(tn.args," ")};if(tn.level==="assert")if(tn.args[0]===!1)nn.message=`Assertion failed: ${safeJoin(tn.args.slice(1)," ")||"console.assert"}`,nn.data.arguments=tn.args.slice(1);else return;addBreadcrumb(nn,{input:tn.args,level:tn.level})}}function _getXhrBreadcrumbHandler(ze){return function(tn){if(getClient()!==ze)return;const{startTimestamp:nn,endTimestamp:rn}=tn,sn=tn.xhr[SENTRY_XHR_DATA_KEY];if(!nn||!rn||!sn)return;const{method:an,url:cn,status_code:un,body:ln}=sn,dn={method:an,url:cn,status_code:un},fn={xhr:tn.xhr,input:ln,startTimestamp:nn,endTimestamp:rn};addBreadcrumb({category:"xhr",data:dn,type:"http"},fn)}}function _getFetchBreadcrumbHandler(ze){return function(tn){if(getClient()!==ze)return;const{startTimestamp:nn,endTimestamp:rn}=tn;if(rn&&!(tn.fetchData.url.match(/sentry_key/)&&tn.fetchData.method==="POST"))if(tn.error){const sn=tn.fetchData,an={data:tn.error,input:tn.args,startTimestamp:nn,endTimestamp:rn};addBreadcrumb({category:"fetch",data:sn,level:"error",type:"http"},an)}else{const sn=tn.response,an={...tn.fetchData,status_code:sn&&sn.status},cn={input:tn.args,response:sn,startTimestamp:nn,endTimestamp:rn};addBreadcrumb({category:"fetch",data:an,type:"http"},cn)}}}function _getHistoryBreadcrumbHandler(ze){return function(tn){if(getClient()!==ze)return;let nn=tn.from,rn=tn.to;const sn=parseUrl(WINDOW$1.location.href);let an=nn?parseUrl(nn):void 0;const cn=parseUrl(rn);(!an||!an.path)&&(an=sn),sn.protocol===cn.protocol&&sn.host===cn.host&&(rn=cn.relative),sn.protocol===an.protocol&&sn.host===an.host&&(nn=an.relative),addBreadcrumb({category:"navigation",data:{from:nn,to:rn}})}}function _isEvent(ze){return!!ze&&!!ze.target}const INTEGRATION_NAME$4="Dedupe",_dedupeIntegration=()=>{let ze;return{name:INTEGRATION_NAME$4,setupOnce(){},processEvent(en){if(en.type)return en;try{if(_shouldDropEvent(en,ze))return DEBUG_BUILD$1&&logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return ze=en}}},dedupeIntegration=_dedupeIntegration;convertIntegrationFnToClass(INTEGRATION_NAME$4,dedupeIntegration);function _shouldDropEvent(ze,en){return en?!!(_isSameMessageEvent(ze,en)||_isSameExceptionEvent(ze,en)):!1}function _isSameMessageEvent(ze,en){const tn=ze.message,nn=en.message;return!(!tn&&!nn||tn&&!nn||!tn&&nn||tn!==nn||!_isSameFingerprint(ze,en)||!_isSameStacktrace(ze,en))}function _isSameExceptionEvent(ze,en){const tn=_getExceptionFromEvent(en),nn=_getExceptionFromEvent(ze);return!(!tn||!nn||tn.type!==nn.type||tn.value!==nn.value||!_isSameFingerprint(ze,en)||!_isSameStacktrace(ze,en))}function _isSameStacktrace(ze,en){let tn=_getFramesFromEvent(ze),nn=_getFramesFromEvent(en);if(!tn&&!nn)return!0;if(tn&&!nn||!tn&&nn||(tn=tn,nn=nn,nn.length!==tn.length))return!1;for(let rn=0;rn<nn.length;rn++){const sn=nn[rn],an=tn[rn];if(sn.filename!==an.filename||sn.lineno!==an.lineno||sn.colno!==an.colno||sn.function!==an.function)return!1}return!0}function _isSameFingerprint(ze,en){let tn=ze.fingerprint,nn=en.fingerprint;if(!tn&&!nn)return!0;if(tn&&!nn||!tn&&nn)return!1;tn=tn,nn=nn;try{return tn.join("")===nn.join("")}catch{return!1}}function _getExceptionFromEvent(ze){return ze.exception&&ze.exception.values&&ze.exception.values[0]}function _getFramesFromEvent(ze){const en=ze.exception;if(en)try{return en.values[0].stacktrace.frames}catch{return}}const INTEGRATION_NAME$3="GlobalHandlers",_globalHandlersIntegration=(ze={})=>{const en={onerror:!0,onunhandledrejection:!0,...ze};return{name:INTEGRATION_NAME$3,setupOnce(){Error.stackTraceLimit=50},setup(tn){en.onerror&&(_installGlobalOnErrorHandler(tn),globalHandlerLog("onerror")),en.onunhandledrejection&&(_installGlobalOnUnhandledRejectionHandler(tn),globalHandlerLog("onunhandledrejection"))}}},globalHandlersIntegration=_globalHandlersIntegration;convertIntegrationFnToClass(INTEGRATION_NAME$3,globalHandlersIntegration);function _installGlobalOnErrorHandler(ze){addGlobalErrorInstrumentationHandler(en=>{const{stackParser:tn,attachStacktrace:nn}=getOptions();if(getClient()!==ze||shouldIgnoreOnError())return;const{msg:rn,url:sn,line:an,column:cn,error:un}=en,ln=un===void 0&&isString(rn)?_eventFromIncompleteOnError(rn,sn,an,cn):_enhanceEventWithInitialFrame(eventFromUnknownInput(tn,un||rn,void 0,nn,!1),sn,an,cn);ln.level="error",captureEvent(ln,{originalException:un,mechanism:{handled:!1,type:"onerror"}})})}function _installGlobalOnUnhandledRejectionHandler(ze){addGlobalUnhandledRejectionInstrumentationHandler(en=>{const{stackParser:tn,attachStacktrace:nn}=getOptions();if(getClient()!==ze||shouldIgnoreOnError())return;const rn=_getUnhandledRejectionError(en),sn=isPrimitive(rn)?_eventFromRejectionWithPrimitive(rn):eventFromUnknownInput(tn,rn,void 0,nn,!0);sn.level="error",captureEvent(sn,{originalException:rn,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function _getUnhandledRejectionError(ze){if(isPrimitive(ze))return ze;const en=ze;try{if("reason"in en)return en.reason;if("detail"in en&&"reason"in en.detail)return en.detail.reason}catch{}return ze}function _eventFromRejectionWithPrimitive(ze){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(ze)}`}]}}}function _eventFromIncompleteOnError(ze,en,tn,nn){const rn=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let sn=isErrorEvent$2(ze)?ze.message:ze,an="Error";const cn=sn.match(rn);return cn&&(an=cn[1],sn=cn[2]),_enhanceEventWithInitialFrame({exception:{values:[{type:an,value:sn}]}},en,tn,nn)}function _enhanceEventWithInitialFrame(ze,en,tn,nn){const rn=ze.exception=ze.exception||{},sn=rn.values=rn.values||[],an=sn[0]=sn[0]||{},cn=an.stacktrace=an.stacktrace||{},un=cn.frames=cn.frames||[],ln=isNaN(parseInt(nn,10))?void 0:nn,dn=isNaN(parseInt(tn,10))?void 0:tn,fn=isString(en)&&en.length>0?en:getLocationHref();return un.length===0&&un.push({colno:ln,filename:fn,function:"?",in_app:!0,lineno:dn}),ze}function globalHandlerLog(ze){DEBUG_BUILD$1&&logger.log(`Global Handler attached: ${ze}`)}function getOptions(){const ze=getClient();return ze&&ze.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const INTEGRATION_NAME$2="HttpContext",_httpContextIntegration=()=>({name:INTEGRATION_NAME$2,setupOnce(){},preprocessEvent(ze){if(!WINDOW$1.navigator&&!WINDOW$1.location&&!WINDOW$1.document)return;const en=ze.request&&ze.request.url||WINDOW$1.location&&WINDOW$1.location.href,{referrer:tn}=WINDOW$1.document||{},{userAgent:nn}=WINDOW$1.navigator||{},rn={...ze.request&&ze.request.headers,...tn&&{Referer:tn},...nn&&{"User-Agent":nn}},sn={...ze.request,...en&&{url:en},headers:rn};ze.request=sn}}),httpContextIntegration=_httpContextIntegration;convertIntegrationFnToClass(INTEGRATION_NAME$2,httpContextIntegration);const DEFAULT_KEY="cause",DEFAULT_LIMIT=5,INTEGRATION_NAME$1="LinkedErrors",_linkedErrorsIntegration=(ze={})=>{const en=ze.limit||DEFAULT_LIMIT,tn=ze.key||DEFAULT_KEY;return{name:INTEGRATION_NAME$1,setupOnce(){},preprocessEvent(nn,rn,sn){const an=sn.getOptions();applyAggregateErrorsToEvent(exceptionFromError,an.stackParser,an.maxValueLength,tn,en,nn,rn)}}},linkedErrorsIntegration=_linkedErrorsIntegration;convertIntegrationFnToClass(INTEGRATION_NAME$1,linkedErrorsIntegration);const DEFAULT_EVENT_TARGET=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],INTEGRATION_NAME="TryCatch",_browserApiErrorsIntegration=(ze={})=>{const en={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...ze};return{name:INTEGRATION_NAME,setupOnce(){en.setTimeout&&fill(WINDOW$1,"setTimeout",_wrapTimeFunction),en.setInterval&&fill(WINDOW$1,"setInterval",_wrapTimeFunction),en.requestAnimationFrame&&fill(WINDOW$1,"requestAnimationFrame",_wrapRAF),en.XMLHttpRequest&&"XMLHttpRequest"in WINDOW$1&&fill(XMLHttpRequest.prototype,"send",_wrapXHR);const tn=en.eventTarget;tn&&(Array.isArray(tn)?tn:DEFAULT_EVENT_TARGET).forEach(_wrapEventTarget)}}},browserApiErrorsIntegration=_browserApiErrorsIntegration;convertIntegrationFnToClass(INTEGRATION_NAME,browserApiErrorsIntegration);function _wrapTimeFunction(ze){return function(...en){const tn=en[0];return en[0]=wrap(tn,{mechanism:{data:{function:getFunctionName(ze)},handled:!1,type:"instrument"}}),ze.apply(this,en)}}function _wrapRAF(ze){return function(en){return ze.apply(this,[wrap(en,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(ze)},handled:!1,type:"instrument"}})])}}function _wrapXHR(ze){return function(...en){const tn=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(rn=>{rn in tn&&typeof tn[rn]=="function"&&fill(tn,rn,function(sn){const an={mechanism:{data:{function:rn,handler:getFunctionName(sn)},handled:!1,type:"instrument"}},cn=getOriginalFunction(sn);return cn&&(an.mechanism.data.handler=getFunctionName(cn)),wrap(sn,an)})}),ze.apply(this,en)}}function _wrapEventTarget(ze){const en=WINDOW$1,tn=en[ze]&&en[ze].prototype;!tn||!tn.hasOwnProperty||!tn.hasOwnProperty("addEventListener")||(fill(tn,"addEventListener",function(nn){return function(rn,sn,an){try{typeof sn.handleEvent=="function"&&(sn.handleEvent=wrap(sn.handleEvent,{mechanism:{data:{function:"handleEvent",handler:getFunctionName(sn),target:ze},handled:!1,type:"instrument"}}))}catch{}return nn.apply(this,[rn,wrap(sn,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(sn),target:ze},handled:!1,type:"instrument"}}),an])}}),fill(tn,"removeEventListener",function(nn){return function(rn,sn,an){const cn=sn;try{const un=cn&&cn.__sentry_wrapped__;un&&nn.call(this,rn,un,an)}catch{}return nn.call(this,rn,cn,an)}}))}const defaultIntegrations=[inboundFiltersIntegration(),functionToStringIntegration(),browserApiErrorsIntegration(),breadcrumbsIntegration(),globalHandlersIntegration(),linkedErrorsIntegration(),dedupeIntegration(),httpContextIntegration()];function getDefaultIntegrations$1(ze){return[...defaultIntegrations]}function init$1(ze={}){ze.defaultIntegrations===void 0&&(ze.defaultIntegrations=getDefaultIntegrations$1()),ze.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(ze.release=__SENTRY_RELEASE__),WINDOW$1.SENTRY_RELEASE&&WINDOW$1.SENTRY_RELEASE.id&&(ze.release=WINDOW$1.SENTRY_RELEASE.id)),ze.autoSessionTracking===void 0&&(ze.autoSessionTracking=!0),ze.sendClientReports===void 0&&(ze.sendClientReports=!0);const en={...ze,stackParser:stackParserFromStackParserOptions(ze.stackParser||defaultStackParser),integrations:getIntegrationsToSetup(ze),transport:ze.transport||(supportsFetch()?makeFetchTransport:makeXHRTransport)};initAndBind(BrowserClient,en),ze.autoSessionTracking&&startSessionTracking()}function startSessionTracking(){if(typeof WINDOW$1.document>"u"){DEBUG_BUILD$1&&logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}startSession({ignoreDuration:!0}),captureSession(),addHistoryInstrumentationHandler(({from:ze,to:en})=>{ze!==void 0&&ze!==en&&(startSession({ignoreDuration:!0}),captureSession())})}const WINDOW=GLOBAL_OBJ,REPLAY_SESSION_KEY="sentryReplaySession",REPLAY_EVENT_NAME="replay_event",UNABLE_TO_SEND_REPLAY="Unable to send Replay",SESSION_IDLE_PAUSE_DURATION=3e5,SESSION_IDLE_EXPIRE_DURATION=9e5,DEFAULT_FLUSH_MIN_DELAY=5e3,DEFAULT_FLUSH_MAX_DELAY=5500,BUFFER_CHECKOUT_TIME=6e4,RETRY_BASE_INTERVAL=5e3,RETRY_MAX_COUNT=3,NETWORK_BODY_MAX_SIZE=15e4,CONSOLE_ARG_MAX_SIZE=5e3,SLOW_CLICK_THRESHOLD=3e3,SLOW_CLICK_SCROLL_TIMEOUT=300,REPLAY_MAX_EVENT_BUFFER_SIZE=2e7,MIN_REPLAY_DURATION=4999,MIN_REPLAY_DURATION_LIMIT=15e3,MAX_REPLAY_DURATION=36e5;function _nullishCoalesce$1(ze,en){return ze??en()}function _optionalChain$5(ze){let en,tn=ze[0],nn=1;for(;nn<ze.length;){const rn=ze[nn],sn=ze[nn+1];if(nn+=2,(rn==="optionalAccess"||rn==="optionalCall")&&tn==null)return;rn==="access"||rn==="optionalAccess"?(en=tn,tn=sn(tn)):(rn==="call"||rn==="optionalCall")&&(tn=sn((...an)=>tn.call(en,...an)),en=void 0)}return tn}var NodeType$1;(function(ze){ze[ze.Document=0]="Document",ze[ze.DocumentType=1]="DocumentType",ze[ze.Element=2]="Element",ze[ze.Text=3]="Text",ze[ze.CDATA=4]="CDATA",ze[ze.Comment=5]="Comment"})(NodeType$1||(NodeType$1={}));function isElement$1(ze){return ze.nodeType===ze.ELEMENT_NODE}function isShadowRoot(ze){const en=_optionalChain$5([ze,"optionalAccess",tn=>tn.host]);return _optionalChain$5([en,"optionalAccess",tn=>tn.shadowRoot])===ze}function isNativeShadowDom(ze){return Object.prototype.toString.call(ze)==="[object ShadowRoot]"}function fixBrowserCompatibilityIssuesInCSS(ze){return ze.includes(" background-clip: text;")&&!ze.includes(" -webkit-background-clip: text;")&&(ze=ze.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),ze}function escapeImportStatement(ze){const{cssText:en}=ze;if(en.split('"').length<3)return en;const tn=["@import",`url(${JSON.stringify(ze.href)})`];return ze.layerName===""?tn.push("layer"):ze.layerName&&tn.push(`layer(${ze.layerName})`),ze.supportsText&&tn.push(`supports(${ze.supportsText})`),ze.media.length&&tn.push(ze.media.mediaText),tn.join(" ")+";"}function stringifyStylesheet(ze){try{const en=ze.rules||ze.cssRules;return en?fixBrowserCompatibilityIssuesInCSS(Array.from(en,stringifyRule).join("")):null}catch{return null}}function stringifyRule(ze){let en;if(isCSSImportRule(ze))try{en=stringifyStylesheet(ze.styleSheet)||escapeImportStatement(ze)}catch{}else if(isCSSStyleRule(ze)&&ze.selectorText.includes(":"))return fixSafariColons(ze.cssText);return en||ze.cssText}function fixSafariColons(ze){const en=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return ze.replace(en,"$1\\$2")}function isCSSImportRule(ze){return"styleSheet"in ze}function isCSSStyleRule(ze){return"selectorText"in ze}class Mirror{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(en){if(!en)return-1;const tn=_optionalChain$5([this,"access",nn=>nn.getMeta,"call",nn=>nn(en),"optionalAccess",nn=>nn.id]);return _nullishCoalesce$1(tn,()=>-1)}getNode(en){return this.idNodeMap.get(en)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(en){return this.nodeMetaMap.get(en)||null}removeNodeFromMap(en){const tn=this.getId(en);this.idNodeMap.delete(tn),en.childNodes&&en.childNodes.forEach(nn=>this.removeNodeFromMap(nn))}has(en){return this.idNodeMap.has(en)}hasNode(en){return this.nodeMetaMap.has(en)}add(en,tn){const nn=tn.id;this.idNodeMap.set(nn,en),this.nodeMetaMap.set(en,tn)}replace(en,tn){const nn=this.getNode(en);if(nn){const rn=this.nodeMetaMap.get(nn);rn&&this.nodeMetaMap.set(tn,rn)}this.idNodeMap.set(en,tn)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function createMirror(){return new Mirror}function shouldMaskInput({maskInputOptions:ze,tagName:en,type:tn}){return en==="OPTION"&&(en="SELECT"),!!(ze[en.toLowerCase()]||tn&&ze[tn]||tn==="password"||en==="INPUT"&&!tn&&ze.text)}function maskInputValue({isMasked:ze,element:en,value:tn,maskInputFn:nn}){let rn=tn||"";return ze?(nn&&(rn=nn(rn,en)),"*".repeat(rn.length)):rn}function toLowerCase(ze){return ze.toLowerCase()}function toUpperCase(ze){return ze.toUpperCase()}const ORIGINAL_ATTRIBUTE_NAME="__rrweb_original__";function is2DCanvasBlank(ze){const en=ze.getContext("2d");if(!en)return!0;const tn=50;for(let nn=0;nn<ze.width;nn+=tn)for(let rn=0;rn<ze.height;rn+=tn){const sn=en.getImageData,an=ORIGINAL_ATTRIBUTE_NAME in sn?sn[ORIGINAL_ATTRIBUTE_NAME]:sn;if(new Uint32Array(an.call(en,nn,rn,Math.min(tn,ze.width-nn),Math.min(tn,ze.height-rn)).data.buffer).some(un=>un!==0))return!1}return!0}function getInputType(ze){const en=ze.type;return ze.hasAttribute("data-rr-is-password")?"password":en?toLowerCase(en):null}function getInputValue(ze,en,tn){return en==="INPUT"&&(tn==="radio"||tn==="checkbox")?ze.getAttribute("value")||"":ze.value}let _id=1;const tagNameRegex=new RegExp("[^a-z0-9-_:]"),IGNORED_NODE=-2;function genId(){return _id++}function getValidTagName(ze){if(ze instanceof HTMLFormElement)return"form";const en=toLowerCase(ze.tagName);return tagNameRegex.test(en)?"div":en}function extractOrigin(ze){let en="";return ze.indexOf("//")>-1?en=ze.split("/").slice(0,3).join("/"):en=ze.split("/")[0],en=en.split("?")[0],en}let canvasService,canvasCtx;const URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,URL_PROTOCOL_MATCH=/^(?:[a-z+]+:)?\/\//i,URL_WWW_MATCH=/^www\..*/i,DATA_URI=/^(data:)([^,]*),(.*)/i;function absoluteToStylesheet(ze,en){return(ze||"").replace(URL_IN_CSS_REF,(tn,nn,rn,sn,an,cn)=>{const un=rn||an||cn,ln=nn||sn||"";if(!un)return tn;if(URL_PROTOCOL_MATCH.test(un)||URL_WWW_MATCH.test(un))return`url(${ln}${un}${ln})`;if(DATA_URI.test(un))return`url(${ln}${un}${ln})`;if(un[0]==="/")return`url(${ln}${extractOrigin(en)+un}${ln})`;const dn=en.split("/"),fn=un.split("/");dn.pop();for(const pn of fn)pn!=="."&&(pn===".."?dn.pop():dn.push(pn));return`url(${ln}${dn.join("/")}${ln})`})}const SRCSET_NOT_SPACES=/^[^ \t\n\r\u000c]+/,SRCSET_COMMAS_OR_SPACES=/^[, \t\n\r\u000c]+/;function getAbsoluteSrcsetString(ze,en){if(en.trim()==="")return en;let tn=0;function nn(sn){let an;const cn=sn.exec(en.substring(tn));return cn?(an=cn[0],tn+=an.length,an):""}const rn=[];for(;nn(SRCSET_COMMAS_OR_SPACES),!(tn>=en.length);){let sn=nn(SRCSET_NOT_SPACES);if(sn.slice(-1)===",")sn=absoluteToDoc(ze,sn.substring(0,sn.length-1)),rn.push(sn);else{let an="";sn=absoluteToDoc(ze,sn);let cn=!1;for(;;){const un=en.charAt(tn);if(un===""){rn.push((sn+an).trim());break}else if(cn)un===")"&&(cn=!1);else if(un===","){tn+=1,rn.push((sn+an).trim());break}else un==="("&&(cn=!0);an+=un,tn+=1}}}return rn.join(", ")}function absoluteToDoc(ze,en){if(!en||en.trim()==="")return en;const tn=ze.createElement("a");return tn.href=en,tn.href}function isSVGElement(ze){return!!(ze.tagName==="svg"||ze.ownerSVGElement)}function getHref(){const ze=document.createElement("a");return ze.href="",ze.href}function transformAttribute(ze,en,tn,nn,rn,sn){return nn&&(tn==="src"||tn==="href"&&!(en==="use"&&nn[0]==="#")||tn==="xlink:href"&&nn[0]!=="#"||tn==="background"&&(en==="table"||en==="td"||en==="th")?absoluteToDoc(ze,nn):tn==="srcset"?getAbsoluteSrcsetString(ze,nn):tn==="style"?absoluteToStylesheet(nn,getHref()):en==="object"&&tn==="data"?absoluteToDoc(ze,nn):typeof sn=="function"?sn(tn,nn,rn):nn)}function ignoreAttribute(ze,en,tn){return(ze==="video"||ze==="audio")&&en==="autoplay"}function _isBlockedElement(ze,en,tn,nn){try{if(nn&&ze.matches(nn))return!1;if(typeof en=="string"){if(ze.classList.contains(en))return!0}else for(let rn=ze.classList.length;rn--;){const sn=ze.classList[rn];if(en.test(sn))return!0}if(tn)return ze.matches(tn)}catch{}return!1}function elementClassMatchesRegex(ze,en){for(let tn=ze.classList.length;tn--;){const nn=ze.classList[tn];if(en.test(nn))return!0}return!1}function distanceToMatch(ze,en,tn=1/0,nn=0){return!ze||ze.nodeType!==ze.ELEMENT_NODE||nn>tn?-1:en(ze)?nn:distanceToMatch(ze.parentNode,en,tn,nn+1)}function createMatchPredicate(ze,en){return tn=>{const nn=tn;if(nn===null)return!1;try{if(ze){if(typeof ze=="string"){if(nn.matches(`.${ze}`))return!0}else if(elementClassMatchesRegex(nn,ze))return!0}return!!(en&&nn.matches(en))}catch{return!1}}}function needMaskingText(ze,en,tn,nn,rn,sn){try{const an=ze.nodeType===ze.ELEMENT_NODE?ze:ze.parentElement;if(an===null)return!1;if(an.tagName==="INPUT"){const ln=an.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(ln))return!0}let cn=-1,un=-1;if(sn){if(un=distanceToMatch(an,createMatchPredicate(nn,rn)),un<0)return!0;cn=distanceToMatch(an,createMatchPredicate(en,tn),un>=0?un:1/0)}else{if(cn=distanceToMatch(an,createMatchPredicate(en,tn)),cn<0)return!1;un=distanceToMatch(an,createMatchPredicate(nn,rn),cn>=0?cn:1/0)}return cn>=0?un>=0?cn<=un:!0:un>=0?!1:!!sn}catch{}return!!sn}function onceIframeLoaded(ze,en,tn){const nn=ze.contentWindow;if(!nn)return;let rn=!1,sn;try{sn=nn.document.readyState}catch{return}if(sn!=="complete"){const cn=setTimeout(()=>{rn||(en(),rn=!0)},tn);ze.addEventListener("load",()=>{clearTimeout(cn),rn=!0,en()});return}const an="about:blank";if(nn.location.href!==an||ze.src===an||ze.src==="")return setTimeout(en,0),ze.addEventListener("load",en);ze.addEventListener("load",en)}function onceStylesheetLoaded(ze,en,tn){let nn=!1,rn;try{rn=ze.sheet}catch{return}if(rn)return;const sn=setTimeout(()=>{nn||(en(),nn=!0)},tn);ze.addEventListener("load",()=>{clearTimeout(sn),nn=!0,en()})}function serializeNode(ze,en){const{doc:tn,mirror:nn,blockClass:rn,blockSelector:sn,unblockSelector:an,maskAllText:cn,maskAttributeFn:un,maskTextClass:ln,unmaskTextClass:dn,maskTextSelector:fn,unmaskTextSelector:pn,inlineStylesheet:hn,maskInputOptions:mn={},maskTextFn:gn,maskInputFn:Sn,dataURLOptions:_n={},inlineImages:En,recordCanvas:vn,keepIframeSrcFn:bn,newlyAddedElement:Nn=!1}=en,Rn=getRootId(tn,nn);switch(ze.nodeType){case ze.DOCUMENT_NODE:return ze.compatMode!=="CSS1Compat"?{type:NodeType$1.Document,childNodes:[],compatMode:ze.compatMode}:{type:NodeType$1.Document,childNodes:[]};case ze.DOCUMENT_TYPE_NODE:return{type:NodeType$1.DocumentType,name:ze.name,publicId:ze.publicId,systemId:ze.systemId,rootId:Rn};case ze.ELEMENT_NODE:return serializeElementNode(ze,{doc:tn,blockClass:rn,blockSelector:sn,unblockSelector:an,inlineStylesheet:hn,maskAttributeFn:un,maskInputOptions:mn,maskInputFn:Sn,dataURLOptions:_n,inlineImages:En,recordCanvas:vn,keepIframeSrcFn:bn,newlyAddedElement:Nn,rootId:Rn,maskAllText:cn,maskTextClass:ln,unmaskTextClass:dn,maskTextSelector:fn,unmaskTextSelector:pn});case ze.TEXT_NODE:return serializeTextNode(ze,{maskAllText:cn,maskTextClass:ln,unmaskTextClass:dn,maskTextSelector:fn,unmaskTextSelector:pn,maskTextFn:gn,maskInputOptions:mn,maskInputFn:Sn,rootId:Rn});case ze.CDATA_SECTION_NODE:return{type:NodeType$1.CDATA,textContent:"",rootId:Rn};case ze.COMMENT_NODE:return{type:NodeType$1.Comment,textContent:ze.textContent||"",rootId:Rn};default:return!1}}function getRootId(ze,en){if(!en.hasNode(ze))return;const tn=en.getId(ze);return tn===1?void 0:tn}function serializeTextNode(ze,en){const{maskAllText:tn,maskTextClass:nn,unmaskTextClass:rn,maskTextSelector:sn,unmaskTextSelector:an,maskTextFn:cn,maskInputOptions:un,maskInputFn:ln,rootId:dn}=en,fn=ze.parentNode&&ze.parentNode.tagName;let pn=ze.textContent;const hn=fn==="STYLE"?!0:void 0,mn=fn==="SCRIPT"?!0:void 0,gn=fn==="TEXTAREA"?!0:void 0;if(hn&&pn){try{ze.nextSibling||ze.previousSibling||_optionalChain$5([ze,"access",_n=>_n.parentNode,"access",_n=>_n.sheet,"optionalAccess",_n=>_n.cssRules])&&(pn=stringifyStylesheet(ze.parentNode.sheet))}catch(_n){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${_n}`,ze)}pn=absoluteToStylesheet(pn,getHref())}mn&&(pn="SCRIPT_PLACEHOLDER");const Sn=needMaskingText(ze,nn,sn,rn,an,tn);if(!hn&&!mn&&!gn&&pn&&Sn&&(pn=cn?cn(pn):pn.replace(/[\S]/g,"*")),gn&&pn&&(un.textarea||Sn)&&(pn=ln?ln(pn,ze.parentNode):pn.replace(/[\S]/g,"*")),fn==="OPTION"&&pn){const _n=shouldMaskInput({type:null,tagName:fn,maskInputOptions:un});pn=maskInputValue({isMasked:needMaskingText(ze,nn,sn,rn,an,_n),element:ze,value:pn,maskInputFn:ln})}return{type:NodeType$1.Text,textContent:pn||"",isStyle:hn,rootId:dn}}function serializeElementNode(ze,en){const{doc:tn,blockClass:nn,blockSelector:rn,unblockSelector:sn,inlineStylesheet:an,maskInputOptions:cn={},maskAttributeFn:un,maskInputFn:ln,dataURLOptions:dn={},inlineImages:fn,recordCanvas:pn,keepIframeSrcFn:hn,newlyAddedElement:mn=!1,rootId:gn,maskAllText:Sn,maskTextClass:_n,unmaskTextClass:En,maskTextSelector:vn,unmaskTextSelector:bn}=en,Nn=_isBlockedElement(ze,nn,rn,sn),Rn=getValidTagName(ze);let yn={};const wn=ze.attributes.length;for(let Tn=0;Tn<wn;Tn++){const In=ze.attributes[Tn];In.name&&!ignoreAttribute(Rn,In.name,In.value)&&(yn[In.name]=transformAttribute(tn,Rn,toLowerCase(In.name),In.value,ze,un))}if(Rn==="link"&&an){const Tn=Array.from(tn.styleSheets).find(Cn=>Cn.href===ze.href);let In=null;Tn&&(In=stringifyStylesheet(Tn)),In&&(delete yn.rel,delete yn.href,yn._cssText=absoluteToStylesheet(In,Tn.href))}if(Rn==="style"&&ze.sheet&&!(ze.innerText||ze.textContent||"").trim().length){const Tn=stringifyStylesheet(ze.sheet);Tn&&(yn._cssText=absoluteToStylesheet(Tn,getHref()))}if(Rn==="input"||Rn==="textarea"||Rn==="select"||Rn==="option"){const Tn=ze,In=getInputType(Tn),Cn=getInputValue(Tn,toUpperCase(Rn),In),Pn=Tn.checked;if(In!=="submit"&&In!=="button"&&Cn){const Bn=needMaskingText(Tn,_n,vn,En,bn,shouldMaskInput({type:In,tagName:toUpperCase(Rn),maskInputOptions:cn}));yn.value=maskInputValue({isMasked:Bn,element:Tn,value:Cn,maskInputFn:ln})}Pn&&(yn.checked=Pn)}if(Rn==="option"&&(ze.selected&&!cn.select?yn.selected=!0:delete yn.selected),Rn==="canvas"&&pn){if(ze.__context==="2d")is2DCanvasBlank(ze)||(yn.rr_dataURL=ze.toDataURL(dn.type,dn.quality));else if(!("__context"in ze)){const Tn=ze.toDataURL(dn.type,dn.quality),In=document.createElement("canvas");In.width=ze.width,In.height=ze.height;const Cn=In.toDataURL(dn.type,dn.quality);Tn!==Cn&&(yn.rr_dataURL=Tn)}}if(Rn==="img"&&fn){canvasService||(canvasService=tn.createElement("canvas"),canvasCtx=canvasService.getContext("2d"));const Tn=ze,In=Tn.crossOrigin;Tn.crossOrigin="anonymous";const Cn=()=>{Tn.removeEventListener("load",Cn);try{canvasService.width=Tn.naturalWidth,canvasService.height=Tn.naturalHeight,canvasCtx.drawImage(Tn,0,0),yn.rr_dataURL=canvasService.toDataURL(dn.type,dn.quality)}catch(Pn){console.warn(`Cannot inline img src=${Tn.currentSrc}! Error: ${Pn}`)}In?yn.crossOrigin=In:Tn.removeAttribute("crossorigin")};Tn.complete&&Tn.naturalWidth!==0?Cn():Tn.addEventListener("load",Cn)}if((Rn==="audio"||Rn==="video")&&(yn.rr_mediaState=ze.paused?"paused":"played",yn.rr_mediaCurrentTime=ze.currentTime),mn||(ze.scrollLeft&&(yn.rr_scrollLeft=ze.scrollLeft),ze.scrollTop&&(yn.rr_scrollTop=ze.scrollTop)),Nn){const{width:Tn,height:In}=ze.getBoundingClientRect();yn={class:yn.class,rr_width:`${Tn}px`,rr_height:`${In}px`}}Rn==="iframe"&&!hn(yn.src)&&(ze.contentDocument||(yn.rr_src=yn.src),delete yn.src);let Mn;try{customElements.get(Rn)&&(Mn=!0)}catch{}return{type:NodeType$1.Element,tagName:Rn,attributes:yn,childNodes:[],isSVG:isSVGElement(ze)||void 0,needBlock:Nn,rootId:gn,isCustom:Mn}}function lowerIfExists(ze){return ze==null?"":ze.toLowerCase()}function slimDOMExcluded(ze,en){if(en.comment&&ze.type===NodeType$1.Comment)return!0;if(ze.type===NodeType$1.Element){if(en.script&&(ze.tagName==="script"||ze.tagName==="link"&&(ze.attributes.rel==="preload"||ze.attributes.rel==="modulepreload")&&ze.attributes.as==="script"||ze.tagName==="link"&&ze.attributes.rel==="prefetch"&&typeof ze.attributes.href=="string"&&ze.attributes.href.endsWith(".js")))return!0;if(en.headFavicon&&(ze.tagName==="link"&&ze.attributes.rel==="shortcut icon"||ze.tagName==="meta"&&(lowerIfExists(ze.attributes.name).match(/^msapplication-tile(image|color)$/)||lowerIfExists(ze.attributes.name)==="application-name"||lowerIfExists(ze.attributes.rel)==="icon"||lowerIfExists(ze.attributes.rel)==="apple-touch-icon"||lowerIfExists(ze.attributes.rel)==="shortcut icon")))return!0;if(ze.tagName==="meta"){if(en.headMetaDescKeywords&&lowerIfExists(ze.attributes.name).match(/^description|keywords$/))return!0;if(en.headMetaSocial&&(lowerIfExists(ze.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(ze.attributes.name).match(/^(og|twitter):/)||lowerIfExists(ze.attributes.name)==="pinterest"))return!0;if(en.headMetaRobots&&(lowerIfExists(ze.attributes.name)==="robots"||lowerIfExists(ze.attributes.name)==="googlebot"||lowerIfExists(ze.attributes.name)==="bingbot"))return!0;if(en.headMetaHttpEquiv&&ze.attributes["http-equiv"]!==void 0)return!0;if(en.headMetaAuthorship&&(lowerIfExists(ze.attributes.name)==="author"||lowerIfExists(ze.attributes.name)==="generator"||lowerIfExists(ze.attributes.name)==="framework"||lowerIfExists(ze.attributes.name)==="publisher"||lowerIfExists(ze.attributes.name)==="progid"||lowerIfExists(ze.attributes.property).match(/^article:/)||lowerIfExists(ze.attributes.property).match(/^product:/)))return!0;if(en.headMetaVerification&&(lowerIfExists(ze.attributes.name)==="google-site-verification"||lowerIfExists(ze.attributes.name)==="yandex-verification"||lowerIfExists(ze.attributes.name)==="csrf-token"||lowerIfExists(ze.attributes.name)==="p:domain_verify"||lowerIfExists(ze.attributes.name)==="verify-v1"||lowerIfExists(ze.attributes.name)==="verification"||lowerIfExists(ze.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function serializeNodeWithId(ze,en){const{doc:tn,mirror:nn,blockClass:rn,blockSelector:sn,unblockSelector:an,maskAllText:cn,maskTextClass:un,unmaskTextClass:ln,maskTextSelector:dn,unmaskTextSelector:fn,skipChild:pn=!1,inlineStylesheet:hn=!0,maskInputOptions:mn={},maskAttributeFn:gn,maskTextFn:Sn,maskInputFn:_n,slimDOMOptions:En,dataURLOptions:vn={},inlineImages:bn=!1,recordCanvas:Nn=!1,onSerialize:Rn,onIframeLoad:yn,iframeLoadTimeout:wn=5e3,onStylesheetLoad:Mn,stylesheetLoadTimeout:Tn=5e3,keepIframeSrcFn:In=()=>!1,newlyAddedElement:Cn=!1}=en;let{preserveWhiteSpace:Pn=!0}=en;const Bn=serializeNode(ze,{doc:tn,mirror:nn,blockClass:rn,blockSelector:sn,maskAllText:cn,unblockSelector:an,maskTextClass:un,unmaskTextClass:ln,maskTextSelector:dn,unmaskTextSelector:fn,inlineStylesheet:hn,maskInputOptions:mn,maskAttributeFn:gn,maskTextFn:Sn,maskInputFn:_n,dataURLOptions:vn,inlineImages:bn,recordCanvas:Nn,keepIframeSrcFn:In,newlyAddedElement:Cn});if(!Bn)return console.warn(ze,"not serialized"),null;let An;nn.hasNode(ze)?An=nn.getId(ze):slimDOMExcluded(Bn,En)||!Pn&&Bn.type===NodeType$1.Text&&!Bn.isStyle&&!Bn.textContent.replace(/^\s+|\s+$/gm,"").length?An=IGNORED_NODE:An=genId();const Dn=Object.assign(Bn,{id:An});if(nn.add(ze,Dn),An===IGNORED_NODE)return null;Rn&&Rn(ze);let Hn=!pn;if(Dn.type===NodeType$1.Element){Hn=Hn&&!Dn.needBlock,delete Dn.needBlock;const xn=ze.shadowRoot;xn&&isNativeShadowDom(xn)&&(Dn.isShadowHost=!0)}if((Dn.type===NodeType$1.Document||Dn.type===NodeType$1.Element)&&Hn){En.headWhitespace&&Dn.type===NodeType$1.Element&&Dn.tagName==="head"&&(Pn=!1);const xn={doc:tn,mirror:nn,blockClass:rn,blockSelector:sn,maskAllText:cn,unblockSelector:an,maskTextClass:un,unmaskTextClass:ln,maskTextSelector:dn,unmaskTextSelector:fn,skipChild:pn,inlineStylesheet:hn,maskInputOptions:mn,maskAttributeFn:gn,maskTextFn:Sn,maskInputFn:_n,slimDOMOptions:En,dataURLOptions:vn,inlineImages:bn,recordCanvas:Nn,preserveWhiteSpace:Pn,onSerialize:Rn,onIframeLoad:yn,iframeLoadTimeout:wn,onStylesheetLoad:Mn,stylesheetLoadTimeout:Tn,keepIframeSrcFn:In};for(const Wn of Array.from(ze.childNodes)){const zn=serializeNodeWithId(Wn,xn);zn&&Dn.childNodes.push(zn)}if(isElement$1(ze)&&ze.shadowRoot)for(const Wn of Array.from(ze.shadowRoot.childNodes)){const zn=serializeNodeWithId(Wn,xn);zn&&(isNativeShadowDom(ze.shadowRoot)&&(zn.isShadow=!0),Dn.childNodes.push(zn))}}return ze.parentNode&&isShadowRoot(ze.parentNode)&&isNativeShadowDom(ze.parentNode)&&(Dn.isShadow=!0),Dn.type===NodeType$1.Element&&Dn.tagName==="iframe"&&onceIframeLoaded(ze,()=>{const xn=ze.contentDocument;if(xn&&yn){const Wn=serializeNodeWithId(xn,{doc:xn,mirror:nn,blockClass:rn,blockSelector:sn,unblockSelector:an,maskAllText:cn,maskTextClass:un,unmaskTextClass:ln,maskTextSelector:dn,unmaskTextSelector:fn,skipChild:!1,inlineStylesheet:hn,maskInputOptions:mn,maskAttributeFn:gn,maskTextFn:Sn,maskInputFn:_n,slimDOMOptions:En,dataURLOptions:vn,inlineImages:bn,recordCanvas:Nn,preserveWhiteSpace:Pn,onSerialize:Rn,onIframeLoad:yn,iframeLoadTimeout:wn,onStylesheetLoad:Mn,stylesheetLoadTimeout:Tn,keepIframeSrcFn:In});Wn&&yn(ze,Wn)}},wn),Dn.type===NodeType$1.Element&&Dn.tagName==="link"&&Dn.attributes.rel==="stylesheet"&&onceStylesheetLoaded(ze,()=>{if(Mn){const xn=serializeNodeWithId(ze,{doc:tn,mirror:nn,blockClass:rn,blockSelector:sn,unblockSelector:an,maskAllText:cn,maskTextClass:un,unmaskTextClass:ln,maskTextSelector:dn,unmaskTextSelector:fn,skipChild:!1,inlineStylesheet:hn,maskInputOptions:mn,maskAttributeFn:gn,maskTextFn:Sn,maskInputFn:_n,slimDOMOptions:En,dataURLOptions:vn,inlineImages:bn,recordCanvas:Nn,preserveWhiteSpace:Pn,onSerialize:Rn,onIframeLoad:yn,iframeLoadTimeout:wn,onStylesheetLoad:Mn,stylesheetLoadTimeout:Tn,keepIframeSrcFn:In});xn&&Mn(ze,xn)}},Tn),Dn}function snapshot(ze,en){const{mirror:tn=new Mirror,blockClass:nn="rr-block",blockSelector:rn=null,unblockSelector:sn=null,maskAllText:an=!1,maskTextClass:cn="rr-mask",unmaskTextClass:un=null,maskTextSelector:ln=null,unmaskTextSelector:dn=null,inlineStylesheet:fn=!0,inlineImages:pn=!1,recordCanvas:hn=!1,maskAllInputs:mn=!1,maskAttributeFn:gn,maskTextFn:Sn,maskInputFn:_n,slimDOM:En=!1,dataURLOptions:vn,preserveWhiteSpace:bn,onSerialize:Nn,onIframeLoad:Rn,iframeLoadTimeout:yn,onStylesheetLoad:wn,stylesheetLoadTimeout:Mn,keepIframeSrcFn:Tn=()=>!1}=en||{};return serializeNodeWithId(ze,{doc:ze,mirror:tn,blockClass:nn,blockSelector:rn,unblockSelector:sn,maskAllText:an,maskTextClass:cn,unmaskTextClass:un,maskTextSelector:ln,unmaskTextSelector:dn,skipChild:!1,inlineStylesheet:fn,maskInputOptions:mn===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:mn===!1?{}:mn,maskAttributeFn:gn,maskTextFn:Sn,maskInputFn:_n,slimDOMOptions:En===!0||En==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:En==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:En===!1?{}:En,dataURLOptions:vn,inlineImages:pn,recordCanvas:hn,preserveWhiteSpace:bn,onSerialize:Nn,onIframeLoad:Rn,iframeLoadTimeout:yn,onStylesheetLoad:wn,stylesheetLoadTimeout:Mn,keepIframeSrcFn:Tn,newlyAddedElement:!1})}function _optionalChain$4(ze){let en,tn=ze[0],nn=1;for(;nn<ze.length;){const rn=ze[nn],sn=ze[nn+1];if(nn+=2,(rn==="optionalAccess"||rn==="optionalCall")&&tn==null)return;rn==="access"||rn==="optionalAccess"?(en=tn,tn=sn(tn)):(rn==="call"||rn==="optionalCall")&&(tn=sn((...an)=>tn.call(en,...an)),en=void 0)}return tn}function on(ze,en,tn=document){const nn={capture:!0,passive:!0};return tn.addEventListener(ze,en,nn),()=>tn.removeEventListener(ze,en,nn)}const DEPARTED_MIRROR_ACCESS_WARNING=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let _mirror={map:{},getId(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),-1},getNode(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),null},removeNodeFromMap(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)},has(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),!1},reset(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(_mirror=new Proxy(_mirror,{get(ze,en,tn){return en==="map"&&console.error(DEPARTED_MIRROR_ACCESS_WARNING),Reflect.get(ze,en,tn)}}));function throttle$1(ze,en,tn={}){let nn=null,rn=0;return function(...sn){const an=Date.now();!rn&&tn.leading===!1&&(rn=an);const cn=en-(an-rn),un=this;cn<=0||cn>en?(nn&&(clearTimeout(nn),nn=null),rn=an,ze.apply(un,sn)):!nn&&tn.trailing!==!1&&(nn=setTimeout(()=>{rn=tn.leading===!1?0:Date.now(),nn=null,ze.apply(un,sn)},cn))}}function hookSetter(ze,en,tn,nn,rn=window){const sn=rn.Object.getOwnPropertyDescriptor(ze,en);return rn.Object.defineProperty(ze,en,nn?tn:{set(an){setTimeout(()=>{tn.set.call(this,an)},0),sn&&sn.set&&sn.set.call(this,an)}}),()=>hookSetter(ze,en,sn||{},!0)}function patch(ze,en,tn){try{if(!(en in ze))return()=>{};const nn=ze[en],rn=tn(nn);return typeof rn=="function"&&(rn.prototype=rn.prototype||{},Object.defineProperties(rn,{__rrweb_original__:{enumerable:!1,value:nn}})),ze[en]=rn,()=>{ze[en]=nn}}catch{return()=>{}}}let nowTimestamp=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(nowTimestamp=()=>new Date().getTime());function getWindowScroll(ze){const en=ze.document;return{left:en.scrollingElement?en.scrollingElement.scrollLeft:ze.pageXOffset!==void 0?ze.pageXOffset:_optionalChain$4([en,"optionalAccess",tn=>tn.documentElement,"access",tn=>tn.scrollLeft])||_optionalChain$4([en,"optionalAccess",tn=>tn.body,"optionalAccess",tn=>tn.parentElement,"optionalAccess",tn=>tn.scrollLeft])||_optionalChain$4([en,"optionalAccess",tn=>tn.body,"optionalAccess",tn=>tn.scrollLeft])||0,top:en.scrollingElement?en.scrollingElement.scrollTop:ze.pageYOffset!==void 0?ze.pageYOffset:_optionalChain$4([en,"optionalAccess",tn=>tn.documentElement,"access",tn=>tn.scrollTop])||_optionalChain$4([en,"optionalAccess",tn=>tn.body,"optionalAccess",tn=>tn.parentElement,"optionalAccess",tn=>tn.scrollTop])||_optionalChain$4([en,"optionalAccess",tn=>tn.body,"optionalAccess",tn=>tn.scrollTop])||0}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function isBlocked(ze,en,tn,nn,rn){if(!ze)return!1;const sn=ze.nodeType===ze.ELEMENT_NODE?ze:ze.parentElement;if(!sn)return!1;const an=createMatchPredicate(en,tn);if(!rn){const ln=nn&&sn.matches(nn);return an(sn)&&!ln}const cn=distanceToMatch(sn,an);let un=-1;return cn<0?!1:(nn&&(un=distanceToMatch(sn,createMatchPredicate(null,nn))),cn>-1&&un<0?!0:cn<un)}function isSerialized(ze,en){return en.getId(ze)!==-1}function isIgnored(ze,en){return en.getId(ze)===IGNORED_NODE}function isAncestorRemoved(ze,en){if(isShadowRoot(ze))return!1;const tn=en.getId(ze);return en.has(tn)?ze.parentNode&&ze.parentNode.nodeType===ze.DOCUMENT_NODE?!1:ze.parentNode?isAncestorRemoved(ze.parentNode,en):!0:!0}function legacy_isTouchEvent(ze){return!!ze.changedTouches}function polyfill(ze=window){"NodeList"in ze&&!ze.NodeList.prototype.forEach&&(ze.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in ze&&!ze.DOMTokenList.prototype.forEach&&(ze.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...en)=>{let tn=en[0];if(!(0 in en))throw new TypeError("1 argument is required");do if(this===tn)return!0;while(tn=tn&&tn.parentNode);return!1})}function isSerializedIframe(ze,en){return!!(ze.nodeName==="IFRAME"&&en.getMeta(ze))}function isSerializedStylesheet(ze,en){return!!(ze.nodeName==="LINK"&&ze.nodeType===ze.ELEMENT_NODE&&ze.getAttribute&&ze.getAttribute("rel")==="stylesheet"&&en.getMeta(ze))}function hasShadowRoot(ze){return!!_optionalChain$4([ze,"optionalAccess",en=>en.shadowRoot])}class StyleSheetMirror{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(en){return _nullishCoalesce(this.styleIDMap.get(en),()=>-1)}has(en){return this.styleIDMap.has(en)}add(en,tn){if(this.has(en))return this.getId(en);let nn;return tn===void 0?nn=this.id++:nn=tn,this.styleIDMap.set(en,nn),this.idStyleMap.set(nn,en),nn}getStyle(en){return this.idStyleMap.get(en)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function getShadowHost(ze){let en=null;return _optionalChain$4([ze,"access",tn=>tn.getRootNode,"optionalCall",tn=>tn(),"optionalAccess",tn=>tn.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&ze.getRootNode().host&&(en=ze.getRootNode().host),en}function getRootShadowHost(ze){let en=ze,tn;for(;tn=getShadowHost(en);)en=tn;return en}function shadowHostInDom(ze){const en=ze.ownerDocument;if(!en)return!1;const tn=getRootShadowHost(ze);return en.contains(tn)}function inDom(ze){const en=ze.ownerDocument;return en?en.contains(ze)||shadowHostInDom(ze):!1}let cachedRequestAnimationFrameImplementation;function getRequestAnimationFrameImplementation(){if(cachedRequestAnimationFrameImplementation)return cachedRequestAnimationFrameImplementation;const ze=window.document;let en=window.requestAnimationFrame;if(ze&&typeof ze.createElement=="function")try{const tn=ze.createElement("iframe");tn.hidden=!0,ze.head.appendChild(tn);const nn=tn.contentWindow;nn&&nn.requestAnimationFrame&&(en=nn.requestAnimationFrame),ze.head.removeChild(tn)}catch{}return cachedRequestAnimationFrameImplementation=en.bind(window)}function onRequestAnimationFrame(...ze){return getRequestAnimationFrameImplementation()(...ze)}var EventType=(ze=>(ze[ze.DomContentLoaded=0]="DomContentLoaded",ze[ze.Load=1]="Load",ze[ze.FullSnapshot=2]="FullSnapshot",ze[ze.IncrementalSnapshot=3]="IncrementalSnapshot",ze[ze.Meta=4]="Meta",ze[ze.Custom=5]="Custom",ze[ze.Plugin=6]="Plugin",ze))(EventType||{}),IncrementalSource=(ze=>(ze[ze.Mutation=0]="Mutation",ze[ze.MouseMove=1]="MouseMove",ze[ze.MouseInteraction=2]="MouseInteraction",ze[ze.Scroll=3]="Scroll",ze[ze.ViewportResize=4]="ViewportResize",ze[ze.Input=5]="Input",ze[ze.TouchMove=6]="TouchMove",ze[ze.MediaInteraction=7]="MediaInteraction",ze[ze.StyleSheetRule=8]="StyleSheetRule",ze[ze.CanvasMutation=9]="CanvasMutation",ze[ze.Font=10]="Font",ze[ze.Log=11]="Log",ze[ze.Drag=12]="Drag",ze[ze.StyleDeclaration=13]="StyleDeclaration",ze[ze.Selection=14]="Selection",ze[ze.AdoptedStyleSheet=15]="AdoptedStyleSheet",ze[ze.CustomElement=16]="CustomElement",ze))(IncrementalSource||{}),MouseInteractions=(ze=>(ze[ze.MouseUp=0]="MouseUp",ze[ze.MouseDown=1]="MouseDown",ze[ze.Click=2]="Click",ze[ze.ContextMenu=3]="ContextMenu",ze[ze.DblClick=4]="DblClick",ze[ze.Focus=5]="Focus",ze[ze.Blur=6]="Blur",ze[ze.TouchStart=7]="TouchStart",ze[ze.TouchMove_Departed=8]="TouchMove_Departed",ze[ze.TouchEnd=9]="TouchEnd",ze[ze.TouchCancel=10]="TouchCancel",ze))(MouseInteractions||{}),PointerTypes=(ze=>(ze[ze.Mouse=0]="Mouse",ze[ze.Pen=1]="Pen",ze[ze.Touch=2]="Touch",ze))(PointerTypes||{});function _optionalChain$3(ze){let en,tn=ze[0],nn=1;for(;nn<ze.length;){const rn=ze[nn],sn=ze[nn+1];if(nn+=2,(rn==="optionalAccess"||rn==="optionalCall")&&tn==null)return;rn==="access"||rn==="optionalAccess"?(en=tn,tn=sn(tn)):(rn==="call"||rn==="optionalCall")&&(tn=sn((...an)=>tn.call(en,...an)),en=void 0)}return tn}function isNodeInLinkedList(ze){return"__ln"in ze}class DoubleLinkedList{constructor(){this.length=0,this.head=null,this.tail=null}get(en){if(en>=this.length)throw new Error("Position outside of list range");let tn=this.head;for(let nn=0;nn<en;nn++)tn=_optionalChain$3([tn,"optionalAccess",rn=>rn.next])||null;return tn}addNode(en){const tn={value:en,previous:null,next:null};if(en.__ln=tn,en.previousSibling&&isNodeInLinkedList(en.previousSibling)){const nn=en.previousSibling.__ln.next;tn.next=nn,tn.previous=en.previousSibling.__ln,en.previousSibling.__ln.next=tn,nn&&(nn.previous=tn)}else if(en.nextSibling&&isNodeInLinkedList(en.nextSibling)&&en.nextSibling.__ln.previous){const nn=en.nextSibling.__ln.previous;tn.previous=nn,tn.next=en.nextSibling.__ln,en.nextSibling.__ln.previous=tn,nn&&(nn.next=tn)}else this.head&&(this.head.previous=tn),tn.next=this.head,this.head=tn;tn.next===null&&(this.tail=tn),this.length++}removeNode(en){const tn=en.__ln;this.head&&(tn.previous?(tn.previous.next=tn.next,tn.next?tn.next.previous=tn.previous:this.tail=tn.previous):(this.head=tn.next,this.head?this.head.previous=null:this.tail=null),en.__ln&&delete en.__ln,this.length--)}}const moveKey=(ze,en)=>`${ze}@${en}`;class MutationBuffer{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=en=>{en.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const en=[],tn=new Set,nn=new DoubleLinkedList,rn=un=>{let ln=un,dn=IGNORED_NODE;for(;dn===IGNORED_NODE;)ln=ln&&ln.nextSibling,dn=ln&&this.mirror.getId(ln);return dn},sn=un=>{if(!un.parentNode||!inDom(un))return;const ln=isShadowRoot(un.parentNode)?this.mirror.getId(getShadowHost(un)):this.mirror.getId(un.parentNode),dn=rn(un);if(ln===-1||dn===-1)return nn.addNode(un);const fn=serializeNodeWithId(un,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:pn=>{isSerializedIframe(pn,this.mirror)&&this.iframeManager.addIframe(pn),isSerializedStylesheet(pn,this.mirror)&&this.stylesheetManager.trackLinkElement(pn),hasShadowRoot(un)&&this.shadowDomManager.addShadowRoot(un.shadowRoot,this.doc)},onIframeLoad:(pn,hn)=>{this.iframeManager.attachIframe(pn,hn),this.shadowDomManager.observeAttachShadow(pn)},onStylesheetLoad:(pn,hn)=>{this.stylesheetManager.attachLinkElement(pn,hn)}});fn&&(en.push({parentId:ln,nextId:dn,node:fn}),tn.add(fn.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const un of this.movedSet)isParentRemoved(this.removes,un,this.mirror)&&!this.movedSet.has(un.parentNode)||sn(un);for(const un of this.addedSet)!isAncestorInSet(this.droppedSet,un)&&!isParentRemoved(this.removes,un,this.mirror)||isAncestorInSet(this.movedSet,un)?sn(un):this.droppedSet.add(un);let an=null;for(;nn.length;){let un=null;if(an){const ln=this.mirror.getId(an.value.parentNode),dn=rn(an.value);ln!==-1&&dn!==-1&&(un=an)}if(!un){let ln=nn.tail;for(;ln;){const dn=ln;if(ln=ln.previous,dn){const fn=this.mirror.getId(dn.value.parentNode);if(rn(dn.value)===-1)continue;if(fn!==-1){un=dn;break}else{const hn=dn.value;if(hn.parentNode&&hn.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const mn=hn.parentNode.host;if(this.mirror.getId(mn)!==-1){un=dn;break}}}}}}if(!un){for(;nn.head;)nn.removeNode(nn.head.value);break}an=un.previous,nn.removeNode(un.value),sn(un.value)}const cn={texts:this.texts.map(un=>({id:this.mirror.getId(un.node),value:un.value})).filter(un=>!tn.has(un.id)).filter(un=>this.mirror.has(un.id)),attributes:this.attributes.map(un=>{const{attributes:ln}=un;if(typeof ln.style=="string"){const dn=JSON.stringify(un.styleDiff),fn=JSON.stringify(un._unchangedStyles);dn.length<ln.style.length&&(dn+fn).split("var(").length===ln.style.split("var(").length&&(ln.style=un.styleDiff)}return{id:this.mirror.getId(un.node),attributes:ln}}).filter(un=>!tn.has(un.id)).filter(un=>this.mirror.has(un.id)),removes:this.removes,adds:en};!cn.texts.length&&!cn.attributes.length&&!cn.removes.length&&!cn.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(cn))},this.processMutation=en=>{if(isIgnored(en.target,this.mirror))return;let tn;try{tn=document.implementation.createHTMLDocument()}catch{tn=this.doc}switch(en.type){case"characterData":{const nn=en.target.textContent;!isBlocked(en.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&nn!==en.oldValue&&this.texts.push({value:needMaskingText(en.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&nn?this.maskTextFn?this.maskTextFn(nn):nn.replace(/[\S]/g,"*"):nn,node:en.target});break}case"attributes":{const nn=en.target;let rn=en.attributeName,sn=en.target.getAttribute(rn);if(rn==="value"){const cn=getInputType(nn),un=nn.tagName;sn=getInputValue(nn,un,cn);const ln=shouldMaskInput({maskInputOptions:this.maskInputOptions,tagName:un,type:cn}),dn=needMaskingText(en.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,ln);sn=maskInputValue({isMasked:dn,element:nn,value:sn,maskInputFn:this.maskInputFn})}if(isBlocked(en.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||sn===en.oldValue)return;let an=this.attributes.find(cn=>cn.node===en.target);if(nn.tagName==="IFRAME"&&rn==="src"&&!this.keepIframeSrcFn(sn))if(!nn.contentDocument)rn="rr_src";else return;if(an||(an={node:en.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(an)),rn==="type"&&nn.tagName==="INPUT"&&(en.oldValue||"").toLowerCase()==="password"&&nn.setAttribute("data-rr-is-password","true"),!ignoreAttribute(nn.tagName,rn)&&(an.attributes[rn]=transformAttribute(this.doc,toLowerCase(nn.tagName),toLowerCase(rn),sn,nn,this.maskAttributeFn),rn==="style")){const cn=tn.createElement("span");en.oldValue&&cn.setAttribute("style",en.oldValue);for(const un of Array.from(nn.style)){const ln=nn.style.getPropertyValue(un),dn=nn.style.getPropertyPriority(un);ln!==cn.style.getPropertyValue(un)||dn!==cn.style.getPropertyPriority(un)?dn===""?an.styleDiff[un]=ln:an.styleDiff[un]=[ln,dn]:an._unchangedStyles[un]=[ln,dn]}for(const un of Array.from(cn.style))nn.style.getPropertyValue(un)===""&&(an.styleDiff[un]=!1)}break}case"childList":{if(isBlocked(en.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;en.addedNodes.forEach(nn=>this.genAdds(nn,en.target)),en.removedNodes.forEach(nn=>{const rn=this.mirror.getId(nn),sn=isShadowRoot(en.target)?this.mirror.getId(en.target.host):this.mirror.getId(en.target);isBlocked(en.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||isIgnored(nn,this.mirror)||!isSerialized(nn,this.mirror)||(this.addedSet.has(nn)?(deepDelete(this.addedSet,nn),this.droppedSet.add(nn)):this.addedSet.has(en.target)&&rn===-1||isAncestorRemoved(en.target,this.mirror)||(this.movedSet.has(nn)&&this.movedMap[moveKey(rn,sn)]?deepDelete(this.movedSet,nn):this.removes.push({parentId:sn,id:rn,isShadow:isShadowRoot(en.target)&&isNativeShadowDom(en.target)?!0:void 0})),this.mapRemoves.push(nn))});break}}},this.genAdds=(en,tn)=>{if(!this.processedNodeManager.inOtherBuffer(en,this)&&!(this.addedSet.has(en)||this.movedSet.has(en))){if(this.mirror.hasNode(en)){if(isIgnored(en,this.mirror))return;this.movedSet.add(en);let nn=null;tn&&this.mirror.hasNode(tn)&&(nn=this.mirror.getId(tn)),nn&&nn!==-1&&(this.movedMap[moveKey(this.mirror.getId(en),nn)]=!0)}else this.addedSet.add(en),this.droppedSet.delete(en);isBlocked(en,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(en.childNodes.forEach(nn=>this.genAdds(nn)),hasShadowRoot(en)&&en.shadowRoot.childNodes.forEach(nn=>{this.processedNodeManager.add(nn,this),this.genAdds(nn,en)}))}}}init(en){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(tn=>{this[tn]=en[tn]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function deepDelete(ze,en){ze.delete(en),en.childNodes.forEach(tn=>deepDelete(ze,tn))}function isParentRemoved(ze,en,tn){return ze.length===0?!1:_isParentRemoved(ze,en,tn)}function _isParentRemoved(ze,en,tn){const{parentNode:nn}=en;if(!nn)return!1;const rn=tn.getId(nn);return ze.some(sn=>sn.id===rn)?!0:_isParentRemoved(ze,nn,tn)}function isAncestorInSet(ze,en){return ze.size===0?!1:_isAncestorInSet(ze,en)}function _isAncestorInSet(ze,en){const{parentNode:tn}=en;return tn?ze.has(tn)?!0:_isAncestorInSet(ze,tn):!1}let errorHandler;function registerErrorHandler(ze){errorHandler=ze}function unregisterErrorHandler(){errorHandler=void 0}const callbackWrapper=ze=>errorHandler?(...tn)=>{try{return ze(...tn)}catch(nn){if(errorHandler&&errorHandler(nn)===!0)return()=>{};throw nn}}:ze;function _optionalChain$2(ze){let en,tn=ze[0],nn=1;for(;nn<ze.length;){const rn=ze[nn],sn=ze[nn+1];if(nn+=2,(rn==="optionalAccess"||rn==="optionalCall")&&tn==null)return;rn==="access"||rn==="optionalAccess"?(en=tn,tn=sn(tn)):(rn==="call"||rn==="optionalCall")&&(tn=sn((...an)=>tn.call(en,...an)),en=void 0)}return tn}const mutationBuffers=[];function getEventTarget(ze){try{if("composedPath"in ze){const en=ze.composedPath();if(en.length)return en[0]}else if("path"in ze&&ze.path.length)return ze.path[0]}catch{}return ze&&ze.target}function initMutationObserver(ze,en){const tn=new MutationBuffer;mutationBuffers.push(tn),tn.init(ze);let nn=window.MutationObserver||window.__rrMutationObserver;const rn=_optionalChain$2([window,"optionalAccess",an=>an.Zone,"optionalAccess",an=>an.__symbol__,"optionalCall",an=>an("MutationObserver")]);rn&&window[rn]&&(nn=window[rn]);const sn=new nn(callbackWrapper(an=>{ze.onMutation&&ze.onMutation(an)===!1||tn.processMutations.bind(tn)(an)}));return sn.observe(en,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),sn}function initMoveObserver({mousemoveCb:ze,sampling:en,doc:tn,mirror:nn}){if(en.mousemove===!1)return()=>{};const rn=typeof en.mousemove=="number"?en.mousemove:50,sn=typeof en.mousemoveCallback=="number"?en.mousemoveCallback:500;let an=[],cn;const un=throttle$1(callbackWrapper(fn=>{const pn=Date.now()-cn;ze(an.map(hn=>(hn.timeOffset-=pn,hn)),fn),an=[],cn=null}),sn),ln=callbackWrapper(throttle$1(callbackWrapper(fn=>{const pn=getEventTarget(fn),{clientX:hn,clientY:mn}=legacy_isTouchEvent(fn)?fn.changedTouches[0]:fn;cn||(cn=nowTimestamp()),an.push({x:hn,y:mn,id:nn.getId(pn),timeOffset:nowTimestamp()-cn}),un(typeof DragEvent<"u"&&fn instanceof DragEvent?IncrementalSource.Drag:fn instanceof MouseEvent?IncrementalSource.MouseMove:IncrementalSource.TouchMove)}),rn,{trailing:!1})),dn=[on("mousemove",ln,tn),on("touchmove",ln,tn),on("drag",ln,tn)];return callbackWrapper(()=>{dn.forEach(fn=>fn())})}function initMouseInteractionObserver({mouseInteractionCb:ze,doc:en,mirror:tn,blockClass:nn,blockSelector:rn,unblockSelector:sn,sampling:an}){if(an.mouseInteraction===!1)return()=>{};const cn=an.mouseInteraction===!0||an.mouseInteraction===void 0?{}:an.mouseInteraction,un=[];let ln=null;const dn=fn=>pn=>{const hn=getEventTarget(pn);if(isBlocked(hn,nn,rn,sn,!0))return;let mn=null,gn=fn;if("pointerType"in pn){switch(pn.pointerType){case"mouse":mn=PointerTypes.Mouse;break;case"touch":mn=PointerTypes.Touch;break;case"pen":mn=PointerTypes.Pen;break}mn===PointerTypes.Touch?MouseInteractions[fn]===MouseInteractions.MouseDown?gn="TouchStart":MouseInteractions[fn]===MouseInteractions.MouseUp&&(gn="TouchEnd"):PointerTypes.Pen}else legacy_isTouchEvent(pn)&&(mn=PointerTypes.Touch);mn!==null?(ln=mn,(gn.startsWith("Touch")&&mn===PointerTypes.Touch||gn.startsWith("Mouse")&&mn===PointerTypes.Mouse)&&(mn=null)):MouseInteractions[fn]===MouseInteractions.Click&&(mn=ln,ln=null);const Sn=legacy_isTouchEvent(pn)?pn.changedTouches[0]:pn;if(!Sn)return;const _n=tn.getId(hn),{clientX:En,clientY:vn}=Sn;callbackWrapper(ze)({type:MouseInteractions[gn],id:_n,x:En,y:vn,...mn!==null&&{pointerType:mn}})};return Object.keys(MouseInteractions).filter(fn=>Number.isNaN(Number(fn))&&!fn.endsWith("_Departed")&&cn[fn]!==!1).forEach(fn=>{let pn=toLowerCase(fn);const hn=dn(fn);if(window.PointerEvent)switch(MouseInteractions[fn]){case MouseInteractions.MouseDown:case MouseInteractions.MouseUp:pn=pn.replace("mouse","pointer");break;case MouseInteractions.TouchStart:case MouseInteractions.TouchEnd:return}un.push(on(pn,hn,en))}),callbackWrapper(()=>{un.forEach(fn=>fn())})}function initScrollObserver({scrollCb:ze,doc:en,mirror:tn,blockClass:nn,blockSelector:rn,unblockSelector:sn,sampling:an}){const cn=callbackWrapper(throttle$1(callbackWrapper(un=>{const ln=getEventTarget(un);if(!ln||isBlocked(ln,nn,rn,sn,!0))return;const dn=tn.getId(ln);if(ln===en&&en.defaultView){const fn=getWindowScroll(en.defaultView);ze({id:dn,x:fn.left,y:fn.top})}else ze({id:dn,x:ln.scrollLeft,y:ln.scrollTop})}),an.scroll||100));return on("scroll",cn,en)}function initViewportResizeObserver({viewportResizeCb:ze},{win:en}){let tn=-1,nn=-1;const rn=callbackWrapper(throttle$1(callbackWrapper(()=>{const sn=getWindowHeight(),an=getWindowWidth();(tn!==sn||nn!==an)&&(ze({width:Number(an),height:Number(sn)}),tn=sn,nn=an)}),200));return on("resize",rn,en)}const INPUT_TAGS=["INPUT","TEXTAREA","SELECT"],lastInputValueMap=new WeakMap;function initInputObserver({inputCb:ze,doc:en,mirror:tn,blockClass:nn,blockSelector:rn,unblockSelector:sn,ignoreClass:an,ignoreSelector:cn,maskInputOptions:un,maskInputFn:ln,sampling:dn,userTriggeredOnInput:fn,maskTextClass:pn,unmaskTextClass:hn,maskTextSelector:mn,unmaskTextSelector:gn}){function Sn(yn){let wn=getEventTarget(yn);const Mn=yn.isTrusted,Tn=wn&&toUpperCase(wn.tagName);if(Tn==="OPTION"&&(wn=wn.parentElement),!wn||!Tn||INPUT_TAGS.indexOf(Tn)<0||isBlocked(wn,nn,rn,sn,!0))return;const In=wn;if(In.classList.contains(an)||cn&&In.matches(cn))return;const Cn=getInputType(wn);let Pn=getInputValue(In,Tn,Cn),Bn=!1;const An=shouldMaskInput({maskInputOptions:un,tagName:Tn,type:Cn}),Dn=needMaskingText(wn,pn,mn,hn,gn,An);(Cn==="radio"||Cn==="checkbox")&&(Bn=wn.checked),Pn=maskInputValue({isMasked:Dn,element:wn,value:Pn,maskInputFn:ln}),_n(wn,fn?{text:Pn,isChecked:Bn,userTriggered:Mn}:{text:Pn,isChecked:Bn});const Hn=wn.name;Cn==="radio"&&Hn&&Bn&&en.querySelectorAll(`input[type="radio"][name="${Hn}"]`).forEach(xn=>{if(xn!==wn){const Wn=maskInputValue({isMasked:Dn,element:xn,value:getInputValue(xn,Tn,Cn),maskInputFn:ln});_n(xn,fn?{text:Wn,isChecked:!Bn,userTriggered:!1}:{text:Wn,isChecked:!Bn})}})}function _n(yn,wn){const Mn=lastInputValueMap.get(yn);if(!Mn||Mn.text!==wn.text||Mn.isChecked!==wn.isChecked){lastInputValueMap.set(yn,wn);const Tn=tn.getId(yn);callbackWrapper(ze)({...wn,id:Tn})}}const vn=(dn.input==="last"?["change"]:["input","change"]).map(yn=>on(yn,callbackWrapper(Sn),en)),bn=en.defaultView;if(!bn)return()=>{vn.forEach(yn=>yn())};const Nn=bn.Object.getOwnPropertyDescriptor(bn.HTMLInputElement.prototype,"value"),Rn=[[bn.HTMLInputElement.prototype,"value"],[bn.HTMLInputElement.prototype,"checked"],[bn.HTMLSelectElement.prototype,"value"],[bn.HTMLTextAreaElement.prototype,"value"],[bn.HTMLSelectElement.prototype,"selectedIndex"],[bn.HTMLOptionElement.prototype,"selected"]];return Nn&&Nn.set&&vn.push(...Rn.map(yn=>hookSetter(yn[0],yn[1],{set(){callbackWrapper(Sn)({target:this,isTrusted:!1})}},!1,bn))),callbackWrapper(()=>{vn.forEach(yn=>yn())})}function getNestedCSSRulePositions(ze){const en=[];function tn(nn,rn){if(hasNestedCSSRule("CSSGroupingRule")&&nn.parentRule instanceof CSSGroupingRule||hasNestedCSSRule("CSSMediaRule")&&nn.parentRule instanceof CSSMediaRule||hasNestedCSSRule("CSSSupportsRule")&&nn.parentRule instanceof CSSSupportsRule||hasNestedCSSRule("CSSConditionRule")&&nn.parentRule instanceof CSSConditionRule){const an=Array.from(nn.parentRule.cssRules).indexOf(nn);rn.unshift(an)}else if(nn.parentStyleSheet){const an=Array.from(nn.parentStyleSheet.cssRules).indexOf(nn);rn.unshift(an)}return rn}return tn(ze,en)}function getIdAndStyleId(ze,en,tn){let nn,rn;return ze?(ze.ownerNode?nn=en.getId(ze.ownerNode):rn=tn.getId(ze),{styleId:rn,id:nn}):{}}function initStyleSheetObserver({styleSheetRuleCb:ze,mirror:en,stylesheetManager:tn},{win:nn}){if(!nn.CSSStyleSheet||!nn.CSSStyleSheet.prototype)return()=>{};const rn=nn.CSSStyleSheet.prototype.insertRule;nn.CSSStyleSheet.prototype.insertRule=new Proxy(rn,{apply:callbackWrapper((dn,fn,pn)=>{const[hn,mn]=pn,{id:gn,styleId:Sn}=getIdAndStyleId(fn,en,tn.styleMirror);return(gn&&gn!==-1||Sn&&Sn!==-1)&&ze({id:gn,styleId:Sn,adds:[{rule:hn,index:mn}]}),dn.apply(fn,pn)})});const sn=nn.CSSStyleSheet.prototype.deleteRule;nn.CSSStyleSheet.prototype.deleteRule=new Proxy(sn,{apply:callbackWrapper((dn,fn,pn)=>{const[hn]=pn,{id:mn,styleId:gn}=getIdAndStyleId(fn,en,tn.styleMirror);return(mn&&mn!==-1||gn&&gn!==-1)&&ze({id:mn,styleId:gn,removes:[{index:hn}]}),dn.apply(fn,pn)})});let an;nn.CSSStyleSheet.prototype.replace&&(an=nn.CSSStyleSheet.prototype.replace,nn.CSSStyleSheet.prototype.replace=new Proxy(an,{apply:callbackWrapper((dn,fn,pn)=>{const[hn]=pn,{id:mn,styleId:gn}=getIdAndStyleId(fn,en,tn.styleMirror);return(mn&&mn!==-1||gn&&gn!==-1)&&ze({id:mn,styleId:gn,replace:hn}),dn.apply(fn,pn)})}));let cn;nn.CSSStyleSheet.prototype.replaceSync&&(cn=nn.CSSStyleSheet.prototype.replaceSync,nn.CSSStyleSheet.prototype.replaceSync=new Proxy(cn,{apply:callbackWrapper((dn,fn,pn)=>{const[hn]=pn,{id:mn,styleId:gn}=getIdAndStyleId(fn,en,tn.styleMirror);return(mn&&mn!==-1||gn&&gn!==-1)&&ze({id:mn,styleId:gn,replaceSync:hn}),dn.apply(fn,pn)})}));const un={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?un.CSSGroupingRule=nn.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(un.CSSMediaRule=nn.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(un.CSSConditionRule=nn.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(un.CSSSupportsRule=nn.CSSSupportsRule));const ln={};return Object.entries(un).forEach(([dn,fn])=>{ln[dn]={insertRule:fn.prototype.insertRule,deleteRule:fn.prototype.deleteRule},fn.prototype.insertRule=new Proxy(ln[dn].insertRule,{apply:callbackWrapper((pn,hn,mn)=>{const[gn,Sn]=mn,{id:_n,styleId:En}=getIdAndStyleId(hn.parentStyleSheet,en,tn.styleMirror);return(_n&&_n!==-1||En&&En!==-1)&&ze({id:_n,styleId:En,adds:[{rule:gn,index:[...getNestedCSSRulePositions(hn),Sn||0]}]}),pn.apply(hn,mn)})}),fn.prototype.deleteRule=new Proxy(ln[dn].deleteRule,{apply:callbackWrapper((pn,hn,mn)=>{const[gn]=mn,{id:Sn,styleId:_n}=getIdAndStyleId(hn.parentStyleSheet,en,tn.styleMirror);return(Sn&&Sn!==-1||_n&&_n!==-1)&&ze({id:Sn,styleId:_n,removes:[{index:[...getNestedCSSRulePositions(hn),gn]}]}),pn.apply(hn,mn)})})}),callbackWrapper(()=>{nn.CSSStyleSheet.prototype.insertRule=rn,nn.CSSStyleSheet.prototype.deleteRule=sn,an&&(nn.CSSStyleSheet.prototype.replace=an),cn&&(nn.CSSStyleSheet.prototype.replaceSync=cn),Object.entries(un).forEach(([dn,fn])=>{fn.prototype.insertRule=ln[dn].insertRule,fn.prototype.deleteRule=ln[dn].deleteRule})})}function initAdoptedStyleSheetObserver({mirror:ze,stylesheetManager:en},tn){let nn=null;tn.nodeName==="#document"?nn=ze.getId(tn):nn=ze.getId(tn.host);const rn=tn.nodeName==="#document"?_optionalChain$2([tn,"access",an=>an.defaultView,"optionalAccess",an=>an.Document]):_optionalChain$2([tn,"access",an=>an.ownerDocument,"optionalAccess",an=>an.defaultView,"optionalAccess",an=>an.ShadowRoot]),sn=_optionalChain$2([rn,"optionalAccess",an=>an.prototype])?Object.getOwnPropertyDescriptor(_optionalChain$2([rn,"optionalAccess",an=>an.prototype]),"adoptedStyleSheets"):void 0;return nn===null||nn===-1||!rn||!sn?()=>{}:(Object.defineProperty(tn,"adoptedStyleSheets",{configurable:sn.configurable,enumerable:sn.enumerable,get(){return _optionalChain$2([sn,"access",an=>an.get,"optionalAccess",an=>an.call,"call",an=>an(this)])},set(an){const cn=_optionalChain$2([sn,"access",un=>un.set,"optionalAccess",un=>un.call,"call",un=>un(this,an)]);if(nn!==null&&nn!==-1)try{en.adoptStyleSheets(an,nn)}catch{}return cn}}),callbackWrapper(()=>{Object.defineProperty(tn,"adoptedStyleSheets",{configurable:sn.configurable,enumerable:sn.enumerable,get:sn.get,set:sn.set})}))}function initStyleDeclarationObserver({styleDeclarationCb:ze,mirror:en,ignoreCSSAttributes:tn,stylesheetManager:nn},{win:rn}){const sn=rn.CSSStyleDeclaration.prototype.setProperty;rn.CSSStyleDeclaration.prototype.setProperty=new Proxy(sn,{apply:callbackWrapper((cn,un,ln)=>{const[dn,fn,pn]=ln;if(tn.has(dn))return sn.apply(un,[dn,fn,pn]);const{id:hn,styleId:mn}=getIdAndStyleId(_optionalChain$2([un,"access",gn=>gn.parentRule,"optionalAccess",gn=>gn.parentStyleSheet]),en,nn.styleMirror);return(hn&&hn!==-1||mn&&mn!==-1)&&ze({id:hn,styleId:mn,set:{property:dn,value:fn,priority:pn},index:getNestedCSSRulePositions(un.parentRule)}),cn.apply(un,ln)})});const an=rn.CSSStyleDeclaration.prototype.removeProperty;return rn.CSSStyleDeclaration.prototype.removeProperty=new Proxy(an,{apply:callbackWrapper((cn,un,ln)=>{const[dn]=ln;if(tn.has(dn))return an.apply(un,[dn]);const{id:fn,styleId:pn}=getIdAndStyleId(_optionalChain$2([un,"access",hn=>hn.parentRule,"optionalAccess",hn=>hn.parentStyleSheet]),en,nn.styleMirror);return(fn&&fn!==-1||pn&&pn!==-1)&&ze({id:fn,styleId:pn,remove:{property:dn},index:getNestedCSSRulePositions(un.parentRule)}),cn.apply(un,ln)})}),callbackWrapper(()=>{rn.CSSStyleDeclaration.prototype.setProperty=sn,rn.CSSStyleDeclaration.prototype.removeProperty=an})}function initMediaInteractionObserver({mediaInteractionCb:ze,blockClass:en,blockSelector:tn,unblockSelector:nn,mirror:rn,sampling:sn,doc:an}){const cn=callbackWrapper(ln=>throttle$1(callbackWrapper(dn=>{const fn=getEventTarget(dn);if(!fn||isBlocked(fn,en,tn,nn,!0))return;const{currentTime:pn,volume:hn,muted:mn,playbackRate:gn}=fn;ze({type:ln,id:rn.getId(fn),currentTime:pn,volume:hn,muted:mn,playbackRate:gn})}),sn.media||500)),un=[on("play",cn(0),an),on("pause",cn(1),an),on("seeked",cn(2),an),on("volumechange",cn(3),an),on("ratechange",cn(4),an)];return callbackWrapper(()=>{un.forEach(ln=>ln())})}function initFontObserver({fontCb:ze,doc:en}){const tn=en.defaultView;if(!tn)return()=>{};const nn=[],rn=new WeakMap,sn=tn.FontFace;tn.FontFace=function(un,ln,dn){const fn=new sn(un,ln,dn);return rn.set(fn,{family:un,buffer:typeof ln!="string",descriptors:dn,fontSource:typeof ln=="string"?ln:JSON.stringify(Array.from(new Uint8Array(ln)))}),fn};const an=patch(en.fonts,"add",function(cn){return function(un){return setTimeout(callbackWrapper(()=>{const ln=rn.get(un);ln&&(ze(ln),rn.delete(un))}),0),cn.apply(this,[un])}});return nn.push(()=>{tn.FontFace=sn}),nn.push(an),callbackWrapper(()=>{nn.forEach(cn=>cn())})}function initSelectionObserver(ze){const{doc:en,mirror:tn,blockClass:nn,blockSelector:rn,unblockSelector:sn,selectionCb:an}=ze;let cn=!0;const un=callbackWrapper(()=>{const ln=en.getSelection();if(!ln||cn&&_optionalChain$2([ln,"optionalAccess",pn=>pn.isCollapsed]))return;cn=ln.isCollapsed||!1;const dn=[],fn=ln.rangeCount||0;for(let pn=0;pn<fn;pn++){const hn=ln.getRangeAt(pn),{startContainer:mn,startOffset:gn,endContainer:Sn,endOffset:_n}=hn;isBlocked(mn,nn,rn,sn,!0)||isBlocked(Sn,nn,rn,sn,!0)||dn.push({start:tn.getId(mn),startOffset:gn,end:tn.getId(Sn),endOffset:_n})}an({ranges:dn})});return un(),on("selectionchange",un)}function initCustomElementObserver({doc:ze,customElementCb:en}){const tn=ze.defaultView;return!tn||!tn.customElements?()=>{}:patch(tn.customElements,"define",function(rn){return function(sn,an,cn){try{en({define:{name:sn}})}catch{}return rn.apply(this,[sn,an,cn])}})}function initObservers(ze,en={}){const tn=ze.doc.defaultView;if(!tn)return()=>{};const nn=initMutationObserver(ze,ze.doc),rn=initMoveObserver(ze),sn=initMouseInteractionObserver(ze),an=initScrollObserver(ze),cn=initViewportResizeObserver(ze,{win:tn}),un=initInputObserver(ze),ln=initMediaInteractionObserver(ze),dn=initStyleSheetObserver(ze,{win:tn}),fn=initAdoptedStyleSheetObserver(ze,ze.doc),pn=initStyleDeclarationObserver(ze,{win:tn}),hn=ze.collectFonts?initFontObserver(ze):()=>{},mn=initSelectionObserver(ze),gn=initCustomElementObserver(ze),Sn=[];for(const _n of ze.plugins)Sn.push(_n.observer(_n.callback,tn,_n.options));return callbackWrapper(()=>{mutationBuffers.forEach(_n=>_n.reset()),nn.disconnect(),rn(),sn(),an(),cn(),un(),ln(),dn(),fn(),pn(),hn(),mn(),gn(),Sn.forEach(_n=>_n())})}function hasNestedCSSRule(ze){return typeof window[ze]<"u"}function canMonkeyPatchNestedCSSRule(ze){return!!(typeof window[ze]<"u"&&window[ze].prototype&&"insertRule"in window[ze].prototype&&"deleteRule"in window[ze].prototype)}class CrossOriginIframeMirror{constructor(en){this.generateIdFn=en,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(en,tn,nn,rn){const sn=nn||this.getIdToRemoteIdMap(en),an=rn||this.getRemoteIdToIdMap(en);let cn=sn.get(tn);return cn||(cn=this.generateIdFn(),sn.set(tn,cn),an.set(cn,tn)),cn}getIds(en,tn){const nn=this.getIdToRemoteIdMap(en),rn=this.getRemoteIdToIdMap(en);return tn.map(sn=>this.getId(en,sn,nn,rn))}getRemoteId(en,tn,nn){const rn=nn||this.getRemoteIdToIdMap(en);if(typeof tn!="number")return tn;const sn=rn.get(tn);return sn||-1}getRemoteIds(en,tn){const nn=this.getRemoteIdToIdMap(en);return tn.map(rn=>this.getRemoteId(en,rn,nn))}reset(en){if(!en){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(en),this.iframeRemoteIdToIdMap.delete(en)}getIdToRemoteIdMap(en){let tn=this.iframeIdToRemoteIdMap.get(en);return tn||(tn=new Map,this.iframeIdToRemoteIdMap.set(en,tn)),tn}getRemoteIdToIdMap(en){let tn=this.iframeRemoteIdToIdMap.get(en);return tn||(tn=new Map,this.iframeRemoteIdToIdMap.set(en,tn)),tn}}function _optionalChain$1(ze){let en,tn=ze[0],nn=1;for(;nn<ze.length;){const rn=ze[nn],sn=ze[nn+1];if(nn+=2,(rn==="optionalAccess"||rn==="optionalCall")&&tn==null)return;rn==="access"||rn==="optionalAccess"?(en=tn,tn=sn(tn)):(rn==="call"||rn==="optionalCall")&&(tn=sn((...an)=>tn.call(en,...an)),en=void 0)}return tn}class IframeManagerNoop{constructor(){this.crossOriginIframeMirror=new CrossOriginIframeMirror(genId),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class IframeManager{constructor(en){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new CrossOriginIframeMirror(genId),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=en.mutationCb,this.wrappedEmit=en.wrappedEmit,this.stylesheetManager=en.stylesheetManager,this.recordCrossOriginIframes=en.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=en.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(en){this.iframes.set(en,!0),en.contentWindow&&this.crossOriginIframeMap.set(en.contentWindow,en)}addLoadListener(en){this.loadListener=en}attachIframe(en,tn){this.mutationCb({adds:[{parentId:this.mirror.getId(en),nextId:null,node:tn}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),_optionalChain$1([this,"access",nn=>nn.loadListener,"optionalCall",nn=>nn(en)]),en.contentDocument&&en.contentDocument.adoptedStyleSheets&&en.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(en.contentDocument.adoptedStyleSheets,this.mirror.getId(en.contentDocument))}handleMessage(en){const tn=en;if(tn.data.type!=="rrweb"||tn.origin!==tn.data.origin||!en.source)return;const rn=this.crossOriginIframeMap.get(en.source);if(!rn)return;const sn=this.transformCrossOriginEvent(rn,tn.data.event);sn&&this.wrappedEmit(sn,tn.data.isCheckout)}transformCrossOriginEvent(en,tn){switch(tn.type){case EventType.FullSnapshot:{this.crossOriginIframeMirror.reset(en),this.crossOriginIframeStyleMirror.reset(en),this.replaceIdOnNode(tn.data.node,en);const nn=tn.data.node.id;return this.crossOriginIframeRootIdMap.set(en,nn),this.patchRootIdOnNode(tn.data.node,nn),{timestamp:tn.timestamp,type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,adds:[{parentId:this.mirror.getId(en),nextId:null,node:tn.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case EventType.Meta:case EventType.Load:case EventType.DomContentLoaded:return!1;case EventType.Plugin:return tn;case EventType.Custom:return this.replaceIds(tn.data.payload,en,["id","parentId","previousId","nextId"]),tn;case EventType.IncrementalSnapshot:switch(tn.data.source){case IncrementalSource.Mutation:return tn.data.adds.forEach(nn=>{this.replaceIds(nn,en,["parentId","nextId","previousId"]),this.replaceIdOnNode(nn.node,en);const rn=this.crossOriginIframeRootIdMap.get(en);rn&&this.patchRootIdOnNode(nn.node,rn)}),tn.data.removes.forEach(nn=>{this.replaceIds(nn,en,["parentId","id"])}),tn.data.attributes.forEach(nn=>{this.replaceIds(nn,en,["id"])}),tn.data.texts.forEach(nn=>{this.replaceIds(nn,en,["id"])}),tn;case IncrementalSource.Drag:case IncrementalSource.TouchMove:case IncrementalSource.MouseMove:return tn.data.positions.forEach(nn=>{this.replaceIds(nn,en,["id"])}),tn;case IncrementalSource.ViewportResize:return!1;case IncrementalSource.MediaInteraction:case IncrementalSource.MouseInteraction:case IncrementalSource.Scroll:case IncrementalSource.CanvasMutation:case IncrementalSource.Input:return this.replaceIds(tn.data,en,["id"]),tn;case IncrementalSource.StyleSheetRule:case IncrementalSource.StyleDeclaration:return this.replaceIds(tn.data,en,["id"]),this.replaceStyleIds(tn.data,en,["styleId"]),tn;case IncrementalSource.Font:return tn;case IncrementalSource.Selection:return tn.data.ranges.forEach(nn=>{this.replaceIds(nn,en,["start","end"])}),tn;case IncrementalSource.AdoptedStyleSheet:return this.replaceIds(tn.data,en,["id"]),this.replaceStyleIds(tn.data,en,["styleIds"]),_optionalChain$1([tn,"access",nn=>nn.data,"access",nn=>nn.styles,"optionalAccess",nn=>nn.forEach,"call",nn=>nn(rn=>{this.replaceStyleIds(rn,en,["styleId"])})]),tn}}return!1}replace(en,tn,nn,rn){for(const sn of rn)!Array.isArray(tn[sn])&&typeof tn[sn]!="number"||(Array.isArray(tn[sn])?tn[sn]=en.getIds(nn,tn[sn]):tn[sn]=en.getId(nn,tn[sn]));return tn}replaceIds(en,tn,nn){return this.replace(this.crossOriginIframeMirror,en,tn,nn)}replaceStyleIds(en,tn,nn){return this.replace(this.crossOriginIframeStyleMirror,en,tn,nn)}replaceIdOnNode(en,tn){this.replaceIds(en,tn,["id","rootId"]),"childNodes"in en&&en.childNodes.forEach(nn=>{this.replaceIdOnNode(nn,tn)})}patchRootIdOnNode(en,tn){en.type!==NodeType$1.Document&&!en.rootId&&(en.rootId=tn),"childNodes"in en&&en.childNodes.forEach(nn=>{this.patchRootIdOnNode(nn,tn)})}}class ShadowDomManagerNoop{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class ShadowDomManager{constructor(en){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=en.mutationCb,this.scrollCb=en.scrollCb,this.bypassOptions=en.bypassOptions,this.mirror=en.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(en,tn){if(!isNativeShadowDom(en)||this.shadowDoms.has(en))return;this.shadowDoms.add(en);const nn=initMutationObserver({...this.bypassOptions,doc:tn,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},en);this.restoreHandlers.push(()=>nn.disconnect()),this.restoreHandlers.push(initScrollObserver({...this.bypassOptions,scrollCb:this.scrollCb,doc:en,mirror:this.mirror})),setTimeout(()=>{en.adoptedStyleSheets&&en.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(en.adoptedStyleSheets,this.mirror.getId(en.host)),this.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},en))},0)}observeAttachShadow(en){!en.contentWindow||!en.contentDocument||this.patchAttachShadow(en.contentWindow.Element,en.contentDocument)}patchAttachShadow(en,tn){const nn=this;this.restoreHandlers.push(patch(en.prototype,"attachShadow",function(rn){return function(sn){const an=rn.call(this,sn);return this.shadowRoot&&inDom(this)&&nn.addShadowRoot(this.shadowRoot,tn),an}}))}reset(){this.restoreHandlers.forEach(en=>{try{en()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class CanvasManagerNoop{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class StylesheetManager{constructor(en){this.trackedLinkElements=new WeakSet,this.styleMirror=new StyleSheetMirror,this.mutationCb=en.mutationCb,this.adoptedStyleSheetCb=en.adoptedStyleSheetCb}attachLinkElement(en,tn){"_cssText"in tn.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:tn.id,attributes:tn.attributes}]}),this.trackLinkElement(en)}trackLinkElement(en){this.trackedLinkElements.has(en)||(this.trackedLinkElements.add(en),this.trackStylesheetInLinkElement(en))}adoptStyleSheets(en,tn){if(en.length===0)return;const nn={id:tn,styleIds:[]},rn=[];for(const sn of en){let an;this.styleMirror.has(sn)?an=this.styleMirror.getId(sn):(an=this.styleMirror.add(sn),rn.push({styleId:an,rules:Array.from(sn.rules||CSSRule,(cn,un)=>({rule:stringifyRule(cn),index:un}))})),nn.styleIds.push(an)}rn.length>0&&(nn.styles=rn),this.adoptedStyleSheetCb(nn)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(en){}}class ProcessedNodeManager{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){onRequestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(en,tn){const nn=this.nodeMap.get(en);return nn&&Array.from(nn).some(rn=>rn!==tn)}add(en,tn){this.nodeMap.set(en,(this.nodeMap.get(en)||new Set).add(tn))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function wrapEvent(ze){const en=ze;return en.timestamp=nowTimestamp(),en}let _takeFullSnapshot;const mirror=createMirror();function record(ze={}){const{emit:en,checkoutEveryNms:tn,checkoutEveryNth:nn,blockClass:rn="rr-block",blockSelector:sn=null,unblockSelector:an=null,ignoreClass:cn="rr-ignore",ignoreSelector:un=null,maskAllText:ln=!1,maskTextClass:dn="rr-mask",unmaskTextClass:fn=null,maskTextSelector:pn=null,unmaskTextSelector:hn=null,inlineStylesheet:mn=!0,maskAllInputs:gn,maskInputOptions:Sn,slimDOMOptions:_n,maskAttributeFn:En,maskInputFn:vn,maskTextFn:bn,packFn:Nn,sampling:Rn={},dataURLOptions:yn={},mousemoveWait:wn,recordCanvas:Mn=!1,recordCrossOriginIframes:Tn=!1,recordAfter:In=ze.recordAfter==="DOMContentLoaded"?ze.recordAfter:"load",userTriggeredOnInput:Cn=!1,collectFonts:Pn=!1,inlineImages:Bn=!1,plugins:An,keepIframeSrcFn:Dn=()=>!1,ignoreCSSAttributes:Hn=new Set([]),errorHandler:xn,onMutation:Wn,getCanvasManager:zn}=ze;registerErrorHandler(xn);const Xn=Tn?window.parent===window:!0;let Kn=!1;if(!Xn)try{window.parent.document&&(Kn=!1)}catch{Kn=!0}if(Xn&&!en)throw new Error("emit function is required");wn!==void 0&&Rn.mousemove===void 0&&(Rn.mousemove=wn),mirror.reset();const Zn=gn===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:Sn!==void 0?Sn:{},Jn=_n===!0||_n==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:_n==="all",headMetaDescKeywords:_n==="all"}:_n||{};polyfill();let Fn,Yr=0;const Jr=On=>{for(const jn of An||[])jn.eventProcessor&&(On=jn.eventProcessor(On));return Nn&&!Kn&&(On=Nn(On)),On},Un=(On,jn)=>{if(_optionalChain([mutationBuffers,"access",kn=>kn[0],"optionalAccess",kn=>kn.isFrozen,"call",kn=>kn()])&&On.type!==EventType.FullSnapshot&&!(On.type===EventType.IncrementalSnapshot&&On.data.source===IncrementalSource.Mutation)&&mutationBuffers.forEach(kn=>kn.unfreeze()),Xn)_optionalChain([en,"optionalCall",kn=>kn(Jr(On),jn)]);else if(Kn){const kn={type:"rrweb",event:Jr(On),origin:window.location.origin,isCheckout:jn};window.parent.postMessage(kn,"*")}if(On.type===EventType.FullSnapshot)Fn=On,Yr=0;else if(On.type===EventType.IncrementalSnapshot){if(On.data.source===IncrementalSource.Mutation&&On.data.isAttachIframe)return;Yr++;const kn=nn&&Yr>=nn,Qn=tn&&Fn&&On.timestamp-Fn.timestamp>tn;(kn||Qn)&&Yn(!0)}},qn=On=>{Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,...On}}))},Qr=On=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Scroll,...On}})),Kr=On=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.CanvasMutation,...On}})),ei=On=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.AdoptedStyleSheet,...On}})),$n=new StylesheetManager({mutationCb:qn,adoptedStyleSheetCb:ei}),Vn=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new IframeManagerNoop:new IframeManager({mirror,mutationCb:qn,stylesheetManager:$n,recordCrossOriginIframes:Tn,wrappedEmit:Un});for(const On of An||[])On.getMirror&&On.getMirror({nodeMirror:mirror,crossOriginIframeMirror:Vn.crossOriginIframeMirror,crossOriginIframeStyleMirror:Vn.crossOriginIframeStyleMirror});const Wr=new ProcessedNodeManager,Zr=_getCanvasManager(zn,{mirror,win:window,mutationCb:On=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.CanvasMutation,...On}})),recordCanvas:Mn,blockClass:rn,blockSelector:sn,unblockSelector:an,sampling:Rn.canvas,dataURLOptions:yn,errorHandler:xn}),Gn=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new ShadowDomManagerNoop:new ShadowDomManager({mutationCb:qn,scrollCb:Qr,bypassOptions:{onMutation:Wn,blockClass:rn,blockSelector:sn,unblockSelector:an,maskAllText:ln,maskTextClass:dn,unmaskTextClass:fn,maskTextSelector:pn,unmaskTextSelector:hn,inlineStylesheet:mn,maskInputOptions:Zn,dataURLOptions:yn,maskAttributeFn:En,maskTextFn:bn,maskInputFn:vn,recordCanvas:Mn,inlineImages:Bn,sampling:Rn,slimDOMOptions:Jn,iframeManager:Vn,stylesheetManager:$n,canvasManager:Zr,keepIframeSrcFn:Dn,processedNodeManager:Wr},mirror}),Yn=(On=!1)=>{Un(wrapEvent({type:EventType.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}}),On),$n.reset(),Gn.init(),mutationBuffers.forEach(kn=>kn.lock());const jn=snapshot(document,{mirror,blockClass:rn,blockSelector:sn,unblockSelector:an,maskAllText:ln,maskTextClass:dn,unmaskTextClass:fn,maskTextSelector:pn,unmaskTextSelector:hn,inlineStylesheet:mn,maskAllInputs:Zn,maskAttributeFn:En,maskInputFn:vn,maskTextFn:bn,slimDOM:Jn,dataURLOptions:yn,recordCanvas:Mn,inlineImages:Bn,onSerialize:kn=>{isSerializedIframe(kn,mirror)&&Vn.addIframe(kn),isSerializedStylesheet(kn,mirror)&&$n.trackLinkElement(kn),hasShadowRoot(kn)&&Gn.addShadowRoot(kn.shadowRoot,document)},onIframeLoad:(kn,Qn)=>{Vn.attachIframe(kn,Qn),Gn.observeAttachShadow(kn)},onStylesheetLoad:(kn,Qn)=>{$n.attachLinkElement(kn,Qn)},keepIframeSrcFn:Dn});if(!jn)return console.warn("Failed to snapshot the document");Un(wrapEvent({type:EventType.FullSnapshot,data:{node:jn,initialOffset:getWindowScroll(window)}})),mutationBuffers.forEach(kn=>kn.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&$n.adoptStyleSheets(document.adoptedStyleSheets,mirror.getId(document))};_takeFullSnapshot=Yn;try{const On=[],jn=Qn=>callbackWrapper(initObservers)({onMutation:Wn,mutationCb:qn,mousemoveCb:(Ln,Gr)=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:Gr,positions:Ln}})),mouseInteractionCb:Ln=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.MouseInteraction,...Ln}})),scrollCb:Qr,viewportResizeCb:Ln=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.ViewportResize,...Ln}})),inputCb:Ln=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Input,...Ln}})),mediaInteractionCb:Ln=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.MediaInteraction,...Ln}})),styleSheetRuleCb:Ln=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.StyleSheetRule,...Ln}})),styleDeclarationCb:Ln=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.StyleDeclaration,...Ln}})),canvasMutationCb:Kr,fontCb:Ln=>Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Font,...Ln}})),selectionCb:Ln=>{Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Selection,...Ln}}))},customElementCb:Ln=>{Un(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.CustomElement,...Ln}}))},blockClass:rn,ignoreClass:cn,ignoreSelector:un,maskAllText:ln,maskTextClass:dn,unmaskTextClass:fn,maskTextSelector:pn,unmaskTextSelector:hn,maskInputOptions:Zn,inlineStylesheet:mn,sampling:Rn,recordCanvas:Mn,inlineImages:Bn,userTriggeredOnInput:Cn,collectFonts:Pn,doc:Qn,maskAttributeFn:En,maskInputFn:vn,maskTextFn:bn,keepIframeSrcFn:Dn,blockSelector:sn,unblockSelector:an,slimDOMOptions:Jn,dataURLOptions:yn,mirror,iframeManager:Vn,stylesheetManager:$n,shadowDomManager:Gn,processedNodeManager:Wr,canvasManager:Zr,ignoreCSSAttributes:Hn,plugins:_optionalChain([An,"optionalAccess",Ln=>Ln.filter,"call",Ln=>Ln(Gr=>Gr.observer),"optionalAccess",Ln=>Ln.map,"call",Ln=>Ln(Gr=>({observer:Gr.observer,options:Gr.options,callback:ti=>Un(wrapEvent({type:EventType.Plugin,data:{plugin:Gr.name,payload:ti}}))}))])||[]},{});Vn.addLoadListener(Qn=>{try{On.push(jn(Qn.contentDocument))}catch(Ln){console.warn(Ln)}});const kn=()=>{Yn(),On.push(jn(document))};return document.readyState==="interactive"||document.readyState==="complete"?kn():(On.push(on("DOMContentLoaded",()=>{Un(wrapEvent({type:EventType.DomContentLoaded,data:{}})),In==="DOMContentLoaded"&&kn()})),On.push(on("load",()=>{Un(wrapEvent({type:EventType.Load,data:{}})),In==="load"&&kn()},window))),()=>{On.forEach(Qn=>Qn()),Wr.destroy(),_takeFullSnapshot=void 0,unregisterErrorHandler()}}catch(On){console.warn(On)}}function takeFullSnapshot(ze){if(!_takeFullSnapshot)throw new Error("please take full snapshot after start recording");_takeFullSnapshot(ze)}record.mirror=mirror;record.takeFullSnapshot=takeFullSnapshot;function _getCanvasManager(ze,en){try{return ze?ze(en):new CanvasManagerNoop}catch{return console.warn("Unable to initialize CanvasManager"),new CanvasManagerNoop}}const ReplayEventTypeIncrementalSnapshot=3,ReplayEventTypeCustom=5;function timestampToMs(ze){return ze>9999999999?ze:ze*1e3}function timestampToS(ze){return ze>9999999999?ze/1e3:ze}function addBreadcrumbEvent(ze,en){en.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(en.category)?ze.triggerUserActivity():ze.checkAndHandleExpiredSession(),ze.addUpdate(()=>(ze.throttledAddEvent({type:EventType.Custom,timestamp:(en.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:normalize(en,10,1e3)}}),en.category==="console")))}const INTERACTIVE_SELECTOR="button,a";function getClosestInteractive(ze){return ze.closest(INTERACTIVE_SELECTOR)||ze}function getClickTargetNode(ze){const en=getTargetNode(ze);return!en||!(en instanceof Element)?en:getClosestInteractive(en)}function getTargetNode(ze){return isEventWithTarget(ze)?ze.target:ze}function isEventWithTarget(ze){return typeof ze=="object"&&!!ze&&"target"in ze}let handlers;function onWindowOpen(ze){return handlers||(handlers=[],monkeyPatchWindowOpen()),handlers.push(ze),()=>{const en=handlers?handlers.indexOf(ze):-1;en>-1&&handlers.splice(en,1)}}function monkeyPatchWindowOpen(){fill(WINDOW,"open",function(ze){return function(...en){if(handlers)try{handlers.forEach(tn=>tn())}catch{}return ze.apply(WINDOW,en)}})}function handleClick(ze,en,tn){ze.handleClick(en,tn)}class ClickDetector{constructor(en,tn,nn=addBreadcrumbEvent){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=tn.timeout/1e3,this._threshold=tn.threshold/1e3,this._scollTimeout=tn.scrollTimeout/1e3,this._replay=en,this._ignoreSelector=tn.ignoreSelector,this._addBreadcrumbEvent=nn}addListeners(){const en=onWindowOpen(()=>{this._lastMutation=nowInSeconds()});this._teardown=()=>{en(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(en,tn){if(ignoreElement(tn,this._ignoreSelector)||!isClickBreadcrumb(en))return;const nn={timestamp:timestampToS(en.timestamp),clickBreadcrumb:en,clickCount:0,node:tn};this._clicks.some(rn=>rn.node===nn.node&&Math.abs(rn.timestamp-nn.timestamp)<1)||(this._clicks.push(nn),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(en=Date.now()){this._lastMutation=timestampToS(en)}registerScroll(en=Date.now()){this._lastScroll=timestampToS(en)}registerClick(en){const tn=getClosestInteractive(en);this._handleMultiClick(tn)}_handleMultiClick(en){this._getClicks(en).forEach(tn=>{tn.clickCount++})}_getClicks(en){return this._clicks.filter(tn=>tn.node===en)}_checkClicks(){const en=[],tn=nowInSeconds();this._clicks.forEach(nn=>{!nn.mutationAfter&&this._lastMutation&&(nn.mutationAfter=nn.timestamp<=this._lastMutation?this._lastMutation-nn.timestamp:void 0),!nn.scrollAfter&&this._lastScroll&&(nn.scrollAfter=nn.timestamp<=this._lastScroll?this._lastScroll-nn.timestamp:void 0),nn.timestamp+this._timeout<=tn&&en.push(nn)});for(const nn of en){const rn=this._clicks.indexOf(nn);rn>-1&&(this._generateBreadcrumbs(nn),this._clicks.splice(rn,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(en){const tn=this._replay,nn=en.scrollAfter&&en.scrollAfter<=this._scollTimeout,rn=en.mutationAfter&&en.mutationAfter<=this._threshold,sn=!nn&&!rn,{clickCount:an,clickBreadcrumb:cn}=en;if(sn){const un=Math.min(en.mutationAfter||this._timeout,this._timeout)*1e3,ln=un<this._timeout*1e3?"mutation":"timeout",dn={type:"default",message:cn.message,timestamp:cn.timestamp,category:"ui.slowClickDetected",data:{...cn.data,url:WINDOW.location.href,route:tn.getCurrentRoute(),timeAfterClickMs:un,endReason:ln,clickCount:an||1}};this._addBreadcrumbEvent(tn,dn);return}if(an>1){const un={type:"default",message:cn.message,timestamp:cn.timestamp,category:"ui.multiClick",data:{...cn.data,url:WINDOW.location.href,route:tn.getCurrentRoute(),clickCount:an,metric:!0}};this._addBreadcrumbEvent(tn,un)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const SLOW_CLICK_TAGS=["A","BUTTON","INPUT"];function ignoreElement(ze,en){return!!(!SLOW_CLICK_TAGS.includes(ze.tagName)||ze.tagName==="INPUT"&&!["submit","button"].includes(ze.getAttribute("type")||"")||ze.tagName==="A"&&(ze.hasAttribute("download")||ze.hasAttribute("target")&&ze.getAttribute("target")!=="_self")||en&&ze.matches(en))}function isClickBreadcrumb(ze){return!!(ze.data&&typeof ze.data.nodeId=="number"&&ze.timestamp)}function nowInSeconds(){return Date.now()/1e3}function updateClickDetectorForRecordingEvent(ze,en){try{if(!isIncrementalEvent(en))return;const{source:tn}=en.data;if(tn===IncrementalSource.Mutation&&ze.registerMutation(en.timestamp),tn===IncrementalSource.Scroll&&ze.registerScroll(en.timestamp),isIncrementalMouseInteraction(en)){const{type:nn,id:rn}=en.data,sn=record.mirror.getNode(rn);sn instanceof HTMLElement&&nn===MouseInteractions.Click&&ze.registerClick(sn)}}catch{}}function isIncrementalEvent(ze){return ze.type===ReplayEventTypeIncrementalSnapshot}function isIncrementalMouseInteraction(ze){return ze.data.source===IncrementalSource.MouseInteraction}function createBreadcrumb(ze){return{timestamp:Date.now()/1e3,type:"default",...ze}}var NodeType;(function(ze){ze[ze.Document=0]="Document",ze[ze.DocumentType=1]="DocumentType",ze[ze.Element=2]="Element",ze[ze.Text=3]="Text",ze[ze.CDATA=4]="CDATA",ze[ze.Comment=5]="Comment"})(NodeType||(NodeType={}));const ATTRIBUTES_TO_RECORD=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function getAttributesToRecord(ze){const en={};for(const tn in ze)if(ATTRIBUTES_TO_RECORD.has(tn)){let nn=tn;(tn==="data-testid"||tn==="data-test-id")&&(nn="testId"),en[nn]=ze[tn]}return en}const handleDomListener=ze=>en=>{if(!ze.isEnabled())return;const tn=handleDom(en);if(!tn)return;const nn=en.name==="click",rn=nn?en.event:void 0;nn&&ze.clickDetector&&rn&&rn.target&&!rn.altKey&&!rn.metaKey&&!rn.ctrlKey&&!rn.shiftKey&&handleClick(ze.clickDetector,tn,getClickTargetNode(en.event)),addBreadcrumbEvent(ze,tn)};function getBaseDomBreadcrumb(ze,en){const tn=record.mirror.getId(ze),nn=tn&&record.mirror.getNode(tn),rn=nn&&record.mirror.getMeta(nn),sn=rn&&isElement(rn)?rn:null;return{message:en,data:sn?{nodeId:tn,node:{id:tn,tagName:sn.tagName,textContent:Array.from(sn.childNodes).map(an=>an.type===NodeType.Text&&an.textContent).filter(Boolean).map(an=>an.trim()).join(""),attributes:getAttributesToRecord(sn.attributes)}}:{}}}function handleDom(ze){const{target:en,message:tn}=getDomTarget(ze);return createBreadcrumb({category:`ui.${ze.name}`,...getBaseDomBreadcrumb(en,tn)})}function getDomTarget(ze){const en=ze.name==="click";let tn,nn=null;try{nn=en?getClickTargetNode(ze.event):getTargetNode(ze.event),tn=htmlTreeAsString(nn,{maxStringLength:200})||"<unknown>"}catch{tn="<unknown>"}return{target:nn,message:tn}}function isElement(ze){return ze.type===NodeType.Element}function handleKeyboardEvent(ze,en){if(!ze.isEnabled())return;ze.updateUserActivity();const tn=getKeyboardBreadcrumb(en);tn&&addBreadcrumbEvent(ze,tn)}function getKeyboardBreadcrumb(ze){const{metaKey:en,shiftKey:tn,ctrlKey:nn,altKey:rn,key:sn,target:an}=ze;if(!an||isInputElement(an)||!sn)return null;const cn=en||nn||rn,un=sn.length===1;if(!cn&&un)return null;const ln=htmlTreeAsString(an,{maxStringLength:200})||"<unknown>",dn=getBaseDomBreadcrumb(an,ln);return createBreadcrumb({category:"ui.keyDown",message:ln,data:{...dn.data,metaKey:en,shiftKey:tn,ctrlKey:nn,altKey:rn,key:sn}})}function isInputElement(ze){return ze.tagName==="INPUT"||ze.tagName==="TEXTAREA"||ze.isContentEditable}const ENTRY_TYPES={resource:createResourceEntry,paint:createPaintEntry,navigation:createNavigationEntry};function createPerformanceEntries(ze){return ze.map(createPerformanceEntry).filter(Boolean)}function createPerformanceEntry(ze){return ENTRY_TYPES[ze.entryType]?ENTRY_TYPES[ze.entryType](ze):null}function getAbsoluteTime(ze){return((browserPerformanceTimeOrigin||WINDOW.performance.timeOrigin)+ze)/1e3}function createPaintEntry(ze){const{duration:en,entryType:tn,name:nn,startTime:rn}=ze,sn=getAbsoluteTime(rn);return{type:tn,name:nn,start:sn,end:sn+en,data:void 0}}function createNavigationEntry(ze){const{entryType:en,name:tn,decodedBodySize:nn,duration:rn,domComplete:sn,encodedBodySize:an,domContentLoadedEventStart:cn,domContentLoadedEventEnd:un,domInteractive:ln,loadEventStart:dn,loadEventEnd:fn,redirectCount:pn,startTime:hn,transferSize:mn,type:gn}=ze;return rn===0?null:{type:`${en}.${gn}`,start:getAbsoluteTime(hn),end:getAbsoluteTime(sn),name:tn,data:{size:mn,decodedBodySize:nn,encodedBodySize:an,duration:rn,domInteractive:ln,domContentLoadedEventStart:cn,domContentLoadedEventEnd:un,loadEventStart:dn,loadEventEnd:fn,domComplete:sn,redirectCount:pn}}}function createResourceEntry(ze){const{entryType:en,initiatorType:tn,name:nn,responseEnd:rn,startTime:sn,decodedBodySize:an,encodedBodySize:cn,responseStatus:un,transferSize:ln}=ze;return["fetch","xmlhttprequest"].includes(tn)?null:{type:`${en}.${tn}`,start:getAbsoluteTime(sn),end:getAbsoluteTime(rn),name:nn,data:{size:ln,statusCode:un,decodedBodySize:an,encodedBodySize:cn}}}function getLargestContentfulPaint(ze){const en=ze.entries,tn=en[en.length-1],nn=tn?tn.element:void 0,rn=ze.value,sn=getAbsoluteTime(rn);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:sn,end:sn,data:{value:rn,size:rn,nodeId:nn?record.mirror.getId(nn):void 0}}}function setupPerformanceObserver(ze){function en(rn){ze.performanceEntries.includes(rn)||ze.performanceEntries.push(rn)}function tn({entries:rn}){rn.forEach(en)}const nn=[];return["navigation","paint","resource"].forEach(rn=>{nn.push(addPerformanceInstrumentationHandler(rn,tn))}),nn.push(addLcpInstrumentationHandler(({metric:rn})=>{ze.replayPerformanceEntries.push(getLargestContentfulPaint(rn))})),()=>{nn.forEach(rn=>rn())}}const DEBUG_BUILD=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,r='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function e(){const ze=new Blob([r]);return URL.createObjectURL(ze)}function logInfo(ze,en){DEBUG_BUILD&&(logger.info(ze),en&&addLogBreadcrumb(ze))}function logInfoNextTick(ze,en){DEBUG_BUILD&&(logger.info(ze),en&&setTimeout(()=>{addLogBreadcrumb(ze)},0))}function addLogBreadcrumb(ze){addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:ze},{level:"info"})}class EventBufferSizeExceededError extends Error{constructor(){super(`Event buffer exceeded maximum size of ${REPLAY_MAX_EVENT_BUFFER_SIZE}.`)}}class EventBufferArray{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(en){const tn=JSON.stringify(en).length;if(this._totalSize+=tn,this._totalSize>REPLAY_MAX_EVENT_BUFFER_SIZE)throw new EventBufferSizeExceededError;this.events.push(en)}finish(){return new Promise(en=>{const tn=this.events;this.clear(),en(JSON.stringify(tn))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const en=this.events.map(tn=>tn.timestamp).sort()[0];return en?timestampToMs(en):null}}class WorkerHandler{constructor(en){this._worker=en,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((en,tn)=>{this._worker.addEventListener("message",({data:nn})=>{nn.success?en():tn()},{once:!0}),this._worker.addEventListener("error",nn=>{tn(nn)},{once:!0})}),this._ensureReadyPromise)}destroy(){logInfo("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(en,tn){const nn=this._getAndIncrementId();return new Promise((rn,sn)=>{const an=({data:cn})=>{const un=cn;if(un.method===en&&un.id===nn){if(this._worker.removeEventListener("message",an),!un.success){DEBUG_BUILD&&logger.error("[Replay]",un.response),sn(new Error("Error in compression worker"));return}rn(un.response)}};this._worker.addEventListener("message",an),this._worker.postMessage({id:nn,method:en,arg:tn})})}_getAndIncrementId(){return this._id++}}class EventBufferCompressionWorker{constructor(en){this._worker=new WorkerHandler(en),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(en){const tn=timestampToMs(en.timestamp);(!this._earliestTimestamp||tn<this._earliestTimestamp)&&(this._earliestTimestamp=tn);const nn=JSON.stringify(en);return this._totalSize+=nn.length,this._totalSize>REPLAY_MAX_EVENT_BUFFER_SIZE?Promise.reject(new EventBufferSizeExceededError):this._sendEventToWorker(nn)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,en=>{DEBUG_BUILD&&logger.warn('[Replay] Sending "clear" message to worker failed',en)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(en){return this._worker.postMessage("addEvent",en)}async _finishRequest(){const en=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,en}}class EventBufferProxy{constructor(en){this._fallback=new EventBufferArray,this._compression=new EventBufferCompressionWorker(en),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(en){this._used.hasCheckout=en}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(en){return this._used.addEvent(en)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{logInfo("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:en,hasCheckout:tn}=this._fallback,nn=[];for(const rn of en)nn.push(this._compression.addEvent(rn));this._compression.hasCheckout=tn,this._used=this._compression;try{await Promise.all(nn)}catch(rn){DEBUG_BUILD&&logger.warn("[Replay] Failed to add events when switching buffers.",rn)}}}function createEventBuffer({useCompression:ze,workerUrl:en}){if(ze&&window.Worker){const tn=_loadWorker(en);if(tn)return tn}return logInfo("[Replay] Using simple buffer"),new EventBufferArray}function _loadWorker(ze){try{const en=ze||_getWorkerUrl();if(!en)return;logInfo(`[Replay] Using compression worker${ze?` from ${ze}`:""}`);const tn=new Worker(en);return new EventBufferProxy(tn)}catch{logInfo("[Replay] Failed to create compression worker")}}function _getWorkerUrl(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?e():""}function hasSessionStorage(){try{return"sessionStorage"in WINDOW&&!!WINDOW.sessionStorage}catch{return!1}}function clearSession(ze){deleteSession(),ze.session=void 0}function deleteSession(){if(hasSessionStorage())try{WINDOW.sessionStorage.removeItem(REPLAY_SESSION_KEY)}catch{}}function isSampled(ze){return ze===void 0?!1:Math.random()<ze}function makeSession(ze){const en=Date.now(),tn=ze.id||uuid4(),nn=ze.started||en,rn=ze.lastActivity||en,sn=ze.segmentId||0,an=ze.sampled,cn=ze.previousSessionId;return{id:tn,started:nn,lastActivity:rn,segmentId:sn,sampled:an,previousSessionId:cn}}function saveSession(ze){if(hasSessionStorage())try{WINDOW.sessionStorage.setItem(REPLAY_SESSION_KEY,JSON.stringify(ze))}catch{}}function getSessionSampleType(ze,en){return isSampled(ze)?"session":en?"buffer":!1}function createSession({sessionSampleRate:ze,allowBuffering:en,stickySession:tn=!1},{previousSessionId:nn}={}){const rn=getSessionSampleType(ze,en),sn=makeSession({sampled:rn,previousSessionId:nn});return tn&&saveSession(sn),sn}function fetchSession(ze){if(!hasSessionStorage())return null;try{const en=WINDOW.sessionStorage.getItem(REPLAY_SESSION_KEY);if(!en)return null;const tn=JSON.parse(en);return logInfoNextTick("[Replay] Loading existing session",ze),makeSession(tn)}catch{return null}}function isExpired(ze,en,tn=+new Date){return ze===null||en===void 0||en<0?!0:en===0?!1:ze+en<=tn}function isSessionExpired(ze,{maxReplayDuration:en,sessionIdleExpire:tn,targetTime:nn=Date.now()}){return isExpired(ze.started,en,nn)||isExpired(ze.lastActivity,tn,nn)}function shouldRefreshSession(ze,{sessionIdleExpire:en,maxReplayDuration:tn}){return!(!isSessionExpired(ze,{sessionIdleExpire:en,maxReplayDuration:tn})||ze.sampled==="buffer"&&ze.segmentId===0)}function loadOrCreateSession({traceInternals:ze,sessionIdleExpire:en,maxReplayDuration:tn,previousSessionId:nn},rn){const sn=rn.stickySession&&fetchSession(ze);return sn?shouldRefreshSession(sn,{sessionIdleExpire:en,maxReplayDuration:tn})?(logInfoNextTick("[Replay] Session in sessionStorage is expired, creating new one..."),createSession(rn,{previousSessionId:sn.id})):sn:(logInfoNextTick("[Replay] Creating new session",ze),createSession(rn,{previousSessionId:nn}))}function isCustomEvent(ze){return ze.type===EventType.Custom}function addEventSync(ze,en,tn){return shouldAddEvent(ze,en)?(_addEvent(ze,en,tn),!0):!1}function addEvent(ze,en,tn){return shouldAddEvent(ze,en)?_addEvent(ze,en,tn):Promise.resolve(null)}async function _addEvent(ze,en,tn){if(!ze.eventBuffer)return null;try{tn&&ze.recordingMode==="buffer"&&ze.eventBuffer.clear(),tn&&(ze.eventBuffer.hasCheckout=!0);const nn=ze.getOptions(),rn=maybeApplyCallback(en,nn.beforeAddRecordingEvent);return rn?await ze.eventBuffer.addEvent(rn):void 0}catch(nn){const rn=nn&&nn instanceof EventBufferSizeExceededError?"addEventSizeExceeded":"addEvent";DEBUG_BUILD&&logger.error(nn),await ze.stop({reason:rn});const sn=getClient();sn&&sn.recordDroppedEvent("internal_sdk_error","replay")}}function shouldAddEvent(ze,en){if(!ze.eventBuffer||ze.isPaused()||!ze.isEnabled())return!1;const tn=timestampToMs(en.timestamp);return tn+ze.timeouts.sessionIdlePause<Date.now()?!1:tn>ze.getContext().initialTimestamp+ze.getOptions().maxReplayDuration?(logInfo(`[Replay] Skipping event with timestamp ${tn} because it is after maxReplayDuration`,ze.getOptions()._experiments.traceInternals),!1):!0}function maybeApplyCallback(ze,en){try{if(typeof en=="function"&&isCustomEvent(ze))return en(ze)}catch(tn){return DEBUG_BUILD&&logger.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",tn),null}return ze}function isErrorEvent(ze){return!ze.type}function isTransactionEvent(ze){return ze.type==="transaction"}function isReplayEvent(ze){return ze.type==="replay_event"}function isFeedbackEvent(ze){return ze.type==="feedback"}function handleAfterSendEvent(ze){const en=isBaseTransportSend();return(tn,nn)=>{if(!ze.isEnabled()||!isErrorEvent(tn)&&!isTransactionEvent(tn))return;const rn=nn&&nn.statusCode;if(!(en&&(!rn||rn<200||rn>=300))){if(isTransactionEvent(tn)){handleTransactionEvent(ze,tn);return}handleErrorEvent(ze,tn)}}}function handleTransactionEvent(ze,en){const tn=ze.getContext();en.contexts&&en.contexts.trace&&en.contexts.trace.trace_id&&tn.traceIds.size<100&&tn.traceIds.add(en.contexts.trace.trace_id)}function handleErrorEvent(ze,en){const tn=ze.getContext();if(en.event_id&&tn.errorIds.size<100&&tn.errorIds.add(en.event_id),ze.recordingMode!=="buffer"||!en.tags||!en.tags.replayId)return;const{beforeErrorSampling:nn}=ze.getOptions();typeof nn=="function"&&!nn(en)||setTimeout(()=>{ze.sendBufferedReplayOrFlush()})}function isBaseTransportSend(){const ze=getClient();if(!ze)return!1;const en=ze.getTransport();return en&&en.send.__sentry__baseTransport__||!1}function handleBeforeSendEvent(ze){return en=>{!ze.isEnabled()||!isErrorEvent(en)||handleHydrationError(ze,en)}}function handleHydrationError(ze,en){const tn=en.exception&&en.exception.values&&en.exception.values[0].value;if(typeof tn=="string"&&(tn.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||tn.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const nn=createBreadcrumb({category:"replay.hydrate-error"});addBreadcrumbEvent(ze,nn)}}function isRrwebError(ze,en){return ze.type||!ze.exception||!ze.exception.values||!ze.exception.values.length?!1:!!(en.originalException&&en.originalException.__rrweb__)}function addFeedbackBreadcrumb(ze,en){ze.triggerUserActivity(),ze.addUpdate(()=>en.timestamp?(ze.throttledAddEvent({type:EventType.Custom,timestamp:en.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:en.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:en.event_id}}}}),!1):!0)}function shouldSampleForBufferEvent(ze,en){return ze.recordingMode!=="buffer"||en.message===UNABLE_TO_SEND_REPLAY||!en.exception||en.type?!1:isSampled(ze.getOptions().errorSampleRate)}function handleGlobalEventListener(ze,en=!1){const tn=en?handleAfterSendEvent(ze):void 0;return Object.assign((nn,rn)=>ze.isEnabled()?isReplayEvent(nn)?(delete nn.breadcrumbs,nn):!isErrorEvent(nn)&&!isTransactionEvent(nn)&&!isFeedbackEvent(nn)||!ze.checkAndHandleExpiredSession()?nn:isFeedbackEvent(nn)?(ze.flush(),nn.contexts.feedback.replay_id=ze.getSessionId(),addFeedbackBreadcrumb(ze,nn),nn):isRrwebError(nn,rn)&&!ze.getOptions()._experiments.captureExceptions?(DEBUG_BUILD&&logger.log("[Replay] Ignoring error from rrweb internals",nn),null):((shouldSampleForBufferEvent(ze,nn)||ze.recordingMode==="session")&&(nn.tags={...nn.tags,replayId:ze.getSessionId()}),tn&&tn(nn,{statusCode:200}),nn):nn,{id:"Replay"})}function createPerformanceSpans(ze,en){return en.map(({type:tn,start:nn,end:rn,name:sn,data:an})=>{const cn=ze.throttledAddEvent({type:EventType.Custom,timestamp:nn,data:{tag:"performanceSpan",payload:{op:tn,description:sn,startTimestamp:nn,endTimestamp:rn,data:an}}});return typeof cn=="string"?Promise.resolve(null):cn})}function handleHistory(ze){const{from:en,to:tn}=ze,nn=Date.now()/1e3;return{type:"navigation.push",start:nn,end:nn,name:tn,data:{previous:en}}}function handleHistorySpanListener(ze){return en=>{if(!ze.isEnabled())return;const tn=handleHistory(en);tn!==null&&(ze.getContext().urls.push(tn.name),ze.triggerUserActivity(),ze.addUpdate(()=>(createPerformanceSpans(ze,[tn]),!1)))}}function shouldFilterRequest(ze,en){return DEBUG_BUILD&&ze.getOptions()._experiments.traceInternals?!1:isSentryRequestUrl(en,getClient())}function addNetworkBreadcrumb(ze,en){ze.isEnabled()&&en!==null&&(shouldFilterRequest(ze,en.name)||ze.addUpdate(()=>(createPerformanceSpans(ze,[en]),!0)))}function handleFetch(ze){const{startTimestamp:en,endTimestamp:tn,fetchData:nn,response:rn}=ze;if(!tn)return null;const{method:sn,url:an}=nn;return{type:"resource.fetch",start:en/1e3,end:tn/1e3,name:an,data:{method:sn,statusCode:rn?rn.status:void 0}}}function handleFetchSpanListener(ze){return en=>{if(!ze.isEnabled())return;const tn=handleFetch(en);addNetworkBreadcrumb(ze,tn)}}function handleXhr(ze){const{startTimestamp:en,endTimestamp:tn,xhr:nn}=ze,rn=nn[SENTRY_XHR_DATA_KEY];if(!en||!tn||!rn)return null;const{method:sn,url:an,status_code:cn}=rn;return an===void 0?null:{type:"resource.xhr",name:an,start:en/1e3,end:tn/1e3,data:{method:sn,statusCode:cn}}}function handleXhrSpanListener(ze){return en=>{if(!ze.isEnabled())return;const tn=handleXhr(en);addNetworkBreadcrumb(ze,tn)}}function getBodySize(ze,en){if(ze)try{if(typeof ze=="string")return en.encode(ze).length;if(ze instanceof URLSearchParams)return en.encode(ze.toString()).length;if(ze instanceof FormData){const tn=_serializeFormData(ze);return en.encode(tn).length}if(ze instanceof Blob)return ze.size;if(ze instanceof ArrayBuffer)return ze.byteLength}catch{}}function parseContentLengthHeader(ze){if(!ze)return;const en=parseInt(ze,10);return isNaN(en)?void 0:en}function getBodyString(ze){try{if(typeof ze=="string")return[ze];if(ze instanceof URLSearchParams)return[ze.toString()];if(ze instanceof FormData)return[_serializeFormData(ze)];if(!ze)return[void 0]}catch{return DEBUG_BUILD&&logger.warn("[Replay] Failed to serialize body",ze),[void 0,"BODY_PARSE_ERROR"]}return DEBUG_BUILD&&logger.info("[Replay] Skipping network body because of body type",ze),[void 0,"UNPARSEABLE_BODY_TYPE"]}function mergeWarning(ze,en){if(!ze)return{headers:{},size:void 0,_meta:{warnings:[en]}};const tn={...ze._meta},nn=tn.warnings||[];return tn.warnings=[...nn,en],ze._meta=tn,ze}function makeNetworkReplayBreadcrumb(ze,en){if(!en)return null;const{startTimestamp:tn,endTimestamp:nn,url:rn,method:sn,statusCode:an,request:cn,response:un}=en;return{type:ze,start:tn/1e3,end:nn/1e3,name:rn,data:dropUndefinedKeys({method:sn,statusCode:an,request:cn,response:un})}}function buildSkippedNetworkRequestOrResponse(ze){return{headers:{},size:ze,_meta:{warnings:["URL_SKIPPED"]}}}function buildNetworkRequestOrResponse(ze,en,tn){if(!en&&Object.keys(ze).length===0)return;if(!en)return{headers:ze};if(!tn)return{headers:ze,size:en};const nn={headers:ze,size:en},{body:rn,warnings:sn}=normalizeNetworkBody(tn);return nn.body=rn,sn&&sn.length>0&&(nn._meta={warnings:sn}),nn}function getAllowedHeaders(ze,en){return Object.keys(ze).reduce((tn,nn)=>{const rn=nn.toLowerCase();return en.includes(rn)&&ze[nn]&&(tn[rn]=ze[nn]),tn},{})}function _serializeFormData(ze){return new URLSearchParams(ze).toString()}function normalizeNetworkBody(ze){if(!ze||typeof ze!="string")return{body:ze};const en=ze.length>NETWORK_BODY_MAX_SIZE,tn=_strIsProbablyJson(ze);if(en){const nn=ze.slice(0,NETWORK_BODY_MAX_SIZE);return tn?{body:nn,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${nn}`,warnings:["TEXT_TRUNCATED"]}}if(tn)try{return{body:JSON.parse(ze)}}catch{}return{body:ze}}function _strIsProbablyJson(ze){const en=ze[0],tn=ze[ze.length-1];return en==="["&&tn==="]"||en==="{"&&tn==="}"}function urlMatches(ze,en){const tn=getFullUrl(ze);return stringMatchesSomePattern(tn,en)}function getFullUrl(ze,en=WINDOW.document.baseURI){if(ze.startsWith("http://")||ze.startsWith("https://")||ze.startsWith(WINDOW.location.origin))return ze;const tn=new URL(ze,en);if(tn.origin!==new URL(en).origin)return ze;const nn=tn.href;return!ze.endsWith("/")&&nn.endsWith("/")?nn.slice(0,-1):nn}async function captureFetchBreadcrumbToReplay(ze,en,tn){try{const nn=await _prepareFetchData(ze,en,tn),rn=makeNetworkReplayBreadcrumb("resource.fetch",nn);addNetworkBreadcrumb(tn.replay,rn)}catch(nn){DEBUG_BUILD&&logger.error("[Replay] Failed to capture fetch breadcrumb",nn)}}function enrichFetchBreadcrumb(ze,en,tn){const{input:nn,response:rn}=en,sn=nn?_getFetchRequestArgBody(nn):void 0,an=getBodySize(sn,tn.textEncoder),cn=rn?parseContentLengthHeader(rn.headers.get("content-length")):void 0;an!==void 0&&(ze.data.request_body_size=an),cn!==void 0&&(ze.data.response_body_size=cn)}async function _prepareFetchData(ze,en,tn){const nn=Date.now(),{startTimestamp:rn=nn,endTimestamp:sn=nn}=en,{url:an,method:cn,status_code:un=0,request_body_size:ln,response_body_size:dn}=ze.data,fn=urlMatches(an,tn.networkDetailAllowUrls)&&!urlMatches(an,tn.networkDetailDenyUrls),pn=fn?_getRequestInfo(tn,en.input,ln):buildSkippedNetworkRequestOrResponse(ln),hn=await _getResponseInfo(fn,tn,en.response,dn);return{startTimestamp:rn,endTimestamp:sn,url:an,method:cn,statusCode:un,request:pn,response:hn}}function _getRequestInfo({networkCaptureBodies:ze,networkRequestHeaders:en},tn,nn){const rn=tn?getRequestHeaders(tn,en):{};if(!ze)return buildNetworkRequestOrResponse(rn,nn,void 0);const sn=_getFetchRequestArgBody(tn),[an,cn]=getBodyString(sn),un=buildNetworkRequestOrResponse(rn,nn,an);return cn?mergeWarning(un,cn):un}async function _getResponseInfo(ze,{networkCaptureBodies:en,textEncoder:tn,networkResponseHeaders:nn},rn,sn){if(!ze&&sn!==void 0)return buildSkippedNetworkRequestOrResponse(sn);const an=rn?getAllHeaders(rn.headers,nn):{};if(!rn||!en&&sn!==void 0)return buildNetworkRequestOrResponse(an,sn,void 0);const[cn,un]=await _parseFetchResponseBody(rn),ln=getResponseData(cn,{networkCaptureBodies:en,textEncoder:tn,responseBodySize:sn,captureDetails:ze,headers:an});return un?mergeWarning(ln,un):ln}function getResponseData(ze,{networkCaptureBodies:en,textEncoder:tn,responseBodySize:nn,captureDetails:rn,headers:sn}){try{const an=ze&&ze.length&&nn===void 0?getBodySize(ze,tn):nn;return rn?en?buildNetworkRequestOrResponse(sn,an,ze):buildNetworkRequestOrResponse(sn,an,void 0):buildSkippedNetworkRequestOrResponse(an)}catch(an){return DEBUG_BUILD&&logger.warn("[Replay] Failed to serialize response body",an),buildNetworkRequestOrResponse(sn,nn,void 0)}}async function _parseFetchResponseBody(ze){const en=_tryCloneResponse(ze);if(!en)return[void 0,"BODY_PARSE_ERROR"];try{return[await _tryGetResponseText(en)]}catch(tn){return DEBUG_BUILD&&logger.warn("[Replay] Failed to get text body from response",tn),[void 0,"BODY_PARSE_ERROR"]}}function _getFetchRequestArgBody(ze=[]){if(!(ze.length!==2||typeof ze[1]!="object"))return ze[1].body}function getAllHeaders(ze,en){const tn={};return en.forEach(nn=>{ze.get(nn)&&(tn[nn]=ze.get(nn))}),tn}function getRequestHeaders(ze,en){return ze.length===1&&typeof ze[0]!="string"?getHeadersFromOptions(ze[0],en):ze.length===2?getHeadersFromOptions(ze[1],en):{}}function getHeadersFromOptions(ze,en){if(!ze)return{};const tn=ze.headers;return tn?tn instanceof Headers?getAllHeaders(tn,en):Array.isArray(tn)?{}:getAllowedHeaders(tn,en):{}}function _tryCloneResponse(ze){try{return ze.clone()}catch(en){DEBUG_BUILD&&logger.warn("[Replay] Failed to clone response body",en)}}function _tryGetResponseText(ze){return new Promise((en,tn)=>{const nn=setTimeout(()=>tn(new Error("Timeout while trying to read response body")),500);_getResponseText(ze).then(rn=>en(rn),rn=>tn(rn)).finally(()=>clearTimeout(nn))})}async function _getResponseText(ze){return await ze.text()}async function captureXhrBreadcrumbToReplay(ze,en,tn){try{const nn=_prepareXhrData(ze,en,tn),rn=makeNetworkReplayBreadcrumb("resource.xhr",nn);addNetworkBreadcrumb(tn.replay,rn)}catch(nn){DEBUG_BUILD&&logger.error("[Replay] Failed to capture xhr breadcrumb",nn)}}function enrichXhrBreadcrumb(ze,en,tn){const{xhr:nn,input:rn}=en;if(!nn)return;const sn=getBodySize(rn,tn.textEncoder),an=nn.getResponseHeader("content-length")?parseContentLengthHeader(nn.getResponseHeader("content-length")):_getBodySize(nn.response,nn.responseType,tn.textEncoder);sn!==void 0&&(ze.data.request_body_size=sn),an!==void 0&&(ze.data.response_body_size=an)}function _prepareXhrData(ze,en,tn){const nn=Date.now(),{startTimestamp:rn=nn,endTimestamp:sn=nn,input:an,xhr:cn}=en,{url:un,method:ln,status_code:dn=0,request_body_size:fn,response_body_size:pn}=ze.data;if(!un)return null;if(!cn||!urlMatches(un,tn.networkDetailAllowUrls)||urlMatches(un,tn.networkDetailDenyUrls)){const Rn=buildSkippedNetworkRequestOrResponse(fn),yn=buildSkippedNetworkRequestOrResponse(pn);return{startTimestamp:rn,endTimestamp:sn,url:un,method:ln,statusCode:dn,request:Rn,response:yn}}const hn=cn[SENTRY_XHR_DATA_KEY],mn=hn?getAllowedHeaders(hn.request_headers,tn.networkRequestHeaders):{},gn=getAllowedHeaders(getResponseHeaders(cn),tn.networkResponseHeaders),[Sn,_n]=tn.networkCaptureBodies?getBodyString(an):[void 0],[En,vn]=tn.networkCaptureBodies?_getXhrResponseBody(cn):[void 0],bn=buildNetworkRequestOrResponse(mn,fn,Sn),Nn=buildNetworkRequestOrResponse(gn,pn,En);return{startTimestamp:rn,endTimestamp:sn,url:un,method:ln,statusCode:dn,request:_n?mergeWarning(bn,_n):bn,response:vn?mergeWarning(Nn,vn):Nn}}function getResponseHeaders(ze){const en=ze.getAllResponseHeaders();return en?en.split(`\r
`).reduce((tn,nn)=>{const[rn,sn]=nn.split(": ");return tn[rn.toLowerCase()]=sn,tn},{}):{}}function _getXhrResponseBody(ze){const en=[];try{return[ze.responseText]}catch(tn){en.push(tn)}try{return _parseXhrResponse(ze.response,ze.responseType)}catch(tn){en.push(tn)}return DEBUG_BUILD&&logger.warn("[Replay] Failed to get xhr response body",...en),[void 0]}function _parseXhrResponse(ze,en){try{if(typeof ze=="string")return[ze];if(ze instanceof Document)return[ze.body.outerHTML];if(en==="json"&&ze&&typeof ze=="object")return[JSON.stringify(ze)];if(!ze)return[void 0]}catch{return DEBUG_BUILD&&logger.warn("[Replay] Failed to serialize body",ze),[void 0,"BODY_PARSE_ERROR"]}return DEBUG_BUILD&&logger.info("[Replay] Skipping network body because of body type",ze),[void 0,"UNPARSEABLE_BODY_TYPE"]}function _getBodySize(ze,en,tn){try{const nn=en==="json"&&ze&&typeof ze=="object"?JSON.stringify(ze):ze;return getBodySize(nn,tn)}catch{return}}function handleNetworkBreadcrumbs(ze){const en=getClient();try{const tn=new TextEncoder,{networkDetailAllowUrls:nn,networkDetailDenyUrls:rn,networkCaptureBodies:sn,networkRequestHeaders:an,networkResponseHeaders:cn}=ze.getOptions(),un={replay:ze,textEncoder:tn,networkDetailAllowUrls:nn,networkDetailDenyUrls:rn,networkCaptureBodies:sn,networkRequestHeaders:an,networkResponseHeaders:cn};en&&en.on?en.on("beforeAddBreadcrumb",(ln,dn)=>beforeAddNetworkBreadcrumb(un,ln,dn)):(addFetchInstrumentationHandler(handleFetchSpanListener(ze)),addXhrInstrumentationHandler(handleXhrSpanListener(ze)))}catch{}}function beforeAddNetworkBreadcrumb(ze,en,tn){if(en.data)try{_isXhrBreadcrumb(en)&&_isXhrHint(tn)&&(enrichXhrBreadcrumb(en,tn,ze),captureXhrBreadcrumbToReplay(en,tn,ze)),_isFetchBreadcrumb(en)&&_isFetchHint(tn)&&(enrichFetchBreadcrumb(en,tn,ze),captureFetchBreadcrumbToReplay(en,tn,ze))}catch{DEBUG_BUILD&&logger.warn("Error when enriching network breadcrumb")}}function _isXhrBreadcrumb(ze){return ze.category==="xhr"}function _isFetchBreadcrumb(ze){return ze.category==="fetch"}function _isXhrHint(ze){return ze&&ze.xhr}function _isFetchHint(ze){return ze&&ze.response}let _LAST_BREADCRUMB=null;function isBreadcrumbWithCategory(ze){return!!ze.category}const handleScopeListener=ze=>en=>{if(!ze.isEnabled())return;const tn=handleScope(en);tn&&addBreadcrumbEvent(ze,tn)};function handleScope(ze){const en=ze.getLastBreadcrumb&&ze.getLastBreadcrumb();return _LAST_BREADCRUMB===en||!en||(_LAST_BREADCRUMB=en,!isBreadcrumbWithCategory(en)||["fetch","xhr","sentry.event","sentry.transaction"].includes(en.category)||en.category.startsWith("ui."))?null:en.category==="console"?normalizeConsoleBreadcrumb(en):createBreadcrumb(en)}function normalizeConsoleBreadcrumb(ze){const en=ze.data&&ze.data.arguments;if(!Array.isArray(en)||en.length===0)return createBreadcrumb(ze);let tn=!1;const nn=en.map(rn=>{if(!rn)return rn;if(typeof rn=="string")return rn.length>CONSOLE_ARG_MAX_SIZE?(tn=!0,`${rn.slice(0,CONSOLE_ARG_MAX_SIZE)}`):rn;if(typeof rn=="object")try{const sn=normalize(rn,7);return JSON.stringify(sn).length>CONSOLE_ARG_MAX_SIZE?(tn=!0,`${JSON.stringify(sn,null,2).slice(0,CONSOLE_ARG_MAX_SIZE)}`):sn}catch{}return rn});return createBreadcrumb({...ze,data:{...ze.data,arguments:nn,...tn?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function addGlobalListeners(ze){const en=getCurrentScope(),tn=getClient();en.addScopeListener(handleScopeListener(ze)),addClickKeypressInstrumentationHandler(handleDomListener(ze)),addHistoryInstrumentationHandler(handleHistorySpanListener(ze)),handleNetworkBreadcrumbs(ze);const nn=handleGlobalEventListener(ze,!hasHooks(tn));tn&&tn.addEventProcessor?tn.addEventProcessor(nn):addEventProcessor(nn),hasHooks(tn)&&(tn.on("beforeSendEvent",handleBeforeSendEvent(ze)),tn.on("afterSendEvent",handleAfterSendEvent(ze)),tn.on("createDsc",rn=>{const sn=ze.getSessionId();sn&&ze.isEnabled()&&ze.recordingMode==="session"&&ze.checkAndHandleExpiredSession()&&(rn.replay_id=sn)}),tn.on("startTransaction",rn=>{ze.lastTransaction=rn}),tn.on("finishTransaction",rn=>{ze.lastTransaction=rn}),tn.on("beforeSendFeedback",(rn,sn)=>{const an=ze.getSessionId();sn&&sn.includeReplay&&ze.isEnabled()&&an&&rn.contexts&&rn.contexts.feedback&&(rn.contexts.feedback.replay_id=an)}))}function hasHooks(ze){return!!(ze&&ze.on)}async function addMemoryEntry(ze){try{return Promise.all(createPerformanceSpans(ze,[createMemoryEntry(WINDOW.performance.memory)]))}catch{return[]}}function createMemoryEntry(ze){const{jsHeapSizeLimit:en,totalJSHeapSize:tn,usedJSHeapSize:nn}=ze,rn=Date.now()/1e3;return{type:"memory",name:"memory",start:rn,end:rn,data:{memory:{jsHeapSizeLimit:en,totalJSHeapSize:tn,usedJSHeapSize:nn}}}}function debounce(ze,en,tn){let nn,rn,sn;const an=tn&&tn.maxWait?Math.max(tn.maxWait,en):0;function cn(){return un(),nn=ze(),nn}function un(){rn!==void 0&&clearTimeout(rn),sn!==void 0&&clearTimeout(sn),rn=sn=void 0}function ln(){return rn!==void 0||sn!==void 0?cn():nn}function dn(){return rn&&clearTimeout(rn),rn=setTimeout(cn,en),an&&sn===void 0&&(sn=setTimeout(cn,an)),nn}return dn.cancel=un,dn.flush=ln,dn}function getHandleRecordingEmit(ze){let en=!1;return(tn,nn)=>{if(!ze.checkAndHandleExpiredSession()){DEBUG_BUILD&&logger.warn("[Replay] Received replay event after session expired.");return}const rn=nn||!en;en=!0,ze.clickDetector&&updateClickDetectorForRecordingEvent(ze.clickDetector,tn),ze.addUpdate(()=>{if(ze.recordingMode==="buffer"&&rn&&ze.setInitialState(),!addEventSync(ze,tn,rn))return!0;if(!rn)return!1;if(addSettingsEvent(ze,rn),ze.session&&ze.session.previousSessionId)return!0;if(ze.recordingMode==="buffer"&&ze.session&&ze.eventBuffer){const sn=ze.eventBuffer.getEarliestTimestamp();sn&&(logInfo(`[Replay] Updating session start time to earliest event in buffer to ${new Date(sn)}`,ze.getOptions()._experiments.traceInternals),ze.session.started=sn,ze.getOptions().stickySession&&saveSession(ze.session))}return ze.recordingMode==="session"&&ze.flush(),!0})}}function createOptionsEvent(ze){const en=ze.getOptions();return{type:EventType.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:ze.isRecordingCanvas(),sessionSampleRate:en.sessionSampleRate,errorSampleRate:en.errorSampleRate,useCompressionOption:en.useCompression,blockAllMedia:en.blockAllMedia,maskAllText:en.maskAllText,maskAllInputs:en.maskAllInputs,useCompression:ze.eventBuffer?ze.eventBuffer.type==="worker":!1,networkDetailHasUrls:en.networkDetailAllowUrls.length>0,networkCaptureBodies:en.networkCaptureBodies,networkRequestHasHeaders:en.networkRequestHeaders.length>0,networkResponseHasHeaders:en.networkResponseHeaders.length>0}}}}function addSettingsEvent(ze,en){!en||!ze.session||ze.session.segmentId!==0||addEventSync(ze,createOptionsEvent(ze),!1)}function createReplayEnvelope(ze,en,tn,nn){return createEnvelope(createEventEnvelopeHeaders(ze,getSdkMetadataForEnvelopeHeader(ze),nn,tn),[[{type:"replay_event"},ze],[{type:"replay_recording",length:typeof en=="string"?new TextEncoder().encode(en).length:en.length},en]])}function prepareRecordingData({recordingData:ze,headers:en}){let tn;const nn=`${JSON.stringify(en)}
`;if(typeof ze=="string")tn=`${nn}${ze}`;else{const sn=new TextEncoder().encode(nn);tn=new Uint8Array(sn.length+ze.length),tn.set(sn),tn.set(ze,sn.length)}return tn}async function prepareReplayEvent({client:ze,scope:en,replayId:tn,event:nn}){const rn=typeof ze._integrations=="object"&&ze._integrations!==null&&!Array.isArray(ze._integrations)?Object.keys(ze._integrations):void 0,sn={event_id:tn,integrations:rn};ze.emit&&ze.emit("preprocessEvent",nn,sn);const an=await prepareEvent(ze.getOptions(),nn,sn,en,ze,getIsolationScope());if(!an)return null;an.platform=an.platform||"javascript";const cn=ze.getSdkMetadata&&ze.getSdkMetadata(),{name:un,version:ln}=cn&&cn.sdk||{};return an.sdk={...an.sdk,name:un||"sentry.javascript.unknown",version:ln||"0.0.0"},an}async function sendReplayRequest({recordingData:ze,replayId:en,segmentId:tn,eventContext:nn,timestamp:rn,session:sn}){const an=prepareRecordingData({recordingData:ze,headers:{segment_id:tn}}),{urls:cn,errorIds:un,traceIds:ln,initialTimestamp:dn}=nn,fn=getClient(),pn=getCurrentScope(),hn=fn&&fn.getTransport(),mn=fn&&fn.getDsn();if(!fn||!hn||!mn||!sn.sampled)return;const gn={type:REPLAY_EVENT_NAME,replay_start_timestamp:dn/1e3,timestamp:rn/1e3,error_ids:un,trace_ids:ln,urls:cn,replay_id:en,segment_id:tn,replay_type:sn.sampled},Sn=await prepareReplayEvent({scope:pn,client:fn,replayId:en,event:gn});if(!Sn){fn.recordDroppedEvent("event_processor","replay",gn),logInfo("An event processor returned `null`, will not send event.");return}delete Sn.sdkProcessingMetadata;const _n=createReplayEnvelope(Sn,an,mn,fn.getOptions().tunnel);let En;try{En=await hn.send(_n)}catch(bn){const Nn=new Error(UNABLE_TO_SEND_REPLAY);try{Nn.cause=bn}catch{}throw Nn}if(!En)return En;if(typeof En.statusCode=="number"&&(En.statusCode<200||En.statusCode>=300))throw new TransportStatusCodeError(En.statusCode);const vn=updateRateLimits({},En);if(isRateLimited(vn,"replay"))throw new RateLimitError(vn);return En}class TransportStatusCodeError extends Error{constructor(en){super(`Transport returned status code ${en}`)}}class RateLimitError extends Error{constructor(en){super("Rate limit hit"),this.rateLimits=en}}async function sendReplay(ze,en={count:0,interval:RETRY_BASE_INTERVAL}){const{recordingData:tn,options:nn}=ze;if(tn.length)try{return await sendReplayRequest(ze),!0}catch(rn){if(rn instanceof TransportStatusCodeError||rn instanceof RateLimitError)throw rn;if(setContext("Replays",{_retryCount:en.count}),DEBUG_BUILD&&nn._experiments&&nn._experiments.captureExceptions&&captureException(rn),en.count>=RETRY_MAX_COUNT){const sn=new Error(`${UNABLE_TO_SEND_REPLAY} - max retries exceeded`);try{sn.cause=rn}catch{}throw sn}return en.interval*=++en.count,new Promise((sn,an)=>{setTimeout(async()=>{try{await sendReplay(ze,en),sn(!0)}catch(cn){an(cn)}},en.interval)})}}const THROTTLED="__THROTTLED",SKIPPED="__SKIPPED";function throttle(ze,en,tn){const nn=new Map,rn=cn=>{const un=cn-tn;nn.forEach((ln,dn)=>{dn<un&&nn.delete(dn)})},sn=()=>[...nn.values()].reduce((cn,un)=>cn+un,0);let an=!1;return(...cn)=>{const un=Math.floor(Date.now()/1e3);if(rn(un),sn()>=en){const dn=an;return an=!0,dn?SKIPPED:THROTTLED}an=!1;const ln=nn.get(un)||0;return nn.set(un,ln+1),ze(...cn)}}class ReplayContainer{constructor({options:en,recordingOptions:tn}){ReplayContainer.prototype.__init.call(this),ReplayContainer.prototype.__init2.call(this),ReplayContainer.prototype.__init3.call(this),ReplayContainer.prototype.__init4.call(this),ReplayContainer.prototype.__init5.call(this),ReplayContainer.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:SESSION_IDLE_PAUSE_DURATION,sessionIdleExpire:SESSION_IDLE_EXPIRE_DURATION},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=tn,this._options=en,this._debouncedFlush=debounce(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=throttle((an,cn)=>addEvent(this,an,cn),300,5);const{slowClickTimeout:nn,slowClickIgnoreSelectors:rn}=this.getOptions(),sn=nn?{threshold:Math.min(SLOW_CLICK_THRESHOLD,nn),timeout:nn,scrollTimeout:SLOW_CLICK_SCROLL_TIMEOUT,ignoreSelector:rn?rn.join(","):""}:void 0;sn&&(this.clickDetector=new ClickDetector(this,sn))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(en){const{errorSampleRate:tn,sessionSampleRate:nn}=this._options;if(!(tn<=0&&nn<=0)){if(this._initializeSessionForSampling(en),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",logInfoNextTick(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");logInfoNextTick("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const en=loadOrCreateSession({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=en,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");logInfoNextTick("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const en=loadOrCreateSession({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=en,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const en=this._canvas;this._stopRecording=record({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:BUFFER_CHECKOUT_TIME},emit:getHandleRecordingEmit(this),onMutation:this._onMutationHandler,...en?{recordCanvas:en.recordCanvas,getCanvasManager:en.getCanvasManager,sampling:en.sampling,dataURLOptions:en.dataURLOptions}:{}})}catch(en){this._handleException(en)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(en){return this._handleException(en),!1}}async stop({forceFlush:en=!1,reason:tn}={}){if(this._isEnabled){this._isEnabled=!1;try{logInfo(`[Replay] Stopping Replay${tn?` triggered by ${tn}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),en&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,clearSession(this)}catch(nn){this._handleException(nn)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),logInfo("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),logInfo("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:en=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const tn=Date.now();logInfo("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const nn=this.stopRecording();!en||!nn||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(tn),this._updateSessionActivity(tn),this._maybeSaveSession()),this.startRecording())}addUpdate(en){const tn=en();this.recordingMode!=="buffer"&&tn!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&isExpired(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const en=`${WINDOW.location.pathname}${WINDOW.location.hash}${WINDOW.location.search}`,tn=`${WINDOW.location.origin}${en}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=tn,this._context.initialTimestamp=Date.now(),this._context.urls.push(tn)}throttledAddEvent(en,tn){const nn=this._throttledAddEvent(en,tn);if(nn===THROTTLED){const rn=createBreadcrumb({category:"replay.throttled"});this.addUpdate(()=>!addEventSync(this,{type:ReplayEventTypeCustom,timestamp:rn.timestamp||0,data:{tag:"breadcrumb",payload:rn,metric:!0}}))}return nn}getCurrentRoute(){const en=this.lastTransaction||getCurrentScope().getTransaction(),nn=(en&&spanToJSON(en).data||{})[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];if(!(!en||!nn||!["route","custom"].includes(nn)))return spanToJSON(en).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=createEventBuffer({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(en){DEBUG_BUILD&&logger.error("[Replay]",en),DEBUG_BUILD&&this._options._experiments&&this._options._experiments.captureExceptions&&captureException(en)}_initializeSessionForSampling(en){const tn=this._options.errorSampleRate>0,nn=loadOrCreateSession({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:en},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:tn});this.session=nn}_checkSession(){if(!this.session)return!1;const en=this.session;return shouldRefreshSession(en,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(en),!1):!0}async _refreshSession(en){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(en.id))}_addListeners(){try{WINDOW.document.addEventListener("visibilitychange",this._handleVisibilityChange),WINDOW.addEventListener("blur",this._handleWindowBlur),WINDOW.addEventListener("focus",this._handleWindowFocus),WINDOW.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(addGlobalListeners(this),this._hasInitializedCoreListeners=!0)}catch(en){this._handleException(en)}this._performanceCleanupCallback=setupPerformanceObserver(this)}_removeListeners(){try{WINDOW.document.removeEventListener("visibilitychange",this._handleVisibilityChange),WINDOW.removeEventListener("blur",this._handleWindowBlur),WINDOW.removeEventListener("focus",this._handleWindowFocus),WINDOW.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(en){this._handleException(en)}}__init(){this._handleVisibilityChange=()=>{WINDOW.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const en=createBreadcrumb({category:"ui.blur"});this._doChangeToBackgroundTasks(en)}}__init3(){this._handleWindowFocus=()=>{const en=createBreadcrumb({category:"ui.focus"});this._doChangeToForegroundTasks(en)}}__init4(){this._handleKeyboardEvent=en=>{handleKeyboardEvent(this,en)}}_doChangeToBackgroundTasks(en){!this.session||isSessionExpired(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(en&&this._createCustomBreadcrumb(en),this.conditionalFlush())}_doChangeToForegroundTasks(en){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){logInfo("[Replay] Document has become active, but session has expired");return}en&&this._createCustomBreadcrumb(en)}_updateUserActivity(en=Date.now()){this._lastActivity=en}_updateSessionActivity(en=Date.now()){this.session&&(this.session.lastActivity=en,this._maybeSaveSession())}_createCustomBreadcrumb(en){this.addUpdate(()=>{this.throttledAddEvent({type:EventType.Custom,timestamp:en.timestamp||0,data:{tag:"breadcrumb",payload:en}})})}_addPerformanceEntries(){const en=createPerformanceEntries(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(createPerformanceSpans(this,en))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:en,eventBuffer:tn}=this;if(!en||!tn||en.segmentId)return;const nn=tn.getEarliestTimestamp();nn&&nn<this._context.initialTimestamp&&(this._context.initialTimestamp=nn)}_popEventContext(){const en={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),en}async _runFlush(){const en=this.getSessionId();if(!this.session||!this.eventBuffer||!en){DEBUG_BUILD&&logger.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await addMemoryEntry(this),!!this.eventBuffer&&en===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const tn=Date.now();if(tn-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const nn=this._popEventContext(),rn=this.session.segmentId++;this._maybeSaveSession();const sn=await this.eventBuffer.finish();await sendReplay({replayId:en,recordingData:sn,segmentId:rn,eventContext:nn,session:this.session,options:this.getOptions(),timestamp:tn})}catch(tn){this._handleException(tn),this.stop({reason:"sendReplay"});const nn=getClient();nn&&nn.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:en=!1}={})=>{if(!this._isEnabled&&!en)return;if(!this.checkAndHandleExpiredSession()){DEBUG_BUILD&&logger.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const tn=this.session.started,rn=Date.now()-tn;this._debouncedFlush.cancel();const sn=rn<this._options.minReplayDuration,an=rn>this._options.maxReplayDuration+5e3;if(sn||an){logInfo(`[Replay] Session duration (${Math.floor(rn/1e3)}s) is too ${sn?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),sn&&this._debouncedFlush();return}const cn=this.eventBuffer;if(cn&&this.session.segmentId===0&&!cn.hasCheckout&&logInfo("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(un){DEBUG_BUILD&&logger.error(un)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&saveSession(this.session)}__init6(){this._onMutationHandler=en=>{const tn=en.length,nn=this._options.mutationLimit,rn=this._options.mutationBreadcrumbLimit,sn=nn&&tn>nn;if(tn>rn||sn){const an=createBreadcrumb({category:"replay.mutations",data:{count:tn,limit:sn}});this._createCustomBreadcrumb(an)}return sn?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function getOption(ze,en,tn,nn){const rn=typeof nn=="string"?nn.split(","):[],sn=[...ze,...rn,...en];return typeof tn<"u"&&(typeof tn=="string"&&sn.push(`.${tn}`),consoleSandbox(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),sn.join(",")}function getPrivacyOptions({mask:ze,unmask:en,block:tn,unblock:nn,ignore:rn,blockClass:sn,blockSelector:an,maskTextClass:cn,maskTextSelector:un,ignoreClass:ln}){const dn=['base[href="/"]'],fn=getOption(ze,[".sentry-mask","[data-sentry-mask]"],cn,un),pn=getOption(en,[".sentry-unmask","[data-sentry-unmask]"]),hn={maskTextSelector:fn,unmaskTextSelector:pn,blockSelector:getOption(tn,[".sentry-block","[data-sentry-block]",...dn],sn,an),unblockSelector:getOption(nn,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:getOption(rn,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],ln)};return sn instanceof RegExp&&(hn.blockClass=sn),cn instanceof RegExp&&(hn.maskTextClass=cn),hn}function maskAttribute({el:ze,key:en,maskAttributes:tn,maskAllText:nn,privacyOptions:rn,value:sn}){return!nn||rn.unmaskTextSelector&&ze.matches(rn.unmaskTextSelector)?sn:tn.includes(en)||en==="value"&&ze.tagName==="INPUT"&&["submit","button"].includes(ze.getAttribute("type")||"")?sn.replace(/[\S]/g,"*"):sn}const MEDIA_SELECTORS='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',DEFAULT_NETWORK_HEADERS=["content-length","content-type","accept"];let _initialized=!1;class Replay$1{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:en=DEFAULT_FLUSH_MIN_DELAY,flushMaxDelay:tn=DEFAULT_FLUSH_MAX_DELAY,minReplayDuration:nn=MIN_REPLAY_DURATION,maxReplayDuration:rn=MAX_REPLAY_DURATION,stickySession:sn=!0,useCompression:an=!0,workerUrl:cn,_experiments:un={},sessionSampleRate:ln,errorSampleRate:dn,maskAllText:fn=!0,maskAllInputs:pn=!0,blockAllMedia:hn=!0,mutationBreadcrumbLimit:mn=750,mutationLimit:gn=1e4,slowClickTimeout:Sn=7e3,slowClickIgnoreSelectors:_n=[],networkDetailAllowUrls:En=[],networkDetailDenyUrls:vn=[],networkCaptureBodies:bn=!0,networkRequestHeaders:Nn=[],networkResponseHeaders:Rn=[],mask:yn=[],maskAttributes:wn=["title","placeholder"],unmask:Mn=[],block:Tn=[],unblock:In=[],ignore:Cn=[],maskFn:Pn,beforeAddRecordingEvent:Bn,beforeErrorSampling:An,blockClass:Dn,blockSelector:Hn,maskInputOptions:xn,maskTextClass:Wn,maskTextSelector:zn,ignoreClass:Xn}={}){this.name=Replay$1.id;const Kn=getPrivacyOptions({mask:yn,unmask:Mn,block:Tn,unblock:In,ignore:Cn,blockClass:Dn,blockSelector:Hn,maskTextClass:Wn,maskTextSelector:zn,ignoreClass:Xn});if(this._recordingOptions={maskAllInputs:pn,maskAllText:fn,maskInputOptions:{...xn||{},password:!0},maskTextFn:Pn,maskInputFn:Pn,maskAttributeFn:(Zn,Jn,Fn)=>maskAttribute({maskAttributes:wn,maskAllText:fn,privacyOptions:Kn,key:Zn,value:Jn,el:Fn}),...Kn,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:Zn=>{try{Zn.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:en,flushMaxDelay:tn,minReplayDuration:Math.min(nn,MIN_REPLAY_DURATION_LIMIT),maxReplayDuration:Math.min(rn,MAX_REPLAY_DURATION),stickySession:sn,sessionSampleRate:ln,errorSampleRate:dn,useCompression:an,workerUrl:cn,blockAllMedia:hn,maskAllInputs:pn,maskAllText:fn,mutationBreadcrumbLimit:mn,mutationLimit:gn,slowClickTimeout:Sn,slowClickIgnoreSelectors:_n,networkDetailAllowUrls:En,networkDetailDenyUrls:vn,networkCaptureBodies:bn,networkRequestHeaders:_getMergedNetworkHeaders(Nn),networkResponseHeaders:_getMergedNetworkHeaders(Rn),beforeAddRecordingEvent:Bn,beforeErrorSampling:An,_experiments:un},typeof ln=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${ln} })`),this._initialOptions.sessionSampleRate=ln),typeof dn=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${dn} })`),this._initialOptions.errorSampleRate=dn),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${MEDIA_SELECTORS}`:MEDIA_SELECTORS),this._isInitialized&&isBrowser())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return _initialized}set _isInitialized(en){_initialized=en}setupOnce(){isBrowser()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(en){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(en)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const en=loadReplayOptionsFromClient(this._initialOptions);this._replay=new ReplayContainer({options:en,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const tn=getClient().getIntegrationByName("ReplayCanvas");if(!tn)return;this._replay._canvas=tn.getOptions()}catch{}}}Replay$1.__initStatic();function loadReplayOptionsFromClient(ze){const en=getClient(),tn=en&&en.getOptions(),nn={sessionSampleRate:0,errorSampleRate:0,...dropUndefinedKeys(ze)};return tn?(ze.sessionSampleRate==null&&ze.errorSampleRate==null&&tn.replaysSessionSampleRate==null&&tn.replaysOnErrorSampleRate==null&&consoleSandbox(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),typeof tn.replaysSessionSampleRate=="number"&&(nn.sessionSampleRate=tn.replaysSessionSampleRate),typeof tn.replaysOnErrorSampleRate=="number"&&(nn.errorSampleRate=tn.replaysOnErrorSampleRate),nn):(consoleSandbox(()=>{console.warn("SDK client is not available.")}),nn)}function _getMergedNetworkHeaders(ze){return[...DEFAULT_NETWORK_HEADERS,...ze.map(en=>en.toLowerCase())]}function init(ze){const en={defaultIntegrations:getDefaultIntegrations(ze),...ze};applySdkMetadata(en,"astro",["astro","browser"]),init$1(en),setTag("runtime","browser")}function getDefaultIntegrations(ze){if((typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&hasTracingEnabled(ze))return[...getDefaultIntegrations$1(),browserTracingIntegration()]}document.addEventListener("astro:after-swap",()=>{htmx_minExports.process(document.body)});init({dsn:{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://anarchitecture.foundation",ASSETS_PREFIX:void 0}.PUBLIC_SENTRY_DSN,debug:!1,environment:{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://anarchitecture.foundation",ASSETS_PREFIX:void 0}.PUBLIC_VERCEL_ENV,release:{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://anarchitecture.foundation",ASSETS_PREFIX:void 0}.PUBLIC_VERCEL_GIT_COMMIT_SHA,tracesSampleRate:1,integrations:[new BrowserTracing,new Replay$1],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});
//# sourceMappingURL=page.CJwRLN-h.js.map
